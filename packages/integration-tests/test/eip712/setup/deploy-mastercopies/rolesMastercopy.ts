import assert from "assert"
import hre from "hardhat"
import { HardhatEthersSigner } from "@nomicfoundation/hardhat-ethers/signers"
import { Interface } from "ethers"

import { deployMastercopy, EIP1193Provider } from "@gnosis-guild/zodiac-core"
import { EthereumProvider } from "hardhat/types"

export const address = "0xD7dE09664b088340d4Bd32668AC40a8F6589E9eF"

export async function deployRolesMastercopy(signer: HardhatEthersSigner) {
  const provider = createEIP1193(
    hre.network.config.chainId,
    hre.network.provider,
    signer
  )

  {
    const { address, noop } = await deployMastercopy({
      factory: "0xce0042b868300000d44a59004da54a005ffdcf9f",
      bytecode: conditionsTransformBytecode,
      constructorArgs: {
        types: [],
        values: [],
      },
      salt: "0x0000000000000000000000000000000000000000000000000000000000000000",
      provider,
    })
    console.log(address)
  }

  {
    const { address: rolesAddress, noop } = await deployMastercopy({
      factory: "0xce0042b868300000d44a59004da54a005ffdcf9f",
      bytecode: rolesBytecode,
      constructorArgs: {
        types: ["address", "address", "address"],
        values: [
          "0x0000000000000000000000000000000000000001",
          "0x0000000000000000000000000000000000000001",
          "0x0000000000000000000000000000000000000001",
        ],
      },
      salt: "0x0000000000000000000000000000000000000000000000000000000000000000",
      provider,
    })
    assert(address == rolesAddress)
  }
}

export const rolesModMastercopy = {
  address: "0xD7dE09664b088340d4Bd32668AC40a8F6589E9eF",
  iface: Interface.from([
    "function allowFunction(bytes32 roleKey, address targetAddress, bytes4 selector, uint8 options)",
    "function allowTarget(bytes32 roleKey, address targetAddress, uint8 options)",
    "function allowances(bytes32) view returns (uint128 refill, uint128 maxRefill, uint64 period, uint128 balance, uint64 timestamp)",
    "function assignRoles(address module, bytes32[] roleKeys, bool[] memberOf)",
    "function avatar() view returns (address)",
    "function consumed(address, bytes32) view returns (bool)",
    "function defaultRoles(address) view returns (bytes32)",
    "function disableModule(address prevModule, address module)",
    "function enableModule(address module)",
    "function execTransactionFromModule(address to, uint256 value, bytes data, uint8 operation) returns (bool success)",
    "function execTransactionFromModuleReturnData(address to, uint256 value, bytes data, uint8 operation) returns (bool success, bytes returnData)",
    "function execTransactionWithRole(address to, uint256 value, bytes data, uint8 operation, bytes32 roleKey, bool shouldRevert) returns (bool success)",
    "function execTransactionWithRoleReturnData(address to, uint256 value, bytes data, uint8 operation, bytes32 roleKey, bool shouldRevert) returns (bool success, bytes returnData)",
    "function getModulesPaginated(address start, uint256 pageSize) view returns (address[] array, address next)",
    "function invalidate(bytes32 hash)",
    "function isModuleEnabled(address _module) view returns (bool)",
    "function moduleTxHash(bytes data, bytes32 salt) view returns (bytes32)",
    "function owner() view returns (address)",
    "function renounceOwnership()",
    "function revokeFunction(bytes32 roleKey, address targetAddress, bytes4 selector)",
    "function revokeTarget(bytes32 roleKey, address targetAddress)",
    "function scopeFunction(bytes32 roleKey, address targetAddress, bytes4 selector, (uint8 parent, uint8 paramType, uint8 operator, bytes compValue)[] conditions, uint8 options)",
    "function scopeTarget(bytes32 roleKey, address targetAddress)",
    "function setAllowance(bytes32 key, uint128 balance, uint128 maxRefill, uint128 refill, uint64 period, uint64 timestamp)",
    "function setAvatar(address _avatar)",
    "function setDefaultRole(address module, bytes32 roleKey)",
    "function setTarget(address _target)",
    "function setTransactionUnwrapper(address to, bytes4 selector, address adapter)",
    "function setUp(bytes initParams)",
    "function transferOwnership(address newOwner)",
    "function unwrappers(bytes32) view returns (address)",
  ]),
}

const conditionsTransformBytecode =
  "0x612cfe610034600b8282823980515f1a607314602857634e487b7160e01b5f525f60045260245ffd5b305f52607381538281f3fe7300000000000000000000000000000000000000003014608060405260043610610034575f3560e01c806317024b0514610038575b5f5ffd5b818015610043575f5ffd5b50610057610052366004612965565b610073565b6040516001600160a01b03909116815260200160405180910390f35b5f61007d826100b3565b61008682610164565b5f610091835f61021e565b90505f61009e848361040f565b90505f6100aa826104b9565b95945050505050565b6100bc816105d2565b6100c581610666565b5f5b81518110156100fb576100f38282815181106100e5576100e5612aa5565b602002602001015182610726565b6001016100c7565b5061010581610de0565b61010e81610f14565b61011781611276565b61012081611311565b5f61012b825f61021e565b905060058151600581111561014257610142612ab9565b1461016057604051632f48858160e21b815260040160405180910390fd5b5050565b80515f5b8181101561021957601083828151811061018457610184612aa5565b602002602001015160400151601f8111156101a1576101a1612ab9565b1480156101b557506101b383826113fa565b155b15610211575f8382815181106101cd576101cd612aa5565b60200260200101516060015190505f81519050602082019150602081038252818584815181106101ff576101ff612aa5565b60200260200101516060018190525050505b600101610168565b505050565b610226612855565b5f6102318484611536565b90505f61023e85856115a9565b90505f5f61024c8787611682565b925050915083801561025c575082155b156102765761026b878361021e565b945050505050610409565b8380156102805750825b6102a75786868151811061029657610296612aa5565b6020026020010151602001516102aa565b60025b859060058111156102bd576102bd612ab9565b908160058111156102d0576102d0612ab9565b9052506004855160058111156102e8576102e8612ab9565b1480156102f3575082155b6102fd5780610300565b60015b6001600160401b038111156103175761031761287b565b60405190808252806020026020018201604052801561035057816020015b61033d612855565b8152602001906001900390816103355790505b5060208601525f5b8560200151518110156103a157610378886103738386612ae1565b61021e565b8660200151828151811061038e5761038e612aa5565b6020908102919091010152600101610358565b506005855160058111156103b7576103b7612ab9565b03610404575f8787815181106103cf576103cf612aa5565b602002602001015160600151905080515f146103f6576103ee81612af4565b60f01c6103f9565b60045b61ffff166060870152505b505050505b92915050565b60605f61041b8361170d565b6104248561172e565b61042f906002612ae1565b6104399190612ae1565b9050806001600160401b038111156104535761045361287b565b6040519080825280601f01601f19166020018201604052801561047d576020820181803683370190505b509150600261048d858483611809565b6104979082612ae1565b90506104a481845f611b50565b506104b0848483611bd3565b50505092915050565b5f5f6104c483611d68565b9050610526818051602091820120604080516001600160f81b03198185015273ce0042b868300000d44a59004da54a005ffdcf9f60601b60218201525f6035820152605580820193909352815180820390930183526075019052805191012090565b9150813b5f8190036105cb5760405163257b1f8160e11b815273ce0042b868300000d44a59004da54a005ffdcf9f90634af63f029061056b9085905f90600401612b2e565b6020604051808303815f875af1158015610587573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906105ab9190612b6a565b6001600160a01b0316836001600160a01b0316146105cb576105cb612b90565b5050919050565b5f5f5b825181101561061857808382815181106105f1576105f1612aa5565b60200260200101515f015160ff16036106105761060d82612ba4565b91505b6001016105d5565b508060011415806106485750815f8151811061063657610636612aa5565b60200260200101515f015160ff165f14155b1561016057604051632f48858160e21b815260040160405180910390fd5b805160015b818110156102195782818151811061068557610685612aa5565b60200260200101515f015160ff16836001836106a19190612bbc565b815181106106b1576106b1612aa5565b60200260200101515f015160ff1611156106de57604051638484738160e01b815260040160405180910390fd5b808382815181106106f1576106f1612aa5565b60200260200101515f015160ff16111561071e57604051638484738160e01b815260040160405180910390fd5b60010161066b565b6040820151602083015160608401515f83601f81111561074857610748612ab9565b0361077e576060850151511561077957604051632d6ee65d60e21b8152600481018590526024015b60405180910390fd5b610dd9565b600183601f81111561079257610792612ab9565b14806107af5750600283601f8111156107ad576107ad612ab9565b145b1561080f575f8260058111156107c7576107c7612ab9565b146107e85760405163de10075b60e01b815260048101859052602401610770565b6060850151511561077957604051632d6ee65d60e21b815260048101859052602401610770565b600583601f81111561082357610823612ab9565b0361090a57600382600581111561083c5761083c612ab9565b1415801561085c5750600482600581111561085957610859612ab9565b14155b801561087a5750600582600581111561087757610877612ab9565b14155b1561089b5760405163de10075b60e01b815260048101859052602401610770565b60058260058111156108af576108af612ab9565b036108e7578051158015906108c657508051600214155b1561077957604051632d6ee65d60e21b815260048101859052602401610770565b80511561077957604051632d6ee65d60e21b815260048101859052602401610770565b600683601f81111561091e5761091e612ab9565b148061093b5750600783601f81111561093957610939612ab9565b145b156109765760045b82600581111561095557610955612ab9565b146108e75760405163de10075b60e01b815260048101859052602401610770565b600883601f81111561098a5761098a612ab9565b03610996576004610943565b600f83601f8111156109aa576109aa612ab9565b036109b6576001610943565b601083601f8111156109ca576109ca612ab9565b03610a775760018260058111156109e3576109e3612ab9565b14158015610a0357506002826005811115610a0057610a00612ab9565b14155b8015610a2157506003826005811115610a1e57610a1e612ab9565b14155b8015610a3f57506004826005811115610a3c57610a3c612ab9565b14155b15610a605760405163de10075b60e01b815260048101859052602401610770565b805115806108c65750602081516108c69190612bcf565b601183601f811115610a8b57610a8b612ab9565b1480610aa85750601283601f811115610aa657610aa6612ab9565b145b80610ac45750601383601f811115610ac257610ac2612ab9565b145b80610ae05750601483601f811115610ade57610ade612ab9565b145b15610b405760015b826005811115610afa57610afa612ab9565b14610b1b5760405163de10075b60e01b815260048101859052602401610770565b805160201461077957604051632d6ee65d60e21b815260048101859052602401610770565b601583601f811115610b5457610b54612ab9565b03610bd2576001826005811115610b6d57610b6d612ab9565b14158015610b8d57506002826005811115610b8a57610b8a612ab9565b14155b15610bae5760405163de10075b60e01b815260048101859052602401610770565b6004815110806108c657506002808251610bc89190612bbc565b6108c69190612bcf565b601683601f811115610be657610be6612ab9565b03610c1057805160201461077957604051632d6ee65d60e21b815260048101859052602401610770565b601c83601f811115610c2457610c24612ab9565b03610d015760015b826005811115610c3e57610c3e612ab9565b14610c5f5760405163de10075b60e01b815260048101859052602401610770565b8051602014158015610c7357508051603614155b15610c9457604051632d6ee65d60e21b815260048101859052602401610770565b805160360361077957601281603481518110610cb257610cb2612aa5565b016020015160f81c1180610ce05750601281603581518110610cd657610cd6612aa5565b016020015160f81c115b1561077957604051631de9d6ef60e01b815260048101859052602401610770565b601d83601f811115610d1557610d15612ab9565b03610d20575f610c2c565b601e83601f811115610d3457610d34612ab9565b03610d3f575f610ae8565b601783601f811115610d5357610d53612ab9565b03610dbd575f826005811115610d6b57610d6b612ab9565b14610d8c5760405163de10075b60e01b815260048101859052602401610770565b6020815110806108c6575060348151111561077957604051632d6ee65d60e21b815260048101859052602401610770565b604051630a7d7b8960e41b815260048101859052602401610770565b5050505050565b80515f5b8181101561021957601d838281518110610e0057610e00612aa5565b602002602001015160400151601f811115610e1d57610e1d612ab9565b1480610e575750601e838281518110610e3857610e38612aa5565b602002602001015160400151601f811115610e5557610e55612ab9565b145b15610e94575f610e678483611da0565b92505081159050610e8e57604051631d40413960e11b815260048101839052602401610770565b50610f0c565b6017838281518110610ea857610ea8612aa5565b602002602001015160400151601f811115610ec557610ec5612ab9565b03610f0c5780838281518110610edd57610edd612aa5565b60200260200101515f015160ff1603610f0c57604051631d40413960e11b815260048101829052602401610770565b600101610de4565b5f5b8151811015610160575f828281518110610f3257610f32612aa5565b602002602001015190505f5f610f488585611682565b90935091505f905083602001516005811115610f6657610f66612ab9565b0361105657601d8360400151601f811115610f8357610f83612ab9565b1480610fa45750601e8360400151601f811115610fa257610fa2612ab9565b145b80610fc4575060178360400151601f811115610fc257610fc2612ab9565b145b8015610fcf57508115155b15610ff05760405163f3379ddd60e01b815260048101859052602401610770565b60018360400151601f81111561100857611008612ab9565b1480611029575060028360400151601f81111561102757611027612ab9565b145b1561105157815f036110515760405163f3379ddd60e01b815260048101859052602401610770565b61126b565b60018360200151600581111561106e5761106e612ab9565b148061108f575060028360200151600581111561108d5761108d612ab9565b145b156110b65781156110515760405163f3379ddd60e01b815260048101859052602401610770565b6003836020015160058111156110ce576110ce612ab9565b036110f657805f036110515760405163f3379ddd60e01b815260048101859052602401610770565b60058360200151600581111561110e5761110e612ab9565b0361113657815f036110515760405163f3379ddd60e01b815260048101859052602401610770565b60048360200151600581111561114e5761114e612ab9565b1461115b5761115b612b90565b805f0361117e5760405163f3379ddd60e01b815260048101859052602401610770565b60068360400151601f81111561119657611196612ab9565b14806111b7575060078360400151601f8111156111b5576111b5612ab9565b145b80156111c4575081600114155b156111e55760405163f3379ddd60e01b815260048101859052602401610770565b60068360400151601f8111156111fd576111fd612ab9565b148061121e575060078360400151601f81111561121c5761121c612ab9565b145b8061123e575060088360400151601f81111561123c5761123c612ab9565b145b801561124a5750808214155b1561126b5760405163f3379ddd60e01b815260048101859052602401610770565b505050600101610f16565b5f5b8151811015610160575f5f61128d8484611682565b5091509150805f036112a0575050611309565b5f805b82811015611304575f6112b68286612ae1565b90505f6112c38883611eea565b90508380156112cf5750805b156112f0576040516335431f5360e11b815260048101889052602401610770565b806112fa57600193505b50506001016112a3565b505050505b600101611278565b5f5b8151811015610160575f82828151811061132f5761132f612aa5565b602002602001015190506001601f81111561134c5761134c612ab9565b8160400151601f81111561136257611362612ab9565b1480611383575060028160400151601f81111561138157611381612ab9565b145b806113a357506004816020015160058111156113a1576113a1612ab9565b145b156113e7576113b28383611fbc565b1580156113c657506113c4838361202e565b155b156113e7576040516303a3183b60e61b815260048101839052602401610770565b6113f183836120b9565b50600101611313565b5f5f83838151811061140e5761140e612aa5565b60200260200101516020015190506001600581111561142f5761142f612ab9565b81600581111561144157611441612ab9565b03611450576001915050610409565b600281600581111561146457611464612ab9565b14806114815750600481600581111561147f5761147f612ab9565b145b8061149d5750600581600581111561149b5761149b612ab9565b145b156114ab575f915050610409565b83515f6114b9856001612ae1565b90505b8181101561152a575f8682815181106114d7576114d7612aa5565b60200260200101515f01519050858160ff1610156114f55750611522565b858160ff161115611506575061152a565b61151087836113fa565b611520575f945050505050610409565b505b6001016114bc565b50600192505050610409565b5f600183838151811061154b5761154b612aa5565b602002602001015160400151601f81111561156857611568612ab9565b14806115a25750600283838151811061158357611583612aa5565b602002602001015160400151601f8111156115a0576115a0612ab9565b145b9392505050565b5f8060048484815181106115bf576115bf612aa5565b60200260200101516020015160058111156115dc576115dc612ab9565b1490505f6115ea8585611536565b9050811580156115f8575080155b15611607575f92505050610409565b5f5f6116138787611682565b92505091506001811161162c575f945050505050610409565b5f61163788846122a7565b905060015b8281101561167457611657896116528387612ae1565b6122a7565b821461166c5760019650505050505050610409565b60010161163c565b505f98975050505050505050565b81515f9081908190600185015b81811015611704575f8782815181106116aa576116aa612aa5565b60200260200101515f015160ff1690508681036116ed57845f036116cc578195505b8460010194506116dc8883611eea565b156116e8578360010193505b6116fb565b868111156116fb5750611704565b5060010161168f565b50509250925092565b5f6003611719836122ba565b6117239190612bee565b610409906002612ae1565b80515f9061173d600582612bee565b611748906002612ae1565b91505f5b818110156105cb57601084828151811061176857611768612aa5565b602002602001015160400151601f81111561178557611785612ab9565b1061180157611795600284612ae1565b925060108482815181106117ab576117ab612aa5565b602002602001015160400151601f8111156117c8576117c8612ab9565b146117f1578381815181106117df576117df612aa5565b602002602001015160600151516117f4565b60205b6117fe9084612ae1565b92505b60010161174c565b5f5f82905061181a85518585611b50565b6118249084612ae1565b92505f600586516118359190612bee565b61183f9085612ae1565b90505f5b8651811015611b3b575f5f611858898461230b565b9250925050600389848151811061187157611871612aa5565b602002602001015160400151601f81111561188e5761188e612ab9565b60ff16901b60f81b88886118a181612ba4565b9950815181106118b3576118b3612aa5565b60200101906001600160f81b03191690815f1a9053508160f81b8888806118d990612ba4565b9950815181106118eb576118eb612aa5565b60200101906001600160f81b03191690815f1a9053508060f81b88888061191190612ba4565b99508151811061192357611923612aa5565b60200101906001600160f81b03191690815f1a9053506001600160f81b031960f085901b16888861195381612ba4565b99508151811061196557611965612aa5565b60200101906001600160f81b03191690815f1a9053508360f81b88888061198b90612ba4565b99508151811061199d5761199d612aa5565b60200101906001600160f81b03191690815f1a90535060108984815181106119c7576119c7612aa5565b602002602001015160400151601f8111156119e4576119e4612ab9565b10156119f1575050611b33565b5f60108a8581518110611a0657611a06612aa5565b602002602001015160400151601f811115611a2357611a23612ab9565b14611a4b57898481518110611a3a57611a3a612aa5565b602002602001015160600151611a92565b898481518110611a5d57611a5d612aa5565b60200260200101516060015180519060200120604051602001611a8291815260200190565b6040516020818303038152906040525b80519091506001600160f81b031960f082901b168a87611ab181612ba4565b985081518110611ac357611ac3612aa5565b60200101906001600160f81b03191690815f1a9053508060f81b8a8780611ae990612ba4565b985081518110611afb57611afb612aa5565b60200101906001600160f81b03191690815f1a90535081602001868b602001018282825e50611b2c90508187612ae1565b9550505050505b600101611843565b50611b468282612bbc565b9695505050505050565b5f61ffff8410611b6257611b62612b90565b600884901c60f81b838381518110611b7c57611b7c612aa5565b60200101906001600160f81b03191690815f1a90535060f884901b83611ba3846001612ae1565b81518110611bb357611bb3612aa5565b60200101906001600160f81b03191690815f1a9053506002949350505050565b5f5f611bde856123da565b9050611bec81518585611b50565b611bf69084612ae1565b92505f5b8151811015611d4e575f828281518110611c1657611c16612aa5565b60200260200101516060015161ffff16600d848481518110611c3a57611c3a612aa5565b60200260200101516040015162ffffff16901b6015858581518110611c6157611c61612aa5565b6020026020010151602001516005811115611c7e57611c7e612ab9565b62ffffff16901b171790506001600160f81b031960e882901b168686611ca381612ba4565b975081518110611cb557611cb5612aa5565b60200101906001600160f81b03191690815f1a9053506001600160f81b031960f082901b168686611ce581612ba4565b975081518110611cf757611cf7612aa5565b60200101906001600160f81b03191690815f1a9053508060f81b868680611d1d90612ba4565b975081518110611d2f57611d2f612aa5565b60200101906001600160f81b03191690815f1a90535050600101611bfa565b5060038151611d5d9190612bee565b6100aa906002612ae1565b606081516001611d789190612ae1565b82604051602001611d8a929190612c05565b6040516020818303038152906040529050919050565b5f5f5f5f858581518110611db657611db6612aa5565b60200260200101515f015160ff1690505b5f6005878381518110611ddc57611ddc612aa5565b6020026020010151602001516005811115611df957611df9612ab9565b1490505f6001888481518110611e1157611e11612aa5565b602002602001015160400151601f811115611e2e57611e2e612ab9565b1480611e6857506002888481518110611e4957611e49612aa5565b602002602001015160400151601f811115611e6657611e66612ab9565b145b90508115611e7c57611e7986612ba4565b95505b8015611e8e57611e8b85612ba4565b94505b81158015611e9a575080155b15611eab57611ea884612ba4565b93505b825f03611eb9575050611ee2565b878381518110611ecb57611ecb612aa5565b60200260200101515f015160ff1692505050611dc7565b509250925092565b5f80838381518110611efe57611efe612aa5565b6020026020010151602001516005811115611f1b57611f1b612ab9565b14611f2857506001610409565b5f611f34836001612ae1565b90505b8351811015611fb35782848281518110611f5357611f53612aa5565b60200260200101515f015160ff1603611f8457611f708482611eea565b15611f7f576001915050610409565b611fab565b82848281518110611f9757611f97612aa5565b60200260200101515f015160ff1611611fb3575b600101611f37565b505f9392505050565b5f5f5f611fc98585611682565b925050915080600103611fe157600192505050610409565b5f611fec86846122a7565b905060015b8281101561202157612007876116528387612ae1565b8214612019575f945050505050610409565b600101611ff1565b5060019695505050505050565b5f5f5f61203b8585611682565b92505091505f5f90505b818110156120ad575f61205c876103738487612ae1565b519050600281600581111561207357612073612ab9565b141580156120935750600581600581111561209057612090612ab9565b14155b156120a4575f945050505050610409565b50600101612045565b50600195945050505050565b60178282815181106120cd576120cd612aa5565b602002602001015160400151601f8111156120ea576120ea612ab9565b146120f3575050565b5f82828151811061210657612106612aa5565b60200260200101516060015190505f8161211f90612c56565b905060f881901c60ff60e883901c1663ffffffff60c084901c81169060a085901c1681158015612153575063ffffffff8116155b1561217457604051632bb338fb60e01b815260048101889052602401610770565b5f88888151811061218757612187612aa5565b60200260200101515f015160ff1690505b5f8982815181106121ab576121ab612aa5565b60200260200101516020015160058111156121c8576121c8612ab9565b036121f4578881815181106121df576121df612aa5565b60200260200101515f015160ff169050612198565b5f6121ff8a83611682565b505090505f6122178b8860ff16846103739190612ae1565b905060018151600581111561222e5761222e612ab9565b1461224f5760405163e0f6621160e01b8152600481018b9052602401610770565b505f6122628b61037360ff891685612ae1565b905060018151600581111561227957612279612ab9565b1461229a5760405163e0f6621160e01b8152600481018b9052602401610770565b5050505050505050505050565b5f6115a26122b5848461021e565b61267d565b60015f5b826020015151811015612305576122f1836020015182815181106122e4576122e4612aa5565b60200260200101516122ba565b6122fb9083612ae1565b91506001016122be565b50919050565b5f80808061231a856001612ae1565b90505b8551811015612382575f86828151811061233957612339612aa5565b60200260200101515f015160ff16905085810361236b57835f0361235b578194505b61236484612ba4565b9350612379565b858111156123795750612382565b5060010161231d565b508190505f6123918285612ae1565b90505b83811115611ee2576123b0866123ab600184612bbc565b612785565b156123c5576123be82612c79565b91506123ca565b611ee2565b6123d381612c79565b9050612394565b60605f6123e6836122ba565b90505f816001600160401b038111156124015761240161287b565b60405190808252806020026020018201604052801561245157816020015b604080516080810182525f8082526020808301829052928201819052606082015282525f1990920191018161241f5790505b5090505f826001600160401b0381111561246d5761246d61287b565b6040519080825280602002602001820160405280156124a657816020015b612493612855565b81526020019060019003908161248b5790505b5090505f836001600160401b038111156124c2576124c261287b565b6040519080825280602002602001820160405280156124eb578160200160208202803683370190505b50905085825f8151811061250157612501612aa5565b60200260200101819052505f815f8151811061251f5761251f612aa5565b60209081029190910101525f6001815b81831015612670575f85848151811061254a5761254a612aa5565b602002602001015190505f85858151811061256757612567612aa5565b60200260200101519050848061257c90612ba4565b9550506040518060800160405280828152602001835f015160058111156125a5576125a5612ab9565b81526020018360200151518152602001836060015161ffff168152508884815181106125d3576125d3612aa5565b60209081029190910101525f5b82602001515181101561265b578260200151818151811061260357612603612aa5565b602002602001015188868151811061261d5761261d612aa5565b60200260200101819052508387868151811061263b5761263b612aa5565b60209081029190910101528461265081612ba4565b9550506001016125e0565b508261266681612ba4565b935050505061252f565b5093979650505050505050565b5f8160200151515f0361269d578151600581111561040957610409612ab9565b5f8260200151516001600160401b038111156126bb576126bb61287b565b6040519080825280602002602001820160405280156126e4578160200160208202803683370190505b5090505f5b8360200151518110156127415761271c8460200151828151811061270f5761270f612aa5565b602002602001015161267d565b82828151811061272e5761272e612aa5565b60209081029190910101526001016126e9565b508251600581111561275557612755612ab9565b60405161276791908390602001612c8e565b60405160208183030381529060405280519060200120915050919050565b5f8083838151811061279957612799612aa5565b60200260200101516020015160058111156127b6576127b6612ab9565b146127c257505f610409565b5f6127ce836001612ae1565b90505b835181101561284b57828482815181106127ed576127ed612aa5565b60200260200101515f015160ff160361281c5761280a8482612785565b612817575f915050610409565b612843565b8284828151811061282f5761282f612aa5565b60200260200101515f015160ff161161284b575b6001016127d1565b5060019392505050565b6040805160808101909152805f8152602001606081526020015f81526020015f81525090565b634e487b7160e01b5f52604160045260245ffd5b604051608081016001600160401b03811182821017156128b1576128b161287b565b60405290565b604051601f8201601f191681016001600160401b03811182821017156128df576128df61287b565b604052919050565b8035602081106128f5575f5ffd5b919050565b5f82601f830112612909575f5ffd5b81356001600160401b038111156129225761292261287b565b612935601f8201601f19166020016128b7565b818152846020838601011115612949575f5ffd5b816020850160208301375f918101602001919091529392505050565b5f60208284031215612975575f5ffd5b81356001600160401b0381111561298a575f5ffd5b8201601f8101841361299a575f5ffd5b80356001600160401b038111156129b3576129b361287b565b8060051b6129c3602082016128b7565b918252602081840181019290810190878411156129de575f5ffd5b6020850192505b83831015612a9a5782356001600160401b03811115612a02575f5ffd5b85016080818a03601f19011215612a17575f5ffd5b612a1f61288f565b602082013560ff81168114612a32575f5ffd5b8152604082013560068110612a45575f5ffd5b6020820152612a56606083016128e7565b604082015260808201356001600160401b03811115612a73575f5ffd5b612a828b6020838601016128fa565b606083015250835250602092830192909101906129e5565b979650505050505050565b634e487b7160e01b5f52603260045260245ffd5b634e487b7160e01b5f52602160045260245ffd5b634e487b7160e01b5f52601160045260245ffd5b8082018082111561040957610409612acd565b805160208201516001600160f01b03198116919060028210156105cb576001600160f01b031960029290920360031b82901b161692915050565b604081525f83518060408401528060208601606085015e5f606082850101526060601f19601f8301168401019150508260208301529392505050565b5f60208284031215612b7a575f5ffd5b81516001600160a01b03811681146115a2575f5ffd5b634e487b7160e01b5f52600160045260245ffd5b5f60018201612bb557612bb5612acd565b5060010190565b8181038181111561040957610409612acd565b5f82612be957634e487b7160e01b5f52601260045260245ffd5b500690565b808202811582820484141761040957610409612acd565b606360f81b815260e083901b6001600160e01b03191660018201526880600e6000396000f360b81b60058201525f600e820181905282518060208501600f85015e5f9201600f019182525092915050565b80516020808301519190811015612305575f1960209190910360031b1b16919050565b5f81612c8757612c87612acd565b505f190190565b8281525f602082018351602085015f5b82811015612cbc578151845260209384019390910190600101612c9e565b5091969550505050505056fea26469706673582212207ef12b06ec11156972477d46e088dbc9b442b70e2149ebc0adbb23f6c256ae3064736f6c634300081e0033"
const rolesBytecode =
  "0x608060405234801561000f575f5ffd5b5060405161629438038061629483398101604081905261002e91610329565b604080516001600160a01b03858116602083015284811682840152831660608083019190915282518083039091018152608090910190915261006f81610078565b505050506103b7565b5f54610100900460ff161580801561009657505f54600160ff909116105b806100af5750303b1580156100af57505f5460ff166001145b6101165760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840160405180910390fd5b5f805460ff191660011790558015610137575f805461ff0019166101001790555b5f5f5f8480602001905181019061014e9190610329565b9194509250905061015e83610256565b606580546001600160a01b038085166001600160a01b03199283161790925560668054928416929091169190911790556101966102a7565b816001600160a01b0316836001600160a01b0316336001600160a01b03167f71d740fcd2b4a7ab76df6fe093ae985960dabcc06cf64811bc538bcfb695e61284604051806040016040528060058152602001640332e302e360dc1b815250604051610202929190610373565b60405180910390a45050508015610252575f805461ff0019169055604051600181527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb38474024989060200160405180910390a15b5050565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0905f90a35050565b60015f5260686020525f5160206162745f395f51905f52546001600160a01b0316156102e65760405163dfd49ebd60e01b815260040160405180910390fd5b60015f81905260686020525f5160206162745f395f51905f5280546001600160a01b0319169091179055565b6001600160a01b0381168114610326575f5ffd5b50565b5f5f5f6060848603121561033b575f5ffd5b835161034681610312565b602085015190935061035781610312565b604085015190925061036881610312565b809150509250925092565b60018060a01b0383168152604060208201525f82518060408401528060208501606085015e5f606082850101526060601f19601f8301168401019150509392505050565b615eb0806103c45f395ff3fe608060405234801561000f575f5ffd5b50600436106101f0575f3560e01c8063715018a61161011b578063b3dd25c7116100b4578063e009cfde11610079578063e009cfde1461053f578063e29dfba814610552578063f1637e571461057f578063f2fde38b14610592578063ffa1ad74146105a5575f5ffd5b8063b3dd25c7146104d2578063c6fe8747146104e5578063cc2f8452146104f8578063d4b8399214610519578063d8afba761461052c575f5ffd5b8063715018a6146104345780637508dd981461043c578063776d1a011461044f5780638bb9c5bf146104625780638da5cb5b14610475578063946d364e14610486578063957ed2b314610499578063a4f9edbf146104ac578063a8ec43ee146104bf575f5ffd5b80632d3c25471161018d5780632d3c2547146102da5780632d9ad53d14610307578063468721a71461032a5780635229073f1461033d5780635aef7de6146103505780635e7c9fe814610363578063610b5925146103fb57806366523f7d1461040e57806369ecc3cf14610421575f5ffd5b80624825f7146101f45780630172a43a14610209578063086cfca81461021c5780630920e8d21461022f5780630c6c76b814610242578063208dd1ff146102555780632916a9af146102685780632959513c1461027b5780632b99e506146102b9575b5f5ffd5b61020761020236600461498d565b6105d6565b005b6102076102173660046149eb565b6106a4565b61020761022a366004614a19565b610716565b61020761023d366004614a82565b61076f565b6102076102503660046149eb565b6108ad565b610207610263366004614aed565b610916565b610207610276366004614b2e565b610974565b6102a3610289366004614b74565b606b6020525f90815260409020546001600160a01b031681565b6040516102b09190614b8b565b60405180910390f35b6102cc6102c7366004614bf5565b610a19565b6040516102b0929190614cac565b6102f96102e8366004614a19565b606c6020525f908152604090205481565b6040519081526020016102b0565b61031a610315366004614a19565b610b09565b60405190151581526020016102b0565b61031a610338366004614cc6565b610b42565b6102cc61034b366004614cc6565b610b88565b6065546102a3906001600160a01b031681565b6103bc610371366004614b74565b606a6020525f9081526040902080546001909101546001600160801b0380831692600160801b90048116916001600160401b0380821692600160401b83041691600160c01b90041685565b604080516001600160801b03968716815294861660208601526001600160401b039384169085015293166060830152909116608082015260a0016102b0565b610207610409366004614a19565b610bd2565b61020761041c366004614d34565b610ce1565b61020761042f366004614b74565b610d6b565b610207610dbd565b61020761044a366004614eba565b610dd0565b61020761045d366004614a19565b610ebf565b610207610470366004614b74565b610f18565b6033546001600160a01b03166102a3565b610207610494366004614aed565b610f65565b6102076104a7366004615005565b610fbd565b6102076104ba366004615085565b611044565b6102076104cd3660046150b6565b611219565b6102076104e036600461511f565b6113d9565b61031a6104f3366004614bf5565b611459565b61050b610506366004614aed565b611541565b6040516102b0929190615160565b6066546102a3906001600160a01b031681565b6102f961053a3660046151c2565b6116d1565b61020761054d366004615209565b6117ef565b61031a610560366004614aed565b606760209081525f928352604080842090915290825290205460ff1681565b61020761058d366004615235565b6118e6565b6102076105a0366004614a19565b611a04565b6105c9604051806040016040528060058152602001640332e302e360dc1b81525081565b6040516102b09190615285565b6105de611a7d565b826001600160801b03165f036105fb576001600160801b036105fd565b825b5f858152606a6020526040908190206001810180546001600160801b03808616600160801b02888216179093556001600160401b0386811667ffffffffffffffff198316179092559251939650600160c01b83041692600160401b90920416907f63d7ec44a20b176da1d60d75259d264ee67b3d8213706afa71a28f69ed8ebece9061069490889084908990899089908990615297565b60405180910390a1505050505050565b6106ac611a7d565b5f8281526069602090815260408083206001600160a01b038516845260010190915290819020805460ff19169055517f3ccf62aacc3286173cedf5c20ec550071636a2faf0a3b28d93841736a43f822b9061070a90849084906152d5565b60405180910390a15050565b61071e611a7d565b606580546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f52ae88b092de36f87fb43fe794eb1381023b9c1bce563a871154022c63dce342905f90a35050565b610777611a7d565b5f8581526069602090815260408083206001600160a01b03881684526001908101909252909120805460ff191690911790556001600160601b03606085901b6001600160601b03191617821561084d5761084882736e9cb2a71f714f2a90604b247e2fbfac9c47202f6317024b0587876040518363ffffffff1660e01b81526004016108049291906153aa565b602060405180830381865af415801561081f573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610843919061546a565b611ad7565b610856565b61085682611b00565b5f8781526069602090815260408083208584526002019091529081902091909155517f018ad4e6ca381cf52c3d09a06369f896167ec538ccc03b8f7e452f55814af47a906106949088908890889088908890615495565b6108b5611a7d565b5f8281526069602090815260408083206001600160a01b038516845260010190915290819020805460ff19166002179055517f277465b84f512b759d745fab70327b693ee21ce592fca91a3f491739a25fa76a9061070a90849084906152d5565b61091e611a7d565b5f8181526069602090815260408083206001600160a01b038616845290915280822091909155517f76e6093c136cd7faa5a6d92b2b633f3b4595abd4a529b7a13917398355fea6949061070a90839085906152d5565b61097c611a7d565b60a082901c63ffffffff60401b16606084811b6001600160601b031916919091175f908152606b602090815260409182902080546001600160a01b0319166001600160a01b03868116918217909255835191881682526001600160e01b0319871692820192909252918201527f1330d96b64c7e86736f77e027ca34223dd3d1d08049281281c9d597d8098ed5991015b60405180910390a1505050565b5f60605f5f610a2786611b23565b915091505f610a3a878d8d8d8d8d611d44565b9050610a4581611e32565b606654604051635229073f60e01b81526001600160a01b0390911690635229073f90610a7d908f908f908f908f908f90600401615583565b5f604051808303815f875af1158015610a98573d5f5f3e3d5ffd5b505050506040513d5f823e601f3d908101601f19168201604052610abf91908101906155b9565b9095509350858015610acf575084155b15610aed5760405163d27b44a960e01b815260040160405180910390fd5b610afa8388848489611eb8565b50505097509795505050505050565b5f60016001600160a01b03831614801590610b3c57506001600160a01b038281165f908152606860205260409020541615155b92915050565b5f610b7c8686868686606c5f610b56611fac565b6001600160a01b03166001600160a01b031681526020019081526020015f20545f611459565b90505b95945050505050565b5f6060610bc48787878787606c5f610b9e611fac565b6001600160a01b03166001600160a01b031681526020019081526020015f20545f610a19565b915091509550959350505050565b610bda611a7d565b6001600160a01b0381161580610bf957506001600160a01b0381166001145b15610c225780604051635c93ff2f60e11b8152600401610c199190614b8b565b60405180910390fd5b6001600160a01b038181165f908152606860205260409020541615610c5c5780604051632061897360e01b8152600401610c199190614b8b565b60686020525f516020615e5b5f395f51905f5280546001600160a01b038381165f81815260408082208054949095166001600160a01b03199485161790945560019052835490911617909155517fecdf3a3effea5783a3c4c2140e677577666428d44ed9d474a0b3a4c9943f844090610cd6908390614b8b565b60405180910390a150565b610ce9611a7d565b5f83815260696020526040812060020190610d048484612007565b81526020019081526020015f205f90557f32a3a599b308fc900a0e6513db2ad40bf0c94367da90048a4b308d8c6b2dd6ea838383604051610a0c939291909283526001600160a01b039190911660208301526001600160e01b031916604082015260600190565b335f908152606760209081526040808320848452825291829020805460ff1916600117905590518281527f89a77869d7b8125ba16e08a92ddc8cc26fb1fa47241971167954489a5e66c2559101610cd6565b610dc5611a7d565b610dce5f612027565b565b610dd8611a7d565b6040516317024b0560e01b81525f90736e9cb2a71f714f2a90604b247e2fbfac9c47202f906317024b0590610e11908690600401615641565b602060405180830381865af4158015610e2c573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610e50919061546a565b9050610e5c8282611ad7565b5f87815260696020526040812060020190610e778888612007565b81526020019081526020015f20819055507f4f6c340456f64db31a3d003c1224ba1de058557b1cdf71f21ae48ce4a4f64f5286868686866040516106949594939291906156e4565b610ec7611a7d565b606680546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f90cc2f570a6eb594b1580ea3e41247d2d73a55281889e86bd4ec2fc29c7e62d6905f90a35050565b5f8181526069602090815260408083203380855292528083209290925590517f76e6093c136cd7faa5a6d92b2b633f3b4595abd4a529b7a13917398355fea69491610cd6918491906152d5565b610f6d611a7d565b6001600160a01b0382165f818152606c6020908152604091829020849055815192835282018390527f60c85b61661a191efceebca036d48b290e04a1f08dd96472b920adbdd50c64e8910161070a565b610fc5611a7d565b5f5b8381101561103c575f858583818110610fe257610fe26157b3565b905060200201359050838383818110610ffd57610ffd6157b3565b905060200201602081019061101291906157c7565b156110295761102487825f5f5f6118e6565b611033565b6110338782610916565b50600101610fc7565b505050505050565b5f54610100900460ff161580801561106257505f54600160ff909116105b8061107b5750303b15801561107b57505f5460ff166001145b6110de5760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b6064820152608401610c19565b5f805460ff1916600117905580156110ff575f805461ff0019166101001790555b5f5f5f8480602001905181019061111691906157e2565b92509250925061112583612027565b606580546001600160a01b038085166001600160a01b031992831617909255606680549284169290911691909117905561115d612078565b816001600160a01b0316836001600160a01b0316336001600160a01b03167f71d740fcd2b4a7ab76df6fe093ae985960dabcc06cf64811bc538bcfb695e61284604051806040016040528060058152602001640332e302e360dc1b8152506040516111c9929190615821565b60405180910390a45050508015611215575f805461ff0019169055604051600181527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb38474024989060200161070a565b5050565b611221611a7d565b836001600160801b03165f0361123e576001600160801b03611240565b835b9350806001600160401b03165f03611258574261125a565b805b90506040518060a00160405280846001600160801b03168152602001856001600160801b03168152602001836001600160401b03168152602001866001600160801b03168152602001826001600160401b0316815250606a5f8881526020019081526020015f205f820151815f015f6101000a8154816001600160801b0302191690836001600160801b031602179055506020820151815f0160106101000a8154816001600160801b0302191690836001600160801b031602179055506040820151816001015f6101000a8154816001600160401b0302191690836001600160401b0316021790555060608201518160010160086101000a8154816001600160801b0302191690836001600160801b0316021790555060808201518160010160186101000a8154816001600160401b0302191690836001600160401b031602179055509050507f63d7ec44a20b176da1d60d75259d264ee67b3d8213706afa71a28f69ed8ebece86868686868660405161069496959493929190615297565b6113e1611a7d565b6113ea81611b00565b5f858152606960205260408120600201906114058686612007565b81526020019081526020015f20819055507f9603b65b11492fec54ccc3d9feb93536f804d82e12228187ff730a253fc283ee8484848460405161144b9493929190615844565b60405180910390a150505050565b5f5f5f61146585611b23565b915091505f611478868c8c8c8c8c611d44565b905061148381611e32565b60665460405163468721a760e01b81526001600160a01b039091169063468721a7906114bb908e908e908e908e908e90600401615583565b6020604051808303815f875af11580156114d7573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906114fb9190615877565b9350848015611508575083155b156115265760405163d27b44a960e01b815260040160405180910390fd5b6115338387848488611eb8565b505050979650505050505050565b60605f6001600160a01b038416600114801590611564575061156284610b09565b155b156115845783604051635c93ff2f60e11b8152600401610c199190614b8b565b825f036115a4576040516372dbed9760e11b815260040160405180910390fd5b826001600160401b038111156115bc576115bc614d66565b6040519080825280602002602001820160405280156115e5578160200160208202803683370190505b506001600160a01b038086165f90815260686020526040812054929450911691505b6001600160a01b0382161580159061162957506001600160a01b038216600114155b801561163457508381105b1561168e578183828151811061164c5761164c6157b3565b6001600160a01b039283166020918202929092018101919091529281165f90815260689093526040909220549091169080611686816158a6565b915050611607565b6001600160a01b0382166001146116c657826116ab6001836158be565b815181106116bb576116bb6157b3565b602002602001015191505b808352509250929050565b604080517f47e79534a245952e8b16893a336b85a3d9ea9fa8c573f3d803afb92a79469218602082015246918101919091523060608201525f9081906080016040516020818303038152906040528051906020012090505f601960f81b600160f81b837f2939aeeda3ca260200c9f7b436b19e13207547ccc65cfedc857751c5ea6d91d45f1b89896040516117679291906158d1565b6040805191829003822060208301939093528101919091526060810188905260800160408051808303601f190181529082905280516020918201206001600160f81b0319958616918301919091529290931660218401526022830152604282015260620160408051601f198184030181529190528051602090910120925050505b9392505050565b6117f7611a7d565b6001600160a01b038116158061181657506001600160a01b0381166001145b156118365780604051635c93ff2f60e11b8152600401610c199190614b8b565b6001600160a01b038281165f908152606860205260409020548116908216146118745780604051638b4189ff60e01b8152600401610c199190614b8b565b6001600160a01b038181165f81815260686020526040808220805487861684528284208054919096166001600160a01b0319918216179095559290915281549092169055517faab4fa2b463f581b2b32cb3b7e3b704b9ce37cc209b5fb4d77e593ace40542769061070a908390614b8b565b6118ee611a7d565b816001600160401b03165f0361190b576001600160401b0361190d565b815b9150806001600160801b03165f0361192c576001600160801b0361192e565b805b5f8581526069602090815260408083206001600160a01b038a16845290915290206001600160c01b031960c086901b1667ffffffffffffffff60801b608086901b16176001600160801b038316179055905061198985610b09565b6119965761199685610bd2565b604080518581526001600160a01b03871660208201526001600160401b0385811682840152841660608201526001600160801b038316608082015290517fc219bba489e694cb40935d0de27d36ecbe6f1e1b68a2b10c4cbf425a13b864ff9181900360a00190a15050505050565b611a0c611a7d565b6001600160a01b038116611a715760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608401610c19565b611a7a81612027565b50565b6033546001600160a01b03163314610dce5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610c19565b5f816001600160a01b031660a0846003811115611af657611af66152ec565b901b179392505050565b5f60a0826003811115611b1557611b156152ec565b600160a81b911b1792915050565b335f9081526068602052604081205481906001600160a01b0316611c32575f5f611b4b6120e3565b6001600160a01b038082165f9081526068602052604090205492945090925016611b8a5733604051634a0bfec160e01b8152600401610c199190614b8b565b6001600160a01b0381165f90815260676020908152604080832085845290915290205460ff1615611bd157604051639e1dc0c560e01b815260048101839052602401610c19565b6001600160a01b0381165f908152606760209081526040808320858452825291829020805460ff1916600117905590518381527f8c8e19e7e8e193118a05465d7676e82215052d3cb150628fbf598105dc2bb6ab910160405180910390a150505b5f839003611c5357604051631fb1d3e560e31b815260040160405180910390fd5b611c5b611fac565b5f8481526069602090815260408083206001600160a01b0385168452909152812054919350819003611ca057604051631fb1d3e560e31b815260040160405180910390fd5b60c081901c421015611cc557604051631f4cbe2760e11b815260040160405180910390fd5b608081901c6001600160401b0316421115611cf25760405162bc3e2b60e21b815260040160405180910390fd5b801960801b5f03611d0757505f199050915091565b6001600160801b038116836001821115611d3757611d266001836158be565b6001600160801b0319841617611d39565b5f5b935093505050915091565b6060611d4e6148ba565b5f6040518060600160405280896001600160a01b03168152602001888152602001856001811115611d8157611d816152ec565b905290505f606b81611d9c8b611d978a8c6158e0565b612007565b815260208101919091526040015f20546001600160a01b0316905080611dd457611dcd8a888886602001518661223e565b9250611de4565b611de1818b8989866123e4565b92505b5f83516016811115611df857611df86152ec565b14611e1f5782516040808501519051631a1537eb60e31b8152610c19929190600401615918565b50506020015190505b9695505050505050565b80515f5b81811015611eb3575f838281518110611e5157611e516157b3565b6020026020010151905080602001516001600160801b031681604001516001600160801b03161115611e8557611e85615936565b611eaa815f0151826060015183604001518460200151611ea5919061594a565b61255e565b50600101611e36565b505050565b81515f5b81811015611f6e575f848281518110611ed757611ed76157b3565b602002602001015190508315611f4f578051604082015160208301517f90355d540c2980efb4c360996dfc5405ee87e812e4f3db843857547cbdb5af65929190611f2290829061594a565b604080519384526001600160801b03928316602085015291169082015260600160405180910390a1611f65565b611f65815f01518260600151836020015161255e565b50600101611ebc565b50818015611f7d57505f198414155b1561103c575050505f9182526069602090815260408084206001600160a01b0395909516845293905291902055565b335f908152606860205260408120546001600160a01b031615611fce57503390565b5f611fd76120e3565b6001600160a01b038082165f908152606860205260409020549193501615905061200057919050565b5f91505090565b60a01c63ffffffff60401b1660609190911b6001600160601b0319161790565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0905f90a35050565b60015f5260686020525f516020615e5b5f395f51905f52546001600160a01b0316156120b75760405163dfd49ebd60e01b815260040160405180910390fd5b60015f81905260686020525f516020615e5b5f395f51905f5280546001600160a01b0319169091179055565b5f80803660658110156120fb57505f93849350915050565b5f5f5f612108858561258a565b919450925090505f61211b6061866158be565b90505f61212a8683818a615969565b61213391615990565b90508460ff165f036121b95782600481108061214e57508281115b1561216457505f998a9950975050505050505050565b845f61217b61217584838c8e615969565b866116d1565b905061219982828c8c87908a9261219493929190615969565b612600565b6121a4575f806121a7565b80825b9b509b50505050505050505050509091565b5f6121cf6121c984838a8c615969565b846116d1565b604080515f81526020810180835283905260ff8916918101919091526060810187905260808101869052909150819060019060a0016020604051602081039080840390855afa158015612224573d5f5f3e3d5ffd5b505050602060405103519950995050505050505050509091565b6122466148ba565b5f86815260696020526040902084158015906122625750600485105b1561228057604051632342609160e11b815260040160405180910390fd5b82516001600160a01b03165f90815260018201602052604081205460ff16908160028111156122b1576122b16152ec565b036122dc5750506040805160608101825260028152602081018590525f918101919091529050610b7f565b5f60018260028111156122f1576122f16152ec565b146123255760a0612302888a6158e0565b6001600160e01b031916901c855f015160601b6001600160601b03191617612341565b84516001600160601b031960609190911b166001600160601b03175b5f8181526002850160205260408120549192508190036123c957604080516060810190915280600185600281111561237b5761237b6152ec565b1461238757600361238a565b60025b601681111561239b5761239b6152ec565b8152602081018990526040016123b18a8c6158e0565b6001600160e01b03191690529450610b7f9350505050565b6123d6818a8a8a8a6126e4565b9a9950505050505050505050565b6123ec6148ba565b81516020830151604080850151905163c7a7b63560e01b81526001600160a01b038a169363c7a7b6359361242b93919290918a918a9190600401615583565b5f60405180830381865afa92505050801561246757506040513d5f823e601f3d908101601f1916820160405261246491908101906159ad565b60015b612484576040516315e649e960e01b815260040160405180910390fd5b5f5b8151811015612553575f8282815181106124a2576124a26157b3565b602002602001015190505f816060015190505f8260800151826124c59190615a8c565b90506125208a6124d783858c8e615969565b8960200151604051806060016040528089602001516001600160a01b0316815260200189604001518152602001895f01516001811115612519576125196152ec565b905261223e565b95505f86516016811115612536576125366152ec565b14612545575050505050610b7f565b836001019350505050612486565b505095945050505050565b825f52606a602052600160405f20016001600160401b038154168260401b8460c01b1717815550505050565b5f8080848461259a6001826158be565b6125a5928290615969565b6125ae91615a9f565b60f81c925084846125c06041826158be565b6125cb928290615969565b6125d491615990565b915084846125e36021826158be565b6125ee928290615969565b6125f791615990565b90509250925092565b5f843b808203612613575f9150506126dc565b5f866001600160a01b0316631626ba7e60e01b87878760405160240161263b93929190615ad5565b60408051601f198184030181529181526020820180516001600160e01b03166001600160e01b03199094169390931790925290516126799190615aee565b5f60405180830381855afa9150503d805f81146126b1576040519150601f19603f3d011682016040523d82523d5f602084013e6126b6565b606091505b509150630b135d3f60e11b90506126cc82615b04565b6001600160e01b03191614925050505b949350505050565b6126ec6148ba565b5f5f5f6126f8896127bc565b9250925092505f61271286602001518760400151856127ea565b90505f816016811115612727576127276152ec565b14612765576040518060600160405280826016811115612749576127496152ec565b81526020018881526020015f5f1b815250945050505050610b7f565b831561277d576040805160608101909152805f612749565b5f5f61279061278b8561289e565b6128f9565b915091506127ac8b8b846127a58f8f87612930565b8d8d61297f565b9c9b505050505050505050505050565b600160a81b811615155f8060ff60a085901c1660038111156127e0576127e06152ec565b9294929392915050565b5f5f8411801561280c57506001826003811115612809576128096152ec565b14155b801561282a57506003826003811115612827576128276152ec565b14155b15612837575060046117e8565b600183600181111561284b5761284b6152ec565b14801561286a57506002826003811115612867576128676152ec565b14155b801561288857506003826003811115612885576128856152ec565b14155b15612895575060016117e8565b505f9392505050565b60605f19823b01806001600160401b038111156128bd576128bd614d66565b6040519080825280601f01601f1916602001820160405280156128e7576020820181803683370190505b50915080600160208401853c50919050565b6129016148da565b612909614901565b602083015160f01c61291c846002612ca6565b92506129288482612f5f565b915050915091565b612938614927565b60058251600581111561294d5761294d6152ec565b1461295a5761295a615936565b612971848484606001518560200151518686613115565b602081019290925250919050565b6129876148ba565b84516080850151156129b8575050604080516060810182526014815260208101849052845191810191909152611e28565b601081601f8111156129cc576129cc6152ec565b1015612b0b575f81601f8111156129e5576129e56152ec565b03612a11576040805160608101909152805f5b81526020018581526020015f5f1b815250915050611e28565b600581601f811115612a2557612a256152ec565b03612a4057612a388888888888886132c0565b915050611e28565b600181601f811115612a5457612a546152ec565b03612a6757612a388888888888886133a0565b600281601f811115612a7b57612a7b6152ec565b03612a8e57612a38888888888888613443565b600681601f811115612aa257612aa26152ec565b03612ab557612a38888888888888613501565b600781601f811115612ac957612ac96152ec565b03612adc57612a388888888888886135b3565b600881601f811115612af057612af06152ec565b14612afd57612afd615936565b612a38888888888888613635565b601281601f811115612b1f57612b1f6152ec565b11612b4c576040518060600160405280612b3b8a8a8a8a61370b565b60168111156129f8576129f86152ec565b601481601f811115612b6057612b606152ec565b11612b7c576040518060600160405280612b3b8a8a8a8a613823565b601581601f811115612b9057612b906152ec565b03612bb0576040518060600160405280612b3b8a8a8a602001518a6138a1565b601681601f811115612bc457612bc46152ec565b03612bd757612a388888888888886139d7565b601781601f811115612beb57612beb6152ec565b03612c0b576040518060600160405280612b3b8a8a8a602001518a613ae1565b601c81601f811115612c1f57612c1f6152ec565b03612c3a578451612a38908901356020880151601187613b91565b601d81601f811115612c4e57612c4e6152ec565b03612c6857612a3883602001518760200151601387613b91565b601e81601f811115612c7c57612c7c6152ec565b14612c8957612c89615936565b612a3860018760200151601287613b91565b509695505050505050565b612cae6148da565b60209183019182015160229092019160f01c5f816001600160401b03811115612cd957612cd9614d66565b604051908082528060200260200182016040528015612d1257816020015b612cff6148da565b815260200190600190039081612cf75790505b50905060015f5b83811015612f39575f865160d81c90505f848381518110612d3c57612d3c6157b3565b60200260200101519050602382901c601f16601f811115612d5f57612d5f6152ec565b8190601f811115612d7257612d726152ec565b9081601f811115612d8557612d856152ec565b90525060ff601083901c81166040830152601883901c1661ffff83168015612e0e5760208b8201015160f01c5f816001600160401b03811115612dca57612dca614d66565b6040519080825280601f01601f191660200182016040528015612df4576020820181803683370190505b509050828d01602201816020018382825e50506020850152505b8115612ec257816001600160401b03811115612e2c57612e2c614d66565b604051908082528060200260200182016040528015612e6557816020015b612e526148da565b815260200190600190039081612e4a5790505b5060608401525f5b82811015612ebc57878781518110612e8757612e876157b3565b602002602001015184606001518281518110612ea557612ea56157b3565b602090810291909101015260019687019601612e6d565b50612f26565b600f8351601f811115612ed757612ed76152ec565b03612f265760108352606554604051612ef39190602001614b8b565b60408051601f198184030181528282528051602091820120908301520160408051601f1981840301815291905260208401525b5050506005969096019550600101612d19565b50815f81518110612f4c57612f4c6157b3565b6020026020010151935050505092915050565b612f67614901565b60209183019182015160229092019160f01c5f816001600160401b03811115612f9257612f92614d66565b604051908082528060200260200182016040528015612fcb57816020015b612fb8614901565b815260200190600190039081612fb05790505b50905060015f5b83811015612f39575f865160e81c90505f848381518110612ff557612ff56157b3565b60200260200101519050601582901c6007166005811115613018576130186152ec565b8190600581111561302b5761302b6152ec565b9081600581111561303e5761303e6152ec565b905250611fff8216606082015260ff600d83901c16801561310357806001600160401b0381111561307157613071614d66565b6040519080825280602002602001820160405280156130aa57816020015b613097614901565b81526020019060019003908161308f5790505b5060208301525f5b81811015613101578686815181106130cc576130cc6157b3565b6020026020010151836020015182815181106130ea576130ea6157b3565b6020908102919091010152600195860195016130b2565b505b50505060039590950194600101612fd2565b5f836001600160401b0381111561312e5761312e614d66565b60405190808252806020026020018201604052801561316757816020015b613154614927565b81526020019060019003908161314c5790505b5090505f600484516005811115613180576131806152ec565b1490505f5f5b868110156132b0575f8482815181106131a1576131a16157b3565b602002602001015190505f87602001518580156131c357508860200151518410155b6131cd57836131cf565b5f5b815181106131df576131df6157b3565b602002602001015190505f6131f382613bf5565b90505f6132038e8e8e8986613cb7565b90505f198103613222575050600160808801525061103c945050505050565b61322f8e8e838688613d5b565b83608001511561324e575050600160808801525061103c945050505050565b8161325a576020613260565b83602001515b61326a9087615a8c565b95508161327857602061327a565b5f5b60ff16846020015161328c9190615a8c565b8960200181815161329d9190615a8c565b9052505060019093019250613186915050565b5050506040820152505050505050565b6132c86148ba565b604080860151908501515181146132fa5781600a5b908160168111156132f0576132f06152ec565b8152505050611e28565b602082018490525f5b8660600151518110156133945761336a89898960600151848151811061332b5761332b6157b3565b6020026020010151858510613340578961335f565b89604001518581518110613356576133566157b3565b60200260200101515b87602001518961297f565b92505f83516016811115613380576133806152ec565b1461338c575050611e28565b600101613303565b50509695505050505050565b6133a86148ba565b602081018390525f5b856060015151811015612c9b5761341a8888886060015184815181106133d9576133d96157b3565b602002602001015188606001516133f0578861340f565b88604001518581518110613406576134066157b3565b60200260200101515b86602001518861297f565b91505f82516016811115613430576134306152ec565b1461343b5750611e28565b6001016133b1565b61344b6148ba565b5f5b8560600151518110156134db576134b2888888606001518481518110613475576134756157b3565b6020026020010151886060015161348c57886134ab565b886040015185815181106134a2576134a26157b3565b60200260200101515b888861297f565b91505f825160168111156134c8576134c86152ec565b036134d35750611e28565b60010161344d565b5050604080516060810182526005815260208101939093525f9083015250949350505050565b6135096148ba565b6040840151515f5b8181101561358b57613561898989606001515f81518110613534576135346157b3565b602002602001015189604001518581518110613552576135526157b3565b6020026020010151898961297f565b92505f83516016811115613577576135776152ec565b03613583575050611e28565b600101613511565b505060408051606081018252600c815260208101949094525f90840152509095945050505050565b6135bb6148ba565b602081018390525f5b846040015151811015612c9b5761360a888888606001515f815181106135ec576135ec6157b3565b602002602001015188604001518581518110613406576134066157b3565b91505f82516016811115613620576136206152ec565b1461362d5781600b6132dd565b6001016135c4565b61363d6148ba565b6060850151516040850151518181101561365c575050600a8152611e28565b602083018590525f61366e83836158be565b90505f5b838110156136fd576136d18b8b8b606001518481518110613695576136956157b3565b60200260200101518b6040015185876136ae9190615a8c565b815181106136be576136be6157b3565b602002602001015189602001518b61297f565b94505f855160168111156136e7576136e76152ec565b146136f55750505050611e28565b600101613672565b505050509695505050505050565b815160208301515f9190829061372090615b42565b90505f601083601f811115613737576137376152ec565b14613746578451880135613780565b84516020860151899190899061375c9083615a8c565b9261376993929190615969565b6040516137779291906158d1565b60405180910390205b9050601083601f811115613796576137966152ec565b1480156137a35750818114155b156137b457600793505050506126dc565b601183601f8111156137c8576137c86152ec565b1480156137d55750818111155b156137e657600893505050506126dc565b601283601f8111156137fa576137fa6152ec565b1480156138075750818110155b1561381857600993505050506126dc565b5f93505050506126dc565b815160208301515f9190829061383890615b42565b8451909150870135601383601f811115613854576138546152ec565b1480156138615750818113155b1561387257600893505050506126dc565b601483601f811115613886576138866152ec565b148015613807575081811261381857600993505050506126dc565b5f806138ac84615b65565b60f01c61ffff1690505f60028086516138c591906158be565b6138cf9190615bb3565b602080860151919250145f816138e65760206138e8565b5f5b86516138f79160ff1690615a8c565b90505f8261391557602087015187516139109190615a8c565b613917565b885b905061392382826158be565b61392d8587615a8c565b111561394157600e955050505050506126dc565b365f61394f8b85818f615969565b915091505f5b868110156139c5575f61397061396b838a6158be565b613f12565b6022838e018101518a85018f0190910151919250908a84018601358083168416848316146139ad57600f9c505050505050505050505050506126dc565b505050506020816139be9190615a8c565b9050613955565b505f9c9b505050505050505050505050565b6139df6148ba565b5f85602001516139ee90615b42565b60601c90505f8660200151613a0290615b42565b5f1c60a01b90505f5f836001600160a01b031663b0acb980875f015188602001518e8e8b604001518e5f01518f602001518b6040518963ffffffff1660e01b8152600401613a57989796959493929190615bc6565b6040805180830381865afa158015613a71573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190613a959190615c25565b91509150604051806060016040528083613ab0576010613ab2565b5f5b6016811115613ac357613ac36152ec565b81526020810198909852604090970152509398975050505050505050565b5f5f613aec84613f46565b90505f5f613afc8888858861400b565b90925090505f82613b0f61271084615c51565b613b199190615bb3565b90505f846080015163ffffffff16118015613b3d5750836080015163ffffffff1681105b15613b4f5760159450505050506126dc565b5f8460a0015163ffffffff16118015613b7157508360a0015163ffffffff1681115b15613b835760169450505050506126dc565b505f98975050505050505050565b613b996148ba565b5f5f613ba684888861428a565b91509150604051806060016040528083613bc05786613bc2565b5f5b6016811115613bd357613bd36152ec565b815260200182815260200187613be890615b42565b9052979650505050505050565b80515f906001816005811115613c0d57613c0d6152ec565b03613c1b5750600192915050565b6002816005811115613c2f57613c2f6152ec565b1480613c4d57506004816005811115613c4a57613c4a6152ec565b10155b15613c5a57505f92915050565b6020830151515f5b81811015613ca657613c9085602001518281518110613c8357613c836157b3565b6020026020010151613bf5565b613c9e57505f949350505050565b600101613c62565b506001949350505050565b50919050565b5f84613cc38486615a8c565b613cce906020615a8c565b1115613cdc57505f19610b7f565b8115613cf357613cec8385615a8c565b9050610b7f565b5f613d0d8787613d038789615a8c565b9190910135919050565b9050838111613d20575f19915050610b7f565b85613d2b8287615a8c565b613d36906020615a8c565b1115613d46575f19915050610b7f565b613d508186615a8c565b979650505050505050565b83613d67846020615a8c565b1115613d795760016080820152613f0b565b604082015160a082015281516001816005811115613d9957613d996152ec565b03613da957602082810152613ee7565b6002816005811115613dbd57613dbd6152ec565b03613dfb5760208301515115613dda57613dda868686868661430d565b613de684870135614410565b613df1906020615a8c565b6020830152613ee7565b6003816005811115613e0f57613e0f6152ec565b03613e2c57613e278686868660200151518787613115565b613ee7565b6004816005811115613e4057613e406152ec565b03613e7b57613e608686613e55876020615a8c565b878a01358787613115565b602082602001818151613e739190615a8c565b905250613ee7565b6005816005811115613e8f57613e8f6152ec565b14613e9c57613e9c615936565b613eca86868560600151876020613eb39190615a8c565b613ebd9190615a8c565b8660200151518787613115565b613ed684870135614410565b613ee1906020615a8c565b60208301525b60208201518590613ef89086615a8c565b1115613f0657600160808301525b508281525b5050505050565b5f5f60208311613f2c57613f278360206158be565b613f2e565b5f5b9050613f3b816008615c51565b5f19901b9392505050565b60408051610100810182525f80825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e0810182905290613f8f83615b42565b60f881901c835260ff60f082901c811660208086019190915260e883901c8216604086015260e083901c909116606085015260c082811c63ffffffff908116608087015260a084811c909116908601526001600160a01b0383169085015284519192501015613cb157604083015160601c60e083015250919050565b5f5f5f846060015160ff16856020015160ff161161402d578460600151614033565b84602001515b60ff16905060128111614047576012614049565b805b90505f856020015160ff168261405f91906158be565b61406a90600a615d43565b6140a0898988604001518a5f015160ff168151811061408b5761408b6157b3565b60200260200101515f01519190910135919050565b6140aa9190615c51565b90505f866060015160ff16836140c091906158be565b6140cb90600a615d43565b6140ed8a8a89604001518b6040015160ff168151811061408b5761408b6157b3565b6140f79190615c51565b90505f6141056012856158be565b61411090600a615d43565b60c08901519091505f906001600160a01b03166141375761413285600a615d43565b6141a6565b818960c001516001600160a01b03166398d5fdca6040518163ffffffff1660e01b8152600401602060405180830381865afa158015614178573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061419c9190615d4e565b6141a69190615c51565b60e08a01519091505f906001600160a01b03166141cd576141c886600a615d43565b61423c565b828a60e001516001600160a01b03166398d5fdca6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561420e573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906142329190615d4e565b61423c9190615c51565b90505f61424a87600a615d43565b9050806142578488615c51565b6142619190615bb3565b98508061426e8387615c51565b6142789190615bb3565b97505050505050505094509492505050565b5f606081806142a18761429c87615b42565b614426565b915091506142af8686614570565b826040018181516142c09190615d65565b6001600160801b039081169091526020840151604085015190821691161190506142fc5760016142f188838561467e565b935093505050614305565b5f879350935050505b935093915050565b6020820151516001606083018190526080830152806001600160401b0381111561433957614339614d66565b60405190808252806020026020018201604052801561437257816020015b61435f614927565b8152602001906001900390816143575790505b5060408301525f5b81811015614407576143c98787878760200151858151811061439e5761439e6157b3565b6020026020010151876040015186815181106143bc576143bc6157b3565b6020026020010151613d5b565b826080015180156143f85750826040015181815181106143eb576143eb6157b3565b6020026020010151608001515b1515608084015260010161437a565b50505050505050565b5f601f1961441f83601f615a8c565b1692915050565b604080516080810182525f80825260208201819052918101829052606081019190915282515f905b808210156144855783858381518110614469576144696157b3565b60200260200101515f015103156144855781600101915061444e565b808210156145275760405180608001604052808581526020018684815181106144b0576144b06157b3565b6020026020010151602001516001600160801b031681526020018684815181106144dc576144dc6157b3565b6020026020010151604001516001600160801b03168152602001868481518110614508576145086157b3565b6020026020010151606001516001600160401b03168152509250614568565b5f5f61453386426146f1565b604080516080810182528981526001600160801b0390931660208401525f908301526001600160401b03166060820152945050505b509250929050565b5f602082511115614677575f604083015160601c90505f8360348151811061459a5761459a6157b3565b602001015160f81c60f81b60f81c90505f846035815181106145be576145be6157b3565b602001015160f81c60f81b60f81c90505f836001600160a01b03166398d5fdca6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561460b573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061462f9190615d4e565b905061463c826012615d84565b61464790600a615d9d565b61465284600a615d9d565b61465c838a615c51565b6146669190615c51565b6146709190615bb3565b9650505050505b5090919050565b82516060905f848214614691575f614694565b60015b6146a19060ff1683615a8c565b905060405192506020600182010283016040528083526020830160208701602084028082845e505050838386815181106146dd576146dd6157b3565b602002602001018190525050509392505050565b5f5f61478c614786856040805160a0810182525f80825260208201819052918101829052606081018290526080810191909152505f908152606a60209081526040918290208054600190910154835160a0810185526001600160801b038084168252608093841c948201949094526001600160401b038216818601529381901c909216606084015260c09190911c9082015290565b84614798565b915091505b9250929050565b5f5f83604001516001600160401b03165f14806147d95750836040015184608001516147c49190615dab565b6001600160401b0316836001600160401b0316105b156147ef57505060608201516080830151614791565b5f84604001518560800151856148059190615dca565b61480f9190615de9565b905084602001516001600160801b031685606001516001600160801b0316101561488a578451614849906001600160401b03831690615e16565b85606001516148589190615d65565b925084602001516001600160801b0316836001600160801b031610614881578460200151614883565b825b9250614892565b846060015192505b60408501516148a19082615e38565b85608001516148b09190615dab565b9150509250929050565b6040805160608101909152805f8152602001606081526020015f81525090565b6040805160808101909152805f8152602001606081526020015f8152602001606081525090565b6040805160808101909152805f8152602001606081526020015f81526020015f81525090565b6040518060c001604052805f81526020015f8152602001606081526020015f151581526020015f151581526020015f81525090565b80356001600160801b0381168114614972575f5ffd5b919050565b80356001600160401b0381168114614972575f5ffd5b5f5f5f5f608085870312156149a0575f5ffd5b843593506149b06020860161495c565b92506149be6040860161495c565b91506149cc60608601614977565b905092959194509250565b6001600160a01b0381168114611a7a575f5ffd5b5f5f604083850312156149fc575f5ffd5b823591506020830135614a0e816149d7565b809150509250929050565b5f60208284031215614a29575f5ffd5b81356117e8816149d7565b5f5f83601f840112614a44575f5ffd5b5081356001600160401b03811115614a5a575f5ffd5b6020830191508360208260051b8501011115614791575f5ffd5b803560048110614972575f5ffd5b5f5f5f5f5f60808688031215614a96575f5ffd5b853594506020860135614aa8816149d7565b935060408601356001600160401b03811115614ac2575f5ffd5b614ace88828901614a34565b9094509250614ae1905060608701614a74565b90509295509295909350565b5f5f60408385031215614afe575f5ffd5b8235614b09816149d7565b946020939093013593505050565b80356001600160e01b031981168114614972575f5ffd5b5f5f5f60608486031215614b40575f5ffd5b8335614b4b816149d7565b9250614b5960208501614b17565b91506040840135614b69816149d7565b809150509250925092565b5f60208284031215614b84575f5ffd5b5035919050565b6001600160a01b0391909116815260200190565b5f5f83601f840112614baf575f5ffd5b5081356001600160401b03811115614bc5575f5ffd5b602083019150836020828501011115614791575f5ffd5b60028110611a7a575f5ffd5b8015158114611a7a575f5ffd5b5f5f5f5f5f5f5f60c0888a031215614c0b575f5ffd5b8735614c16816149d7565b96506020880135955060408801356001600160401b03811115614c37575f5ffd5b614c438a828b01614b9f565b9096509450506060880135614c5781614bdc565b92506080880135915060a0880135614c6e81614be8565b8091505092959891949750929550565b5f81518084528060208401602086015e5f602082860101526020601f19601f83011685010191505092915050565b8215158152604060208201525f6126dc6040830184614c7e565b5f5f5f5f5f60808688031215614cda575f5ffd5b8535614ce5816149d7565b94506020860135935060408601356001600160401b03811115614d06575f5ffd5b614d1288828901614b9f565b9094509250506060860135614d2681614bdc565b809150509295509295909350565b5f5f5f60608486031215614d46575f5ffd5b833592506020840135614d58816149d7565b91506125f760408501614b17565b634e487b7160e01b5f52604160045260245ffd5b604051608081016001600160401b0381118282101715614d9c57614d9c614d66565b60405290565b60405160a081016001600160401b0381118282101715614d9c57614d9c614d66565b604051601f8201601f191681016001600160401b0381118282101715614dec57614dec614d66565b604052919050565b5f6001600160401b03821115614e0c57614e0c614d66565b5060051b60200190565b803560ff81168114614972575f5ffd5b803560068110614972575f5ffd5b803560208110614972575f5ffd5b5f6001600160401b03821115614e5a57614e5a614d66565b50601f01601f191660200190565b5f82601f830112614e77575f5ffd5b8135614e8a614e8582614e42565b614dc4565b818152846020838601011115614e9e575f5ffd5b816020850160208301375f918101602001919091529392505050565b5f5f5f5f5f60a08688031215614ece575f5ffd5b853594506020860135614ee0816149d7565b9350614eee60408701614b17565b925060608601356001600160401b03811115614f08575f5ffd5b8601601f81018813614f18575f5ffd5b8035614f26614e8582614df4565b8082825260208201915060208360051b85010192508a831115614f47575f5ffd5b602084015b83811015614ff25780356001600160401b03811115614f69575f5ffd5b85016080818e03601f19011215614f7e575f5ffd5b614f86614d7a565b614f9260208301614e16565b8152614fa060408301614e26565b6020820152614fb160608301614e34565b604082015260808201356001600160401b03811115614fce575f5ffd5b614fdd8f602083860101614e68565b60608301525084525060209283019201614f4c565b509450614ae19250505060808701614a74565b5f5f5f5f5f60608688031215615019575f5ffd5b8535615024816149d7565b945060208601356001600160401b0381111561503e575f5ffd5b61504a88828901614a34565b90955093505060408601356001600160401b03811115615068575f5ffd5b61507488828901614a34565b969995985093965092949392505050565b5f60208284031215615095575f5ffd5b81356001600160401b038111156150aa575f5ffd5b6126dc84828501614e68565b5f5f5f5f5f5f60c087890312156150cb575f5ffd5b863595506150db6020880161495c565b94506150e96040880161495c565b93506150f76060880161495c565b925061510560808801614977565b915061511360a08801614977565b90509295509295509295565b5f5f5f5f60808587031215615132575f5ffd5b843593506020850135615144816149d7565b925061515260408601614b17565b91506149cc60608601614a74565b604080825283519082018190525f9060208501906060840190835b818110156151a25783516001600160a01b031683526020938401939092019160010161517b565b50506001600160a01b039490941660209390930192909252509092915050565b5f5f5f604084860312156151d4575f5ffd5b83356001600160401b038111156151e9575f5ffd5b6151f586828701614b9f565b909790965060209590950135949350505050565b5f5f6040838503121561521a575f5ffd5b8235615225816149d7565b91506020830135614a0e816149d7565b5f5f5f5f5f60a08688031215615249575f5ffd5b8535615254816149d7565b94506020860135935061526960408701614977565b925061527760608701614977565b9150614ae16080870161495c565b602081525f6117e86020830184614c7e565b9586526001600160801b0394851660208701529284166040860152921660608401526001600160401b0391821660808401521660a082015260c00190565b9182526001600160a01b0316602082015260400190565b634e487b7160e01b5f52602160045260245ffd5b60068110615310576153106152ec565b9052565b60208110615310576153106152ec565b5f5f8335601e19843603018112615339575f5ffd5b83016020810192503590506001600160401b03811115615357575f5ffd5b803603821315614791575f5ffd5b81835281816020850137505f828201602090810191909152601f909101601f19169091010190565b5f8235607e198336030181126153a1575f5ffd5b90910192915050565b602080825281018290525f6040600584901b8301810190830185835b8681101561545e57858403603f190183526153e1828961538d565b60ff6153ec82614e16565b1685526153fb60208201614e26565b6154086020870182615300565b5061541560408201614e34565b6154226040870182615314565b506154306060820182615324565b915060806060870152615447608087018383615365565b9550505060209283019291909101906001016153c6565b50919695505050505050565b5f6020828403121561547a575f5ffd5b81516117e8816149d7565b60048110615310576153106152ec565b8581526001600160a01b038516602082015260806040820181905281018390525f60a0600585901b8301810190830186835b8781101561555f57858403609f190183526154e2828a61538d565b60ff6154ed82614e16565b1685526154fc60208201614e26565b6155096020870182615300565b5061551660408201614e34565b6155236040870182615314565b506155316060820182615324565b915060806060870152615548608087018383615365565b9550505060209283019291909101906001016154c7565b50505080915050611e286060830184615485565b60028110615310576153106152ec565b60018060a01b0386168152846020820152608060408201525f6155aa608083018587615365565b9050611e286060830184615573565b5f5f604083850312156155ca575f5ffd5b82516155d581614be8565b60208401519092506001600160401b038111156155f0575f5ffd5b8301601f81018513615600575f5ffd5b805161560e614e8582614e42565b818152866020838501011115615622575f5ffd5b8160208401602083015e5f602083830101528093505050509250929050565b5f602082016020835280845180835260408501915060408160051b8601019250602086015f5b828110156156d857603f19878603018452815160ff815116865260208101516156936020880182615300565b5060408101516156a66040880182615314565b5060608101519050608060608701526156c26080870182614c7e565b9550506020938401939190910190600101615667565b50929695505050505050565b5f60a0820187835260018060a01b038716602084015263ffffffff60e01b8616604084015260a0606084015280855180835260c08501915060c08160051b8601019250602087015f5b8281101561579e5760bf19878603018452815160ff815116865260208101516157596020880182615300565b50604081015161576c6040880182615314565b5060608101519050608060608701526157886080870182614c7e565b955050602093840193919091019060010161572d565b5050505080915050611e286080830184615485565b634e487b7160e01b5f52603260045260245ffd5b5f602082840312156157d7575f5ffd5b81356117e881614be8565b5f5f5f606084860312156157f4575f5ffd5b83516157ff816149d7565b6020850151909350615810816149d7565b6040850151909250614b69816149d7565b6001600160a01b03831681526040602082018190525f906126dc90830184614c7e565b8481526001600160a01b03841660208201526001600160e01b03198316604082015260808101610b7f6060830184615485565b5f60208284031215615887575f5ffd5b81516117e881614be8565b634e487b7160e01b5f52601160045260245ffd5b5f600182016158b7576158b7615892565b5060010190565b81810381811115610b3c57610b3c615892565b818382375f9101908152919050565b80356001600160e01b03198116906004841015615911576001600160e01b0319600485900360031b81901b82161691505b5092915050565b604081016017841061592c5761592c6152ec565b9281526020015290565b634e487b7160e01b5f52600160045260245ffd5b6001600160801b038281168282160390811115610b3c57610b3c615892565b5f5f85851115615977575f5ffd5b83861115615983575f5ffd5b5050820193919092039150565b80356020831015610b3c575f19602084900360031b1b1692915050565b5f602082840312156159bd575f5ffd5b81516001600160401b038111156159d2575f5ffd5b8201601f810184136159e2575f5ffd5b80516159f0614e8582614df4565b80828252602082019150602060a08402850101925086831115615a11575f5ffd5b6020840193505b82841015611e285760a08488031215615a2f575f5ffd5b615a37614da2565b8451615a4281614bdc565b81526020850151615a52816149d7565b60208281019190915260408681015190830152606080870151908301526080808701519083015290835260a0909401939190910190615a18565b80820180821115610b3c57610b3c615892565b80356001600160f81b03198116906001841015615911576001600160f81b031960019490940360031b84901b1690921692915050565b838152604060208201525f610b7f604083018486615365565b5f82518060208501845e5f920191825250919050565b805160208201516001600160e01b0319811691906004821015615b3b576001600160e01b0319600483900360031b81901b82161692505b5050919050565b80516020808301519190811015613cb1575f1960209190910360031b1b16919050565b805160208201516001600160f01b0319811691906002821015615b3b576001600160f01b031960029290920360031b82901b161692915050565b634e487b7160e01b5f52601260045260245ffd5b5f82615bc157615bc1615b9f565b500490565b60018060a01b038916815287602082015260e060408201525f615bed60e08301888a615365565b9050615bfc6060830187615573565b608082019490945260a08101929092526001600160a01b03191660c09091015295945050505050565b5f5f60408385031215615c36575f5ffd5b8251615c4181614be8565b6020939093015192949293505050565b8082028115828204841417610b3c57610b3c615892565b6001815b600184111561430557808504811115615c8757615c87615892565b6001841615615c9557908102905b60019390931c928002615c6c565b5f82615cb157506001610b3c565b81615cbd57505f610b3c565b8160018114615cd35760028114615cdd57615cf9565b6001915050610b3c565b60ff841115615cee57615cee615892565b50506001821b610b3c565b5060208310610133831016604e8410600b8410161715615d1c575081810a610b3c565b615d285f198484615c68565b805f1904821115615d3b57615d3b615892565b029392505050565b5f6117e88383615ca3565b5f60208284031215615d5e575f5ffd5b5051919050565b6001600160801b038181168382160190811115610b3c57610b3c615892565b60ff8181168382160190811115610b3c57610b3c615892565b5f6117e860ff841683615ca3565b6001600160401b038181168382160190811115610b3c57610b3c615892565b6001600160401b038281168282160390811115610b3c57610b3c615892565b5f6001600160401b03831680615e0157615e01615b9f565b806001600160401b0384160491505092915050565b6001600160801b03818116838216029081169081811461591157615911615892565b6001600160401b0381811683821602908116908181146159115761591161589256fe82eaf0fca2207f91f5027fcf68136c84edb7e928c081c42aa5bbc2a771c7d376a26469706673582212200af2de0deb526d5edf15aa4033622b0c6a0f146886033403ed59f93cbfe9ad5964736f6c634300081e003382eaf0fca2207f91f5027fcf68136c84edb7e928c081c42aa5bbc2a771c7d376"

function createEIP1193(
  chainId: number | undefined,
  provider: EthereumProvider,
  signer: HardhatEthersSigner
): EIP1193Provider {
  return {
    request: async ({ method, params }) => {
      if (method == "eth_sendTransaction") {
        const { hash } = await signer.sendTransaction((params as any[])[0])
        return hash
      }

      return provider.request({ method, params })
    },
  }
}
