import assert from "assert"
import hre from "hardhat"
import { HardhatEthersSigner } from "@nomicfoundation/hardhat-ethers/signers"
import { Interface } from "ethers"

import { deployMastercopy, EIP1193Provider } from "@gnosis-guild/zodiac-core"
import { EthereumProvider } from "hardhat/types"

export const address = "0xD7304EF9c0C6a63E3EDbBEd57B6428FDc990c2e4"

export async function deployRolesMastercopy(signer: HardhatEthersSigner) {
  const provider = createEIP1193(
    hre.network.config.chainId,
    hre.network.provider,
    signer
  )

  {
    const { address, noop } = await deployMastercopy({
      factory: "0xce0042b868300000d44a59004da54a005ffdcf9f",
      bytecode: conditionsTransformBytecode,
      constructorArgs: {
        types: [],
        values: [],
      },
      salt: "0x0000000000000000000000000000000000000000000000000000000000000000",
      provider,
    })
    console.log(address)
  }

  {
    const { address: rolesAddress, noop } = await deployMastercopy({
      factory: "0xce0042b868300000d44a59004da54a005ffdcf9f",
      bytecode: rolesBytecode,
      constructorArgs: {
        types: ["address", "address", "address"],
        values: [
          "0x0000000000000000000000000000000000000001",
          "0x0000000000000000000000000000000000000001",
          "0x0000000000000000000000000000000000000001",
        ],
      },
      salt: "0x0000000000000000000000000000000000000000000000000000000000000000",
      provider,
    })
    assert(address == rolesAddress)
  }
}

export const rolesModMastercopy = {
  address: "0xD7304EF9c0C6a63E3EDbBEd57B6428FDc990c2e4",
  iface: Interface.from([
    "function allowFunction(bytes32 roleKey, address targetAddress, bytes4 selector, uint8 options)",
    "function allowTarget(bytes32 roleKey, address targetAddress, uint8 options)",
    "function allowances(bytes32) view returns (uint128 refill, uint128 maxRefill, uint64 period, uint128 balance, uint64 timestamp)",
    "function assignRoles(address module, bytes32[] roleKeys, bool[] memberOf)",
    "function avatar() view returns (address)",
    "function consumed(address, bytes32) view returns (bool)",
    "function defaultRoles(address) view returns (bytes32)",
    "function disableModule(address prevModule, address module)",
    "function enableModule(address module)",
    "function execTransactionFromModule(address to, uint256 value, bytes data, uint8 operation) returns (bool success)",
    "function execTransactionFromModuleReturnData(address to, uint256 value, bytes data, uint8 operation) returns (bool success, bytes returnData)",
    "function execTransactionWithRole(address to, uint256 value, bytes data, uint8 operation, bytes32 roleKey, bool shouldRevert) returns (bool success)",
    "function execTransactionWithRoleReturnData(address to, uint256 value, bytes data, uint8 operation, bytes32 roleKey, bool shouldRevert) returns (bool success, bytes returnData)",
    "function getModulesPaginated(address start, uint256 pageSize) view returns (address[] array, address next)",
    "function invalidate(bytes32 hash)",
    "function isModuleEnabled(address _module) view returns (bool)",
    "function moduleTxHash(bytes data, bytes32 salt) view returns (bytes32)",
    "function owner() view returns (address)",
    "function renounceOwnership()",
    "function revokeFunction(bytes32 roleKey, address targetAddress, bytes4 selector)",
    "function revokeTarget(bytes32 roleKey, address targetAddress)",
    "function scopeFunction(bytes32 roleKey, address targetAddress, bytes4 selector, (uint8 parent, uint8 paramType, uint8 operator, bytes compValue)[] conditions, uint8 options)",
    "function scopeTarget(bytes32 roleKey, address targetAddress)",
    "function setAllowance(bytes32 key, uint128 balance, uint128 maxRefill, uint128 refill, uint64 period, uint64 timestamp)",
    "function setAvatar(address _avatar)",
    "function setDefaultRole(address module, bytes32 roleKey)",
    "function setTarget(address _target)",
    "function setTransactionUnwrapper(address to, bytes4 selector, address adapter)",
    "function setUp(bytes initParams)",
    "function transferOwnership(address newOwner)",
    "function unwrappers(bytes32) view returns (address)",
  ]),
}

const conditionsTransformBytecode =
  "0x613142610034600b8282823980515f1a607314602857634e487b7160e01b5f525f60045260245ffd5b305f52607381538281f3fe7300000000000000000000000000000000000000003014608060405260043610610034575f3560e01c806317024b0514610038575b5f5ffd5b818015610043575f5ffd5b50610057610052366004612d8f565b610073565b6040516001600160a01b03909116815260200160405180910390f35b5f61007d826100ca565b6100868261013a565b61008e612c85565b610098835f6101f4565b156100aa576100a7835f6102c8565b90505b5f6100b584836104b8565b90505f6100c182610562565b95945050505050565b6100d38161067b565b6100dc81610713565b5f5b81518110156101125761010a8282815181106100fc576100fc612ecf565b6020026020010151826107d3565b6001016100de565b5061011c81610fe9565b610125816111e6565b61012e816115c8565b61013781611663565b50565b80515f5b818110156101ef57601083828151811061015a5761015a612ecf565b602002602001015160400151601f81111561017757610177612ee3565b14801561018b57506101898382611756565b155b156101e7575f8382815181106101a3576101a3612ecf565b60200260200101516060015190505f81519050602082019150602081038252818584815181106101d5576101d5612ecf565b60200260200101516060018190525050505b60010161013e565b505050565b5f8083838151811061020857610208612ecf565b602002602001015160200151600581111561022557610225612ee3565b14610232575060016102c2565b5f61023e836001612f0b565b90505b83518110156102bd578284828151811061025d5761025d612ecf565b60200260200101515f015160ff160361028e5761027a84826101f4565b156102895760019150506102c2565b6102b5565b828482815181106102a1576102a1612ecf565b60200260200101515f015160ff16116102bd575b600101610241565b505f90505b92915050565b6102d0612c85565b5f6102db8484611892565b90505f6102e88585611905565b90505f5f6102f687876119de565b9250509150838015610306575082155b156103205761031587836102c8565b9450505050506102c2565b83801561032a5750825b6103515786868151811061034057610340612ecf565b602002602001015160200151610354565b60025b8590600581111561036757610367612ee3565b9081600581111561037a5761037a612ee3565b90525060048551600581111561039257610392612ee3565b14801561039d575082155b6103a757806103aa565b60015b6001600160401b038111156103c1576103c1612ca5565b6040519080825280602002602001820160405280156103fa57816020015b6103e7612c85565b8152602001906001900390816103df5790505b5060208601525f5b85602001515181101561044b576104228861041d8386612f0b565b6102c8565b8660200151828151811061043857610438612ecf565b6020908102919091010152600101610402565b5060058551600581111561046157610461612ee3565b036104ae575f87878151811061047957610479612ecf565b602002602001015160600151905080515f146104a05761049881612f1e565b60f01c6104a3565b60045b61ffff166040870152505b5050505092915050565b60605f6104c483611a7d565b6104cd85611a9e565b6104d8906002612f0b565b6104e29190612f0b565b9050806001600160401b038111156104fc576104fc612ca5565b6040519080825280601f01601f191660200182016040528015610526576020820181803683370190505b5091506002610536858483611be0565b6105409082612f0b565b905061054d81845f611f34565b50610559848483611fb7565b50505092915050565b5f5f61056d8361214c565b90506105cf818051602091820120604080516001600160f81b03198185015273ce0042b868300000d44a59004da54a005ffdcf9f60601b60218201525f6035820152605580820193909352815180820390930183526075019052805191012090565b9150813b5f8190036106745760405163257b1f8160e11b815273ce0042b868300000d44a59004da54a005ffdcf9f90634af63f02906106149085905f90600401612f58565b6020604051808303815f875af1158015610630573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106549190612f94565b6001600160a01b0316836001600160a01b03161461067457610674612fba565b5050919050565b5f5f5b82518110156106c1578083828151811061069a5761069a612ecf565b60200260200101515f015160ff16036106b9576106b682612fce565b91505b60010161067e565b508060011415806106f15750815f815181106106df576106df612ecf565b60200260200101515f015160ff165f14155b1561070f57604051632f48858160e21b815260040160405180910390fd5b5050565b805160015b818110156101ef5782818151811061073257610732612ecf565b60200260200101515f015160ff168360018361074e9190612fe6565b8151811061075e5761075e612ecf565b60200260200101515f015160ff16111561078b57604051638484738160e01b815260040160405180910390fd5b8083828151811061079e5761079e612ecf565b60200260200101515f015160ff1611156107cb57604051638484738160e01b815260040160405180910390fd5b600101610718565b6040820151602083015160608401515f83601f8111156107f5576107f5612ee3565b0361082b576060850151511561082657604051632d6ee65d60e21b8152600481018590526024015b60405180910390fd5b610fe2565b600183601f81111561083f5761083f612ee3565b148061085c5750600283601f81111561085a5761085a612ee3565b145b156108bc575f82600581111561087457610874612ee3565b146108955760405163de10075b60e01b81526004810185905260240161081d565b6060850151511561082657604051632d6ee65d60e21b81526004810185905260240161081d565b600483601f8111156108d0576108d0612ee3565b0361092d575f5b8260058111156108e9576108e9612ee3565b1461090a5760405163de10075b60e01b81526004810185905260240161081d565b80511561082657604051632d6ee65d60e21b81526004810185905260240161081d565b600583601f81111561094157610941612ee3565b03610a5657600382600581111561095a5761095a612ee3565b1415801561097a5750600482600581111561097757610977612ee3565b14155b80156109985750600582600581111561099557610995612ee3565b14155b156109b95760405163de10075b60e01b81526004810185905260240161081d565b60058260058111156109cd576109cd612ee3565b0361090a575f6002825110156109e3575f6109f0565b6109ec82612f1e565b60f01c5b90505f82515f1480610a03575082516002145b80610a2c5750610a14826002612ff9565b61ffff168351148015610a2c575060208261ffff1611155b905080610a4f57604051632d6ee65d60e21b81526004810187905260240161081d565b5050610fe2565b600683601f811115610a6a57610a6a612ee3565b1480610a875750600783601f811115610a8557610a85612ee3565b145b15610a935760046108d7565b600883601f811115610aa757610aa7612ee3565b03610ab35760046108d7565b600d83601f811115610ac757610ac7612ee3565b03610b7b576002826005811115610ae057610ae0612ee3565b14610b015760405163de10075b60e01b81526004810185905260240161081d565b8051600314610b2657604051632d6ee65d60e21b81526004810185905260240161081d565b5f81600281518110610b3a57610b3a612ecf565b016020015160f81c9050801580610b54575060208160ff16115b15610b7557604051632d6ee65d60e21b81526004810186905260240161081d565b50610fe2565b600f83601f811115610b8f57610b8f612ee3565b03610b9b5760016108d7565b601083601f811115610baf57610baf612ee3565b03610c80576001826005811115610bc857610bc8612ee3565b14158015610be857506002826005811115610be557610be5612ee3565b14155b8015610c0657506003826005811115610c0357610c03612ee3565b14155b8015610c2457506004826005811115610c2157610c21612ee3565b14155b15610c455760405163de10075b60e01b81526004810185905260240161081d565b80511580610c5f575060208151610c5c9190613013565b15155b1561082657604051632d6ee65d60e21b81526004810185905260240161081d565b601183601f811115610c9457610c94612ee3565b1480610cb15750601283601f811115610caf57610caf612ee3565b145b80610ccd5750601383601f811115610ccb57610ccb612ee3565b145b80610ce95750601483601f811115610ce757610ce7612ee3565b145b15610d495760015b826005811115610d0357610d03612ee3565b14610d245760405163de10075b60e01b81526004810185905260240161081d565b805160201461082657604051632d6ee65d60e21b81526004810185905260240161081d565b601583601f811115610d5d57610d5d612ee3565b03610ddb576001826005811115610d7657610d76612ee3565b14158015610d9657506002826005811115610d9357610d93612ee3565b14155b15610db75760405163de10075b60e01b81526004810185905260240161081d565b600481511080610c5f57506002808251610dd19190612fe6565b610c5c9190613013565b601683601f811115610def57610def612ee3565b03610e1957805160201461082657604051632d6ee65d60e21b81526004810185905260240161081d565b601c83601f811115610e2d57610e2d612ee3565b03610f0a5760015b826005811115610e4757610e47612ee3565b14610e685760405163de10075b60e01b81526004810185905260240161081d565b8051602014158015610e7c57508051603614155b15610e9d57604051632d6ee65d60e21b81526004810185905260240161081d565b805160360361082657601281603481518110610ebb57610ebb612ecf565b016020015160f81c1180610ee95750601281603581518110610edf57610edf612ecf565b016020015160f81c115b1561082657604051631de9d6ef60e01b81526004810185905260240161081d565b601d83601f811115610f1e57610f1e612ee3565b03610f29575f610e35565b601e83601f811115610f3d57610f3d612ee3565b03610f48575f610cf1565b601783601f811115610f5c57610f5c612ee3565b03610fc6575f826005811115610f7457610f74612ee3565b14610f955760405163de10075b60e01b81526004810185905260240161081d565b602081511080610c5f575060348151111561082657604051632d6ee65d60e21b81526004810185905260240161081d565b604051630a7d7b8960e41b81526004810185905260240161081d565b5050505050565b80515f5b818110156101ef57601d83828151811061100957611009612ecf565b602002602001015160400151601f81111561102657611026612ee3565b14806110605750601e83828151811061104157611041612ecf565b602002602001015160400151601f81111561105e5761105e612ee3565b145b156110c4578083828151811061107857611078612ecf565b60200260200101515f015160ff16146110bf575f6110968483612184565b925050811590506110bd57604051631d40413960e11b81526004810183905260240161081d565b505b6111de565b60048382815181106110d8576110d8612ecf565b602002602001015160400151601f8111156110f5576110f5612ee3565b03611166578083828151811061110d5761110d612ecf565b60200260200101515f015160ff16146110bf575f5f61112c8584612184565b92505091505f82118061113e57505f81115b1561115f57604051631d40413960e11b81526004810184905260240161081d565b50506111de565b601783828151811061117a5761117a612ecf565b602002602001015160400151601f81111561119757611197612ee3565b036111de57808382815181106111af576111af612ecf565b60200260200101515f015160ff16036111de57604051631d40413960e11b81526004810182905260240161081d565b600101610fed565b5f5b815181101561070f575f82828151811061120457611204612ecf565b602002602001015190505f5f61121a85856119de565b90935091505f90508360200151600581111561123857611238612ee3565b0361134857601d8360400151601f81111561125557611255612ee3565b14806112765750601e8360400151601f81111561127457611274612ee3565b145b80611296575060178360400151601f81111561129457611294612ee3565b145b806112b6575060048360400151601f8111156112b4576112b4612ee3565b145b80156112c157508115155b156112e25760405163f3379ddd60e01b81526004810185905260240161081d565b60018360400151601f8111156112fa576112fa612ee3565b148061131b575060028360400151601f81111561131957611319612ee3565b145b1561134357815f036113435760405163f3379ddd60e01b81526004810185905260240161081d565b6115bd565b60018360200151600581111561136057611360612ee3565b036113875781156113435760405163f3379ddd60e01b81526004810185905260240161081d565b60028360200151600581111561139f5761139f612ee3565b0361140857600d8360400151601f8111156113bc576113bc612ee3565b036113e65760018211156113435760405163f3379ddd60e01b81526004810185905260240161081d565b81156113435760405163f3379ddd60e01b81526004810185905260240161081d565b60038360200151600581111561142057611420612ee3565b0361144857805f036113435760405163f3379ddd60e01b81526004810185905260240161081d565b60058360200151600581111561146057611460612ee3565b0361148857815f036113435760405163f3379ddd60e01b81526004810185905260240161081d565b6004836020015160058111156114a0576114a0612ee3565b146114ad576114ad612fba565b805f036114d05760405163f3379ddd60e01b81526004810185905260240161081d565b60068360400151601f8111156114e8576114e8612ee3565b1480611509575060078360400151601f81111561150757611507612ee3565b145b8015611516575081600114155b156115375760405163f3379ddd60e01b81526004810185905260240161081d565b60068360400151601f81111561154f5761154f612ee3565b1480611570575060078360400151601f81111561156e5761156e612ee3565b145b80611590575060088360400151601f81111561158e5761158e612ee3565b145b801561159c5750808214155b156115bd5760405163f3379ddd60e01b81526004810185905260240161081d565b5050506001016111e8565b5f5b815181101561070f575f5f6115df84846119de565b5091509150805f036115f257505061165b565b5f805b82811015611656575f6116088286612f0b565b90505f61161588836101f4565b90508380156116215750805b15611642576040516335431f5360e11b81526004810188905260240161081d565b8061164c57600193505b50506001016115f5565b505050505b6001016115ca565b5f5b815181101561070f575f82828151811061168157611681612ecf565b602002602001015190506001601f81111561169e5761169e612ee3565b8160400151601f8111156116b4576116b4612ee3565b14806116d5575060028160400151601f8111156116d3576116d3612ee3565b145b806116f557506004816020015160058111156116f3576116f3612ee3565b145b156117395761170483836122ce565b15801561171857506117168383612340565b155b15611739576040516303a3183b60e61b81526004810183905260240161081d565b61174383836123cb565b61174d838361247c565b50600101611665565b5f5f83838151811061176a5761176a612ecf565b60200260200101516020015190506001600581111561178b5761178b612ee3565b81600581111561179d5761179d612ee3565b036117ac5760019150506102c2565b60028160058111156117c0576117c0612ee3565b14806117dd575060048160058111156117db576117db612ee3565b145b806117f9575060058160058111156117f7576117f7612ee3565b145b15611807575f9150506102c2565b83515f611815856001612f0b565b90505b81811015611886575f86828151811061183357611833612ecf565b60200260200101515f01519050858160ff161015611851575061187e565b858160ff1611156118625750611886565b61186c8783611756565b61187c575f9450505050506102c2565b505b600101611818565b506001925050506102c2565b5f60018383815181106118a7576118a7612ecf565b602002602001015160400151601f8111156118c4576118c4612ee3565b14806118fe575060028383815181106118df576118df612ecf565b602002602001015160400151601f8111156118fc576118fc612ee3565b145b9392505050565b5f80600484848151811061191b5761191b612ecf565b602002602001015160200151600581111561193857611938612ee3565b1490505f6119468585611892565b905081158015611954575080155b15611963575f925050506102c2565b5f5f61196f87876119de565b925050915060018111611988575f9450505050506102c2565b5f611993888461266a565b905060015b828110156119d0576119b3896119ae8387612f0b565b61266a565b82146119c857600196505050505050506102c2565b600101611998565b505f98975050505050505050565b81515f9081908190816119f2866001612f0b565b90505b81811015611a74575f878281518110611a1057611a10612ecf565b60200260200101515f015160ff169050868103611a5d57845f03611a32578195505b611a3b85612fce565b9450611a4788836101f4565b15611a5857611a5584612fce565b93505b611a6b565b86811115611a6b5750611a74565b506001016119f5565b50509250925092565b5f6003611a898361267d565b611a939190613032565b6102c2906002612f0b565b80515f90611aad600582613032565b611ab8906002612f0b565b91505f5b8181101561067457611ae6848281518110611ad957611ad9612ecf565b60200260200101516126ce565b15611bd857611af6600284612f0b565b92506010848281518110611b0c57611b0c612ecf565b602002602001015160400151601f811115611b2957611b29612ee3565b03611b4057611b39602084612f0b565b9250611bd8565b6005848281518110611b5457611b54612ecf565b6020026020010151602001516005811115611b7157611b71612ee3565b03611bab576002848281518110611b8a57611b8a612ecf565b60200260200101516060015151611ba19190612fe6565b611b399084612f0b565b838181518110611bbd57611bbd612ecf565b6020026020010151606001515183611bd59190612f0b565b92505b600101611abc565b5f5f829050611bf185518585611f34565b611bfb9084612f0b565b92505f60058651611c0c9190613032565b611c169085612f0b565b90505f5b8651811015611f1f575f5f611c2f898461273b565b92509250505f898481518110611c4757611c47612ecf565b602002602001015190505f611c5b826126ce565b905060038b8681518110611c7157611c71612ecf565b602002602001015160400151601f811115611c8e57611c8e612ee3565b60ff16901b60f81b8a8a611ca181612fce565b9b5081518110611cb357611cb3612ecf565b60200101906001600160f81b03191690815f1a9053508360f81b8a8a80611cd990612fce565b9b5081518110611ceb57611ceb612ecf565b60200101906001600160f81b03191690815f1a9053508260f81b8a8a80611d1190612fce565b9b5081518110611d2357611d23612ecf565b60200101906001600160f81b03191690815f1a90535080611d44575f611d4d565b600886901c60f81b5b8a8a611d5881612fce565b9b5081518110611d6a57611d6a612ecf565b60200101906001600160f81b03191690815f1a90535080611d8b575f611d90565b8560f81b5b8a8a611d9b81612fce565b9b5081518110611dad57611dad612ecf565b60200101906001600160f81b03191690815f1a90535080611dd15750505050611f17565b60605f8060108560400151601f811115611ded57611ded612ee3565b03611e2d5760608501518051602091820120604051611e10920190815260200190565b6040516020818303038152906040529250602091505f9050611e76565b600585602001516005811115611e4557611e45612ee3565b03611e6a578460600151925060028351611e5f9190612fe6565b915060029050611e76565b505050606082015180515f5b6001600160f81b031960f083901b168d8a611e9081612fce565b9b5081518110611ea257611ea2612ecf565b60200101906001600160f81b03191690815f1a9053508160f81b8d8a80611ec890612fce565b9b5081518110611eda57611eda612ecf565b60200101906001600160f81b03191690815f1a905350808360200101898e602001018382825e50611f0d9050828a612f0b565b9850505050505050505b600101611c1a565b50611f2a8282612fe6565b9695505050505050565b5f61ffff8410611f4657611f46612fba565b600884901c60f81b838381518110611f6057611f60612ecf565b60200101906001600160f81b03191690815f1a90535060f884901b83611f87846001612f0b565b81518110611f9757611f97612ecf565b60200101906001600160f81b03191690815f1a9053506002949350505050565b5f5f611fc28561280a565b9050611fd081518585611f34565b611fda9084612f0b565b92505f5b8151811015612132575f828281518110611ffa57611ffa612ecf565b60200260200101516060015161ffff16600d84848151811061201e5761201e612ecf565b60200260200101516040015162ffffff16901b601585858151811061204557612045612ecf565b602002602001015160200151600581111561206257612062612ee3565b62ffffff16901b171790506001600160f81b031960e882901b16868661208781612fce565b97508151811061209957612099612ecf565b60200101906001600160f81b03191690815f1a9053506001600160f81b031960f082901b1686866120c981612fce565b9750815181106120db576120db612ecf565b60200101906001600160f81b03191690815f1a9053508060f81b86868061210190612fce565b97508151811061211357612113612ecf565b60200101906001600160f81b03191690815f1a90535050600101611fde565b50600381516121419190613032565b6100c1906002612f0b565b60608151600161215c9190612f0b565b8260405160200161216e929190613049565b6040516020818303038152906040529050919050565b5f5f5f5f85858151811061219a5761219a612ecf565b60200260200101515f015160ff1690505b5f60058783815181106121c0576121c0612ecf565b60200260200101516020015160058111156121dd576121dd612ee3565b1490505f60018884815181106121f5576121f5612ecf565b602002602001015160400151601f81111561221257612212612ee3565b148061224c5750600288848151811061222d5761222d612ecf565b602002602001015160400151601f81111561224a5761224a612ee3565b145b905081156122605761225d86612fce565b95505b80156122725761226f85612fce565b94505b8115801561227e575080155b1561228f5761228c84612fce565b93505b825f0361229d5750506122c6565b8783815181106122af576122af612ecf565b60200260200101515f015160ff16925050506121ab565b509250925092565b5f5f5f6122db85856119de565b9250509150806001036122f3576001925050506102c2565b5f6122fe868461266a565b905060015b8281101561233357612319876119ae8387612f0b565b821461232b575f9450505050506102c2565b600101612303565b5060019695505050505050565b5f5f5f61234d85856119de565b92505091505f5f90505b818110156123bf575f61236e8761041d8487612f0b565b519050600281600581111561238557612385612ee3565b141580156123a5575060058160058111156123a2576123a2612ee3565b14155b156123b6575f9450505050506102c2565b50600101612357565b50600195945050505050565b600d8282815181106123df576123df612ecf565b602002602001015160400151601f8111156123fc576123fc612ee3565b14612405575050565b5f5f61241184846119de565b9250509150805f036124395760405163598b82ef60e11b81526004810184905260240161081d565b5f61244485846102c8565b905060018151600581111561245b5761245b612ee3565b14610fe25760405163598b82ef60e11b81526004810185905260240161081d565b601782828151811061249057612490612ecf565b602002602001015160400151601f8111156124ad576124ad612ee3565b146124b6575050565b5f8282815181106124c9576124c9612ecf565b60200260200101516060015190505f816124e29061309a565b905060f881901c60ff60e883901c1663ffffffff60c084901c81169060a085901c1681158015612516575063ffffffff8116155b1561253757604051632bb338fb60e01b81526004810188905260240161081d565b5f88888151811061254a5761254a612ecf565b60200260200101515f015160ff1690505b5f89828151811061256e5761256e612ecf565b602002602001015160200151600581111561258b5761258b612ee3565b036125b7578881815181106125a2576125a2612ecf565b60200260200101515f015160ff16905061255b565b5f6125c28a836119de565b505090505f6125da8b8860ff168461041d9190612f0b565b90506001815160058111156125f1576125f1612ee3565b146126125760405163e0f6621160e01b8152600481018b905260240161081d565b505f6126258b61041d60ff891685612f0b565b905060018151600581111561263c5761263c612ee3565b1461265d5760405163e0f6621160e01b8152600481018b905260240161081d565b5050505050505050505050565b5f6118fe61267884846102c8565b612aad565b60015f5b8260200151518110156126c8576126b4836020015182815181106126a7576126a7612ecf565b602002602001015161267d565b6126be9083612f0b565b9150600101612681565b50919050565b5f60108260400151601f8111156126e7576126e7612ee3565b1015806127095750600d8260400151601f81111561270757612707612ee3565b145b806102c2575060058260200151600581111561272757612727612ee3565b1480156102c2575050606001515160021090565b5f80808061274a856001612f0b565b90505b85518110156127b2575f86828151811061276957612769612ecf565b60200260200101515f015160ff16905085810361279b57835f0361278b578194505b61279484612fce565b93506127a9565b858111156127a957506127b2565b5060010161274d565b508190505f6127c18285612f0b565b90505b838111156122c6576127e0866127db600184612fe6565b612bb5565b156127f5576127ee826130bd565b91506127fa565b6122c6565b612803816130bd565b90506127c4565b60605f6128168361267d565b90505f816001600160401b0381111561283157612831612ca5565b60405190808252806020026020018201604052801561288157816020015b604080516080810182525f8082526020808301829052928201819052606082015282525f1990920191018161284f5790505b5090505f826001600160401b0381111561289d5761289d612ca5565b6040519080825280602002602001820160405280156128d657816020015b6128c3612c85565b8152602001906001900390816128bb5790505b5090505f836001600160401b038111156128f2576128f2612ca5565b60405190808252806020026020018201604052801561291b578160200160208202803683370190505b50905085825f8151811061293157612931612ecf565b60200260200101819052505f815f8151811061294f5761294f612ecf565b60209081029190910101525f6001815b81831015612aa0575f85848151811061297a5761297a612ecf565b602002602001015190505f85858151811061299757612997612ecf565b6020026020010151905084806129ac90612fce565b9550506040518060800160405280828152602001835f015160058111156129d5576129d5612ee3565b81526020018360200151518152602001836040015161ffff16815250888481518110612a0357612a03612ecf565b60209081029190910101525f5b826020015151811015612a8b5782602001518181518110612a3357612a33612ecf565b6020026020010151888681518110612a4d57612a4d612ecf565b602002602001018190525083878681518110612a6b57612a6b612ecf565b602090810291909101015284612a8081612fce565b955050600101612a10565b5082612a9681612fce565b935050505061295f565b5093979650505050505050565b5f8160200151515f03612acd57815160058111156102c2576102c2612ee3565b5f8260200151516001600160401b03811115612aeb57612aeb612ca5565b604051908082528060200260200182016040528015612b14578160200160208202803683370190505b5090505f5b836020015151811015612b7157612b4c84602001518281518110612b3f57612b3f612ecf565b6020026020010151612aad565b828281518110612b5e57612b5e612ecf565b6020908102919091010152600101612b19565b5082516005811115612b8557612b85612ee3565b604051612b97919083906020016130d2565b60405160208183030381529060405280519060200120915050919050565b5f80838381518110612bc957612bc9612ecf565b6020026020010151602001516005811115612be657612be6612ee3565b14612bf257505f6102c2565b5f612bfe836001612f0b565b90505b8351811015612c7b5782848281518110612c1d57612c1d612ecf565b60200260200101515f015160ff1603612c4c57612c3a8482612bb5565b612c47575f9150506102c2565b612c73565b82848281518110612c5f57612c5f612ecf565b60200260200101515f015160ff1611612c7b575b600101612c01565b5060019392505050565b6040805160608101909152805f8152602001606081526020015f81525090565b634e487b7160e01b5f52604160045260245ffd5b604051608081016001600160401b0381118282101715612cdb57612cdb612ca5565b60405290565b604051601f8201601f191681016001600160401b0381118282101715612d0957612d09612ca5565b604052919050565b803560208110612d1f575f5ffd5b919050565b5f82601f830112612d33575f5ffd5b81356001600160401b03811115612d4c57612d4c612ca5565b612d5f601f8201601f1916602001612ce1565b818152846020838601011115612d73575f5ffd5b816020850160208301375f918101602001919091529392505050565b5f60208284031215612d9f575f5ffd5b81356001600160401b03811115612db4575f5ffd5b8201601f81018413612dc4575f5ffd5b80356001600160401b03811115612ddd57612ddd612ca5565b8060051b612ded60208201612ce1565b91825260208184018101929081019087841115612e08575f5ffd5b6020850192505b83831015612ec45782356001600160401b03811115612e2c575f5ffd5b85016080818a03601f19011215612e41575f5ffd5b612e49612cb9565b602082013560ff81168114612e5c575f5ffd5b8152604082013560068110612e6f575f5ffd5b6020820152612e8060608301612d11565b604082015260808201356001600160401b03811115612e9d575f5ffd5b612eac8b602083860101612d24565b60608301525083525060209283019290910190612e0f565b979650505050505050565b634e487b7160e01b5f52603260045260245ffd5b634e487b7160e01b5f52602160045260245ffd5b634e487b7160e01b5f52601160045260245ffd5b808201808211156102c2576102c2612ef7565b805160208201516001600160f01b0319811691906002821015610674576001600160f01b031960029290920360031b82901b161692915050565b604081525f83518060408401528060208601606085015e5f606082850101526060601f19601f8301168401019150508260208301529392505050565b5f60208284031215612fa4575f5ffd5b81516001600160a01b03811681146118fe575f5ffd5b634e487b7160e01b5f52600160045260245ffd5b5f60018201612fdf57612fdf612ef7565b5060010190565b818103818111156102c2576102c2612ef7565b61ffff81811683821601908111156102c2576102c2612ef7565b5f8261302d57634e487b7160e01b5f52601260045260245ffd5b500690565b80820281158282048414176102c2576102c2612ef7565b606360f81b815260e083901b6001600160e01b03191660018201526880600e6000396000f360b81b60058201525f600e820181905282518060208501600f85015e5f9201600f019182525092915050565b805160208083015191908110156126c8575f1960209190910360031b1b16919050565b5f816130cb576130cb612ef7565b505f190190565b8281525f602082018351602085015f5b828110156131005781518452602093840193909101906001016130e2565b5091969550505050505056fea264697066735822122099e32735a4f7a5127669d586a077fbf617b6d9f24a64e8830ad9ceac44b5a0ba64736f6c634300081e0033"
const rolesBytecode =
  "0x608060405234801561000f575f5ffd5b5060405161646d38038061646d83398101604081905261002e91610329565b604080516001600160a01b03858116602083015284811682840152831660608083019190915282518083039091018152608090910190915261006f81610078565b505050506103b7565b5f54610100900460ff161580801561009657505f54600160ff909116105b806100af5750303b1580156100af57505f5460ff166001145b6101165760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840160405180910390fd5b5f805460ff191660011790558015610137575f805461ff0019166101001790555b5f5f5f8480602001905181019061014e9190610329565b9194509250905061015e83610256565b606580546001600160a01b038085166001600160a01b03199283161790925560668054928416929091169190911790556101966102a7565b816001600160a01b0316836001600160a01b0316336001600160a01b03167f71d740fcd2b4a7ab76df6fe093ae985960dabcc06cf64811bc538bcfb695e61284604051806040016040528060058152602001640332e302e360dc1b815250604051610202929190610373565b60405180910390a45050508015610252575f805461ff0019169055604051600181527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb38474024989060200160405180910390a15b5050565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0905f90a35050565b60015f5260686020525f51602061644d5f395f51905f52546001600160a01b0316156102e65760405163dfd49ebd60e01b815260040160405180910390fd5b60015f81905260686020525f51602061644d5f395f51905f5280546001600160a01b0319169091179055565b6001600160a01b0381168114610326575f5ffd5b50565b5f5f5f6060848603121561033b575f5ffd5b835161034681610312565b602085015190935061035781610312565b604085015190925061036881610312565b809150509250925092565b60018060a01b0383168152604060208201525f82518060408401528060208501606085015e5f606082850101526060601f19601f8301168401019150509392505050565b616089806103c45f395ff3fe608060405234801561000f575f5ffd5b50600436106101f0575f3560e01c8063715018a61161011b578063b3dd25c7116100b4578063e009cfde11610079578063e009cfde1461053f578063e29dfba814610552578063f1637e571461057f578063f2fde38b14610592578063ffa1ad74146105a5575f5ffd5b8063b3dd25c7146104d2578063c6fe8747146104e5578063cc2f8452146104f8578063d4b8399214610519578063d8afba761461052c575f5ffd5b8063715018a6146104345780637508dd981461043c578063776d1a011461044f5780638bb9c5bf146104625780638da5cb5b14610475578063946d364e14610486578063957ed2b314610499578063a4f9edbf146104ac578063a8ec43ee146104bf575f5ffd5b80632d3c25471161018d5780632d3c2547146102da5780632d9ad53d14610307578063468721a71461032a5780635229073f1461033d5780635aef7de6146103505780635e7c9fe814610363578063610b5925146103fb57806366523f7d1461040e57806369ecc3cf14610421575f5ffd5b80624825f7146101f45780630172a43a14610209578063086cfca81461021c5780630920e8d21461022f5780630c6c76b814610242578063208dd1ff146102555780632916a9af146102685780632959513c1461027b5780632b99e506146102b9575b5f5ffd5b610207610202366004614b08565b6105d6565b005b610207610217366004614b66565b6106a4565b61020761022a366004614b94565b610716565b61020761023d366004614bfd565b61076f565b610207610250366004614b66565b6108ad565b610207610263366004614c68565b610916565b610207610276366004614ca9565b610961565b6102a3610289366004614cef565b606b6020525f90815260409020546001600160a01b031681565b6040516102b09190614d06565b60405180910390f35b6102cc6102c7366004614d70565b610a06565b6040516102b0929190614e27565b6102f96102e8366004614b94565b606c6020525f908152604090205481565b6040519081526020016102b0565b61031a610315366004614b94565b610af6565b60405190151581526020016102b0565b61031a610338366004614e41565b610b2f565b6102cc61034b366004614e41565b610b75565b6065546102a3906001600160a01b031681565b6103bc610371366004614cef565b606a6020525f9081526040902080546001909101546001600160801b0380831692600160801b90048116916001600160401b0380821692600160401b83041691600160c01b90041685565b604080516001600160801b03968716815294861660208601526001600160401b039384169085015293166060830152909116608082015260a0016102b0565b610207610409366004614b94565b610bbf565b61020761041c366004614eaf565b610cce565b61020761042f366004614cef565b610d58565b610207610daa565b61020761044a366004615035565b610dbd565b61020761045d366004614b94565b610eac565b610207610470366004614cef565b610f05565b6033546001600160a01b03166102a3565b610207610494366004614c68565b610f3f565b6102076104a7366004615180565b610f97565b6102076104ba366004615200565b61101e565b6102076104cd366004615231565b6111f3565b6102076104e036600461529a565b6113b3565b61031a6104f3366004614d70565b611433565b61050b610506366004614c68565b61151b565b6040516102b09291906152db565b6066546102a3906001600160a01b031681565b6102f961053a36600461533d565b6116ab565b61020761054d366004615384565b6117c9565b61031a610560366004614c68565b606760209081525f928352604080842090915290825290205460ff1681565b61020761058d3660046153b0565b6118c0565b6102076105a0366004614b94565b6119b6565b6105c9604051806040016040528060058152602001640332e302e360dc1b81525081565b6040516102b09190615400565b6105de611a2f565b826001600160801b03165f036105fb576001600160801b036105fd565b825b5f858152606a6020526040908190206001810180546001600160801b03808616600160801b02888216179093556001600160401b0386811667ffffffffffffffff198316179092559251939650600160c01b83041692600160401b90920416907f63d7ec44a20b176da1d60d75259d264ee67b3d8213706afa71a28f69ed8ebece9061069490889084908990899089908990615412565b60405180910390a1505050505050565b6106ac611a2f565b5f8281526069602090815260408083206001600160a01b038516845260010190915290819020805460ff19169055517f3ccf62aacc3286173cedf5c20ec550071636a2faf0a3b28d93841736a43f822b9061070a9084908490615450565b60405180910390a15050565b61071e611a2f565b606580546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f52ae88b092de36f87fb43fe794eb1381023b9c1bce563a871154022c63dce342905f90a35050565b610777611a2f565b5f8581526069602090815260408083206001600160a01b03881684526001908101909252909120805460ff191690911790556001600160601b03606085901b6001600160601b03191617821561084d5761084882735cb0a36d1933694fce79fb3bd02d0f6be228f6dc6317024b0587876040518363ffffffff1660e01b8152600401610804929190615525565b602060405180830381865af415801561081f573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061084391906155e5565b611a89565b610856565b61085682611ab2565b5f8781526069602090815260408083208584526002019091529081902091909155517f018ad4e6ca381cf52c3d09a06369f896167ec538ccc03b8f7e452f55814af47a906106949088908890889088908890615610565b6108b5611a2f565b5f8281526069602090815260408083206001600160a01b038516845260010190915290819020805460ff19166002179055517f277465b84f512b759d745fab70327b693ee21ce592fca91a3f491739a25fa76a9061070a9084908490615450565b61091e611a2f565b5f8181526069602090815260408083206001600160a01b038616845290915280822091909155515f5160206160345f395f51905f529061070a9083908590615450565b610969611a2f565b60a082901c63ffffffff60401b16606084811b6001600160601b031916919091175f908152606b602090815260409182902080546001600160a01b0319166001600160a01b03868116918217909255835191881682526001600160e01b0319871692820192909252918201527f1330d96b64c7e86736f77e027ca34223dd3d1d08049281281c9d597d8098ed5991015b60405180910390a1505050565b5f60605f5f610a1486611ad5565b915091505f610a27878d8d8d8d8d611cf6565b9050610a3281611de4565b606654604051635229073f60e01b81526001600160a01b0390911690635229073f90610a6a908f908f908f908f908f906004016156fe565b5f604051808303815f875af1158015610a85573d5f5f3e3d5ffd5b505050506040513d5f823e601f3d908101601f19168201604052610aac9190810190615734565b9095509350858015610abc575084155b15610ada5760405163d27b44a960e01b815260040160405180910390fd5b610ae78388848489611e6a565b50505097509795505050505050565b5f60016001600160a01b03831614801590610b2957506001600160a01b038281165f908152606860205260409020541615155b92915050565b5f610b698686868686606c5f610b43611fc8565b6001600160a01b03166001600160a01b031681526020019081526020015f20545f611433565b90505b95945050505050565b5f6060610bb18787878787606c5f610b8b611fc8565b6001600160a01b03166001600160a01b031681526020019081526020015f20545f610a06565b915091509550959350505050565b610bc7611a2f565b6001600160a01b0381161580610be657506001600160a01b0381166001145b15610c0f5780604051635c93ff2f60e11b8152600401610c069190614d06565b60405180910390fd5b6001600160a01b038181165f908152606860205260409020541615610c495780604051632061897360e01b8152600401610c069190614d06565b60686020525f5160206160145f395f51905f5280546001600160a01b038381165f81815260408082208054949095166001600160a01b03199485161790945560019052835490911617909155517fecdf3a3effea5783a3c4c2140e677577666428d44ed9d474a0b3a4c9943f844090610cc3908390614d06565b60405180910390a150565b610cd6611a2f565b5f83815260696020526040812060020190610cf18484612023565b81526020019081526020015f205f90557f32a3a599b308fc900a0e6513db2ad40bf0c94367da90048a4b308d8c6b2dd6ea8383836040516109f9939291909283526001600160a01b039190911660208301526001600160e01b031916604082015260600190565b335f908152606760209081526040808320848452825291829020805460ff1916600117905590518281527f89a77869d7b8125ba16e08a92ddc8cc26fb1fa47241971167954489a5e66c2559101610cc3565b610db2611a2f565b610dbb5f612043565b565b610dc5611a2f565b6040516317024b0560e01b81525f90735cb0a36d1933694fce79fb3bd02d0f6be228f6dc906317024b0590610dfe9086906004016157bc565b602060405180830381865af4158015610e19573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610e3d91906155e5565b9050610e498282611a89565b5f87815260696020526040812060020190610e648888612023565b81526020019081526020015f20819055507f4f6c340456f64db31a3d003c1224ba1de058557b1cdf71f21ae48ce4a4f64f52868686868660405161069495949392919061585f565b610eb4611a2f565b606680546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f90cc2f570a6eb594b1580ea3e41247d2d73a55281889e86bd4ec2fc29c7e62d6905f90a35050565b5f8181526069602090815260408083203380855292528083209290925590515f5160206160345f395f51905f5291610cc391849190615450565b610f47611a2f565b6001600160a01b0382165f818152606c6020908152604091829020849055815192835282018390527f60c85b61661a191efceebca036d48b290e04a1f08dd96472b920adbdd50c64e8910161070a565b610f9f611a2f565b5f5b83811015611016575f858583818110610fbc57610fbc61592e565b905060200201359050838383818110610fd757610fd761592e565b9050602002016020810190610fec9190615942565b1561100357610ffe87825f5f5f6118c0565b61100d565b61100d8782610916565b50600101610fa1565b505050505050565b5f54610100900460ff161580801561103c57505f54600160ff909116105b806110555750303b15801561105557505f5460ff166001145b6110b85760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b6064820152608401610c06565b5f805460ff1916600117905580156110d9575f805461ff0019166101001790555b5f5f5f848060200190518101906110f0919061595d565b9250925092506110ff83612043565b606580546001600160a01b038085166001600160a01b0319928316179092556066805492841692909116919091179055611137612094565b816001600160a01b0316836001600160a01b0316336001600160a01b03167f71d740fcd2b4a7ab76df6fe093ae985960dabcc06cf64811bc538bcfb695e61284604051806040016040528060058152602001640332e302e360dc1b8152506040516111a392919061599c565b60405180910390a450505080156111ef575f805461ff0019169055604051600181527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb38474024989060200161070a565b5050565b6111fb611a2f565b836001600160801b03165f03611218576001600160801b0361121a565b835b9350806001600160401b03165f036112325742611234565b805b90506040518060a00160405280846001600160801b03168152602001856001600160801b03168152602001836001600160401b03168152602001866001600160801b03168152602001826001600160401b0316815250606a5f8881526020019081526020015f205f820151815f015f6101000a8154816001600160801b0302191690836001600160801b031602179055506020820151815f0160106101000a8154816001600160801b0302191690836001600160801b031602179055506040820151816001015f6101000a8154816001600160401b0302191690836001600160401b0316021790555060608201518160010160086101000a8154816001600160801b0302191690836001600160801b0316021790555060808201518160010160186101000a8154816001600160401b0302191690836001600160401b031602179055509050507f63d7ec44a20b176da1d60d75259d264ee67b3d8213706afa71a28f69ed8ebece86868686868660405161069496959493929190615412565b6113bb611a2f565b6113c481611ab2565b5f858152606960205260408120600201906113df8686612023565b81526020019081526020015f20819055507f9603b65b11492fec54ccc3d9feb93536f804d82e12228187ff730a253fc283ee8484848460405161142594939291906159bf565b60405180910390a150505050565b5f5f5f61143f85611ad5565b915091505f611452868c8c8c8c8c611cf6565b905061145d81611de4565b60665460405163468721a760e01b81526001600160a01b039091169063468721a790611495908e908e908e908e908e906004016156fe565b6020604051808303815f875af11580156114b1573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906114d591906159f2565b93508480156114e2575083155b156115005760405163d27b44a960e01b815260040160405180910390fd5b61150d8387848488611e6a565b505050979650505050505050565b60605f6001600160a01b03841660011480159061153e575061153c84610af6565b155b1561155e5783604051635c93ff2f60e11b8152600401610c069190614d06565b825f0361157e576040516372dbed9760e11b815260040160405180910390fd5b826001600160401b0381111561159657611596614ee1565b6040519080825280602002602001820160405280156115bf578160200160208202803683370190505b506001600160a01b038086165f90815260686020526040812054929450911691505b6001600160a01b0382161580159061160357506001600160a01b038216600114155b801561160e57508381105b1561166857818382815181106116265761162661592e565b6001600160a01b039283166020918202929092018101919091529281165f9081526068909352604090922054909116908061166081615a21565b9150506115e1565b6001600160a01b0382166001146116a05782611685600183615a39565b815181106116955761169561592e565b602002602001015191505b808352509250929050565b604080517f47e79534a245952e8b16893a336b85a3d9ea9fa8c573f3d803afb92a79469218602082015246918101919091523060608201525f9081906080016040516020818303038152906040528051906020012090505f601960f81b600160f81b837f2939aeeda3ca260200c9f7b436b19e13207547ccc65cfedc857751c5ea6d91d45f1b8989604051611741929190615a4c565b6040805191829003822060208301939093528101919091526060810188905260800160408051808303601f190181529082905280516020918201206001600160f81b0319958616918301919091529290931660218401526022830152604282015260620160408051601f198184030181529190528051602090910120925050505b9392505050565b6117d1611a2f565b6001600160a01b03811615806117f057506001600160a01b0381166001145b156118105780604051635c93ff2f60e11b8152600401610c069190614d06565b6001600160a01b038281165f9081526068602052604090205481169082161461184e5780604051638b4189ff60e01b8152600401610c069190614d06565b6001600160a01b038181165f81815260686020526040808220805487861684528284208054919096166001600160a01b0319918216179095559290915281549092169055517faab4fa2b463f581b2b32cb3b7e3b704b9ce37cc209b5fb4d77e593ace40542769061070a908390614d06565b6118c8611a2f565b816001600160401b03165f036118e5576001600160401b036118e7565b815b9150806001600160801b03165f03611906576001600160801b03611908565b805b5f8581526069602090815260408083206001600160a01b038a16845290915290206001600160c01b031960c086901b1667ffffffffffffffff60801b608086901b16176001600160801b038316179055905061196385610af6565b6119705761197085610bbf565b7fc219bba489e694cb40935d0de27d36ecbe6f1e1b68a2b10c4cbf425a13b864ff84868585856040516119a7959493929190615a5b565b60405180910390a15050505050565b6119be611a2f565b6001600160a01b038116611a235760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608401610c06565b611a2c81612043565b50565b6033546001600160a01b03163314610dbb5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610c06565b5f816001600160a01b031660a0846003811115611aa857611aa8615467565b901b179392505050565b5f60a0826003811115611ac757611ac7615467565b600160a81b911b1792915050565b335f9081526068602052604081205481906001600160a01b0316611be4575f5f611afd6120ff565b6001600160a01b038082165f9081526068602052604090205492945090925016611b3c5733604051634a0bfec160e01b8152600401610c069190614d06565b6001600160a01b0381165f90815260676020908152604080832085845290915290205460ff1615611b8357604051639e1dc0c560e01b815260048101839052602401610c06565b6001600160a01b0381165f908152606760209081526040808320858452825291829020805460ff1916600117905590518381527f8c8e19e7e8e193118a05465d7676e82215052d3cb150628fbf598105dc2bb6ab910160405180910390a150505b5f839003611c0557604051631fb1d3e560e31b815260040160405180910390fd5b611c0d611fc8565b5f8481526069602090815260408083206001600160a01b0385168452909152812054919350819003611c5257604051631fb1d3e560e31b815260040160405180910390fd5b60c081901c421015611c7757604051631f4cbe2760e11b815260040160405180910390fd5b608081901c6001600160401b0316421115611ca45760405162bc3e2b60e21b815260040160405180910390fd5b801960801b5f03611cb957505f199050915091565b6001600160801b038116836001821115611ce957611cd8600183615a39565b6001600160801b0319841617611ceb565b5f5b935093505050915091565b6060611d00614a4e565b5f6040518060600160405280896001600160a01b03168152602001888152602001856001811115611d3357611d33615467565b905290505f606b81611d4e8b611d498a8c615a99565b612023565b815260208101919091526040015f20546001600160a01b0316905080611d8657611d7f8a888886602001518661225a565b9250611d96565b611d93818b898986612400565b92505b5f83516018811115611daa57611daa615467565b14611dd15782516040808501519051631a1537eb60e31b8152610c06929190600401615ad1565b50506020015190505b9695505050505050565b80515f5b81811015611e65575f838281518110611e0357611e0361592e565b6020026020010151905080602001516001600160801b031681604001516001600160801b03161115611e3757611e37615aef565b611e5c815f0151826060015183604001518460200151611e579190615b03565b61257a565b50600101611de8565b505050565b81515f5b81811015611f20575f848281518110611e8957611e8961592e565b602002602001015190508315611f01578051604082015160208301517f90355d540c2980efb4c360996dfc5405ee87e812e4f3db843857547cbdb5af65929190611ed4908290615b03565b604080519384526001600160801b03928316602085015291169082015260600160405180910390a1611f17565b611f17815f01518260600151836020015161257a565b50600101611e6e565b50818015611f2f57505f198414155b15611016575f8581526069602090815260408083206001600160a01b038a16845290915290208490558315611faa577fe9f3098d0a491e82485da5966eeb7d30e88f44596b8251c34539c8dceffc35cf858760c087901c608088901c88604051611f9d959493929190615a5b565b60405180910390a1611016565b5f5160206160345f395f51905f528587604051610694929190615450565b335f908152606860205260408120546001600160a01b031615611fea57503390565b5f611ff36120ff565b6001600160a01b038082165f908152606860205260409020549193501615905061201c57919050565b5f91505090565b60a01c63ffffffff60401b1660609190911b6001600160601b0319161790565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0905f90a35050565b60015f5260686020525f5160206160145f395f51905f52546001600160a01b0316156120d35760405163dfd49ebd60e01b815260040160405180910390fd5b60015f81905260686020525f5160206160145f395f51905f5280546001600160a01b0319169091179055565b5f808036606581101561211757505f93849350915050565b5f5f5f61212485856125a6565b919450925090505f612137606186615a39565b90505f6121468683818a615b22565b61214f91615b49565b90508460ff165f036121d55782600481108061216a57508281115b1561218057505f998a9950975050505050505050565b845f61219761219184838c8e615b22565b866116ab565b90506121b582828c8c87908a926121b093929190615b22565b61261c565b6121c0575f806121c3565b80825b9b509b50505050505050505050509091565b5f6121eb6121e584838a8c615b22565b846116ab565b604080515f81526020810180835283905260ff8916918101919091526060810187905260808101869052909150819060019060a0016020604051602081039080840390855afa158015612240573d5f5f3e3d5ffd5b505050602060405103519950995050505050505050509091565b612262614a4e565b5f868152606960205260409020841580159061227e5750600485105b1561229c57604051632342609160e11b815260040160405180910390fd5b82516001600160a01b03165f90815260018201602052604081205460ff16908160028111156122cd576122cd615467565b036122f85750506040805160608101825260028152602081018590525f918101919091529050610b6c565b5f600182600281111561230d5761230d615467565b146123415760a061231e888a615a99565b6001600160e01b031916901c855f015160601b6001600160601b0319161761235d565b84516001600160601b031960609190911b166001600160601b03175b5f8181526002850160205260408120549192508190036123e557604080516060810190915280600185600281111561239757612397615467565b146123a35760036123a6565b60025b60188111156123b7576123b7615467565b8152602081018990526040016123cd8a8c615a99565b6001600160e01b03191690529450610b6c9350505050565b6123f2818a8a8a8a612700565b9a9950505050505050505050565b612408614a4e565b81516020830151604080850151905163c7a7b63560e01b81526001600160a01b038a169363c7a7b6359361244793919290918a918a91906004016156fe565b5f60405180830381865afa92505050801561248357506040513d5f823e601f3d908101601f191682016040526124809190810190615b66565b60015b6124a0576040516315e649e960e01b815260040160405180910390fd5b5f5b815181101561256f575f8282815181106124be576124be61592e565b602002602001015190505f816060015190505f8260800151826124e19190615c45565b905061253c8a6124f383858c8e615b22565b8960200151604051806060016040528089602001516001600160a01b0316815260200189604001518152602001895f0151600181111561253557612535615467565b905261225a565b95505f8651601881111561255257612552615467565b14612561575050505050610b6c565b5050508060010190506124a2565b505095945050505050565b825f52606a602052600160405f20016001600160401b038154168260401b8460c01b1717815550505050565b5f808084846125b6600182615a39565b6125c1928290615b22565b6125ca91615c58565b60f81c925084846125dc604182615a39565b6125e7928290615b22565b6125f091615b49565b915084846125ff602182615a39565b61260a928290615b22565b61261391615b49565b90509250925092565b5f843b80820361262f575f9150506126f8565b5f866001600160a01b0316631626ba7e60e01b87878760405160240161265793929190615c8e565b60408051601f198184030181529181526020820180516001600160e01b03166001600160e01b03199094169390931790925290516126959190615ca7565b5f60405180830381855afa9150503d805f81146126cd576040519150601f19603f3d011682016040523d82523d5f602084013e6126d2565b606091505b509150630b135d3f60e11b90506126e882615cbd565b6001600160e01b03191614925050505b949350505050565b612708614a4e565b5f5f5f612714896127fe565b9250925092505f61272e866020015187604001518561282c565b90505f81601881111561274357612743615467565b1461278157604051806060016040528082601881111561276557612765615467565b81526020018881526020015f5f1b815250945050505050610b6c565b8315612799576040805160608101909152805f612765565b5f5f6127ac6127a7856128e0565b61293b565b915091506127b8614a6f565b5f825160058111156127cc576127cc615467565b146127df576127dc8c8c84612972565b90505b6127ed8c8c85848e8e6129c1565b9d9c50505050505050505050505050565b600160a81b811615155f8060ff60a085901c16600381111561282257612822615467565b9294929392915050565b5f5f8411801561284e5750600182600381111561284b5761284b615467565b14155b801561286c5750600382600381111561286957612869615467565b14155b15612879575060046117c2565b600183600181111561288d5761288d615467565b1480156128ac575060028260038111156128a9576128a9615467565b14155b80156128ca575060038260038111156128c7576128c7615467565b14155b156128d7575060016117c2565b505f9392505050565b60605f19823b01806001600160401b038111156128ff576128ff614ee1565b6040519080825280601f01601f191660200182016040528015612929576020820181803683370190505b50915080600160208401853c50919050565b612943614a9e565b61294b614ac5565b602083015160f01c61295e846002612d48565b925061296a8482613001565b915050915091565b61297a614a6f565b60058251600581111561298f5761298f615467565b1461299c5761299c615aef565b6129b38484846040015185602001515186866131b7565b602081019290925250919050565b6129c9614a4e565b84516080850151156129fa575050604080516060810182526014815260208101849052845191810191909152611dda565b601081601f811115612a0e57612a0e615467565b1015612bb9575f81601f811115612a2757612a27615467565b03612a53576040805160608101909152805f5b81526020018581526020015f5f1b815250915050611dda565b600581601f811115612a6757612a67615467565b03612a8257612a7a888888888888613362565b915050611dda565b600181601f811115612a9657612a96615467565b03612aa957612a7a8888888888886134ad565b600281601f811115612abd57612abd615467565b03612ad057612a7a888888888888613550565b600d81601f811115612ae457612ae4615467565b03612af757612a7a88888888888861360e565b600481601f811115612b0b57612b0b615467565b03612b3c576040805160608101909152808815612b29576017612b2b565b5f5b6018811115612a3a57612a3a615467565b600681601f811115612b5057612b50615467565b03612b6357612a7a8888888888886136aa565b600781601f811115612b7757612b77615467565b03612b8a57612a7a88888888888861375c565b600881601f811115612b9e57612b9e615467565b14612bab57612bab615aef565b612a7a8888888888886137e0565b601281601f811115612bcd57612bcd615467565b11612be9576040518060600160405280612b2b8a8a8a8a6138b3565b601481601f811115612bfd57612bfd615467565b11612c19576040518060600160405280612b2b8a8a8a8a6139d1565b601c81601f811115612c2d57612c2d615467565b03612c4d57612a7a612c40898988613a57565b6020880151601187613a7d565b601d81601f811115612c6157612c61615467565b03612c7b57612a7a83602001518760200151601387613a7d565b601e81601f811115612c8f57612c8f615467565b03612ca657612a7a60018760200151601287613a7d565b601581601f811115612cba57612cba615467565b03612cda576040518060600160405280612b2b8a8a8a602001518a613ae1565b601781601f811115612cee57612cee615467565b03612d0e576040518060600160405280612b2b8a8a8a602001518a613bf2565b601681601f811115612d2257612d22615467565b14612d2f57612d2f615aef565b612a7a888888888888613ca2565b509695505050505050565b612d50614a9e565b60209183019182015160229092019160f01c5f816001600160401b03811115612d7b57612d7b614ee1565b604051908082528060200260200182016040528015612db457816020015b612da1614a9e565b815260200190600190039081612d995790505b50905060015f5b83811015612fdb575f865160d81c90505f848381518110612dde57612dde61592e565b60200260200101519050602382901c601f16601f811115612e0157612e01615467565b8190601f811115612e1457612e14615467565b9081601f811115612e2757612e27615467565b90525060ff601083901c81166040830152601883901c1661ffff83168015612eb05760208b8201015160f01c5f816001600160401b03811115612e6c57612e6c614ee1565b6040519080825280601f01601f191660200182016040528015612e96576020820181803683370190505b509050828d01602201816020018382825e50506020850152505b8115612f6457816001600160401b03811115612ece57612ece614ee1565b604051908082528060200260200182016040528015612f0757816020015b612ef4614a9e565b815260200190600190039081612eec5790505b5060608401525f5b82811015612f5e57878781518110612f2957612f2961592e565b602002602001015184606001518281518110612f4757612f4761592e565b602090810291909101015260019687019601612f0f565b50612fc8565b600f8351601f811115612f7957612f79615467565b03612fc85760108352606554604051612f959190602001614d06565b60408051601f198184030181528282528051602091820120908301520160408051601f1981840301815291905260208401525b5050506005969096019550600101612dbb565b50815f81518110612fee57612fee61592e565b6020026020010151935050505092915050565b613009614ac5565b60209183019182015160229092019160f01c5f816001600160401b0381111561303457613034614ee1565b60405190808252806020026020018201604052801561306d57816020015b61305a614ac5565b8152602001906001900390816130525790505b50905060015f5b83811015612fdb575f865160e81c90505f8483815181106130975761309761592e565b60200260200101519050601582901c60071660058111156130ba576130ba615467565b819060058111156130cd576130cd615467565b908160058111156130e0576130e0615467565b905250611fff8216604082015260ff600d83901c1680156131a557806001600160401b0381111561311357613113614ee1565b60405190808252806020026020018201604052801561314c57816020015b613139614ac5565b8152602001906001900390816131315790505b5060208301525f5b818110156131a35786868151811061316e5761316e61592e565b60200260200101518360200151828151811061318c5761318c61592e565b602090810291909101015260019586019501613154565b505b50505060039590950194600101613074565b5f836001600160401b038111156131d0576131d0614ee1565b60405190808252806020026020018201604052801561320957816020015b6131f6614a6f565b8152602001906001900390816131ee5790505b5090505f60048451600581111561322257613222615467565b1490505f5f5b86811015613352575f866020015184801561324857508760200151518310155b6132525782613254565b5f5b815181106132645761326461592e565b602002602001015190505f8583815181106132815761328161592e565b602002602001015190505f61329583613dac565b90505f6132a58e8e8e8986613e4a565b90505f1981036132c45750506001608088015250611016945050505050565b6132d18e8e838787613eee565b8260800151156132f05750506001608088015250611016945050505050565b816132fc576020613302565b82602001515b61330c9087615c45565b95508161331a57602061331c565b5f5b60ff16836020015161332e9190615c45565b8960200181815161333f9190615c45565b9052505060019093019250613228915050565b5050506040820152505050505050565b61336a614a4e565b5f856020015151602061337d9190615a39565b905060208110156133d2575f81876020015161339890615cfb565b8751911c91505f9083906133af908b90818e615b22565b6133b891615b49565b901c90508082146133cf5750506018825250611dda565b50505b604080870151908601515181146134055782600a5b908160188111156133fa576133fa615467565b815250505050611dda565b602083018590525f5b8760600151518110156134a0576134758a8a8a6060015184815181106134365761343661592e565b602002602001015185851061344b578a61346a565b8a6040015185815181106134615761346161592e565b60200260200101515b88602001518a6129c1565b93505f8451601881111561348b5761348b615467565b1461349857505050611dda565b60010161340e565b5050509695505050505050565b6134b5614a4e565b602081018390525f5b856060015151811015612d3d576135278888886060015184815181106134e6576134e661592e565b602002602001015188606001516134fd578861351c565b886040015185815181106135135761351361592e565b60200260200101515b8660200151886129c1565b91505f8251601881111561353d5761353d615467565b146135485750611dda565b6001016134be565b613558614a4e565b5f5b8560600151518110156135e8576135bf8888886060015184815181106135825761358261592e565b6020026020010151886060015161359957886135b8565b886040015185815181106135af576135af61592e565b60200260200101515b88886129c1565b91505f825160188111156135d5576135d5615467565b036135e05750611dda565b60010161355a565b5050604080516060810182526005815260208101939093525f9083015250949350505050565b613616614a4e565b5f856020015161362590615d1e565b60f01c90505f86602001516002815181106136425761364261592e565b016020015160f81c9050613654614a6f565b865161ffff841690613667906020615c45565b6136719190615c45565b815260ff82166020820152606088015180516123f2918c918c91905f9061369a5761369a61592e565b6020026020010151848a8a6129c1565b6136b2614a4e565b6040840151515f5b818110156137345761370a898989606001515f815181106136dd576136dd61592e565b6020026020010151896040015185815181106136fb576136fb61592e565b602002602001015189896129c1565b92505f8351601881111561372057613720615467565b0361372c575050611dda565b6001016136ba565b505060408051606081018252600c815260208101949094525f90840152509095945050505050565b613764614a4e565b602081018390525f5b846040015151811015612d3d576137b3888888606001515f815181106137955761379561592e565b6020026020010151886040015185815181106135135761351361592e565b91505f825160188111156137c9576137c9615467565b146137d85750600b8152611dda565b60010161376d565b6137e8614a4e565b606085015151604085015151818110156138045782600a6133e7565b602083018590525f6138168383615a39565b90505f5b838110156138a5576138798b8b8b60600151848151811061383d5761383d61592e565b60200260200101518b6040015185876138569190615c45565b815181106138665761386661592e565b602002602001015189602001518b6129c1565b94505f8551601881111561388f5761388f615467565b1461389d5750505050611dda565b60010161381a565b505050509695505050505050565b815160208301515f919082906138c890615cfb565b90505f601083601f8111156138df576138df615467565b146138f4576138ef888887613a57565b61392e565b84516020860151899190899061390a9083615c45565b9261391793929190615b22565b604051613925929190615a4c565b60405180910390205b9050601083601f81111561394457613944615467565b1480156139515750818114155b1561396257600793505050506126f8565b601183601f81111561397657613976615467565b1480156139835750818111155b1561399457600893505050506126f8565b601283601f8111156139a8576139a8615467565b1480156139b55750818110155b156139c657600993505050506126f8565b5f93505050506126f8565b815160208301515f919082906139e690615cfb565b90505f6139f4888887613a57565b9050601383601f811115613a0a57613a0a615467565b148015613a175750818113155b15613a2857600893505050506126f8565b601483601f811115613a3c57613a3c615467565b1480156139b557508181126139c657600993505050506126f8565b8051602080830151918501359110156117c25760208083015190036008021c9392505050565b613a85614a4e565b5f5f613a928488886140a7565b91509150604051806060016040528083613aac5786613aae565b5f5b6018811115613abf57613abf615467565b815260200182815260200187613ad490615cfb565b9052979650505050505050565b5f80613aec84615d1e565b60f01c61ffff1690505f6002808651613b059190615a39565b613b0f9190615d6c565b90505f8460200151602014613b25576020613b27565b5f5b8551613b369160ff1690615c45565b905086613b438282615a39565b613b4d8486615c45565b1115613b6057600e9450505050506126f8565b365f613b6e8a85818e615b22565b915091505f5b85811015613be1576022818b018101518783018c01909101518883018501355f613ba6613ba1868c615a39565b61412a565b9050808483161681841614613bc957600f9b5050505050505050505050506126f8565b50505050602081613bda9190615c45565b9050613b74565b505f9b9a5050505050505050505050565b5f5f613bfd8461415c565b90505f5f613c0d88888588614222565b90925090505f82613c2061271084615d7f565b613c2a9190615d6c565b90505f846080015163ffffffff16118015613c4e5750836080015163ffffffff1681105b15613c605760159450505050506126f8565b5f8460a0015163ffffffff16118015613c8257508360a0015163ffffffff1681115b15613c945760169450505050506126f8565b505f98975050505050505050565b613caa614a4e565b5f8560200151613cb990615cfb565b60601c90505f8660200151613ccd90615cfb565b5f1c60a01b90505f5f836001600160a01b031663b0acb980875f015188602001518e8e8b604001518e5f01518f602001518b6040518963ffffffff1660e01b8152600401613d22989796959493929190615d96565b6040805180830381865afa158015613d3c573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190613d609190615df5565b91509150604051806060016040528083613d7b576010613d7d565b5f5b6018811115613d8e57613d8e615467565b81526020810198909852604090970152509398975050505050505050565b80515f906001816005811115613dc457613dc4615467565b03613dd25750600192915050565b6003816005811115613de657613de6615467565b03613e42576020830151515f5b81811015613e3757613e2185602001518281518110613e1457613e1461592e565b6020026020010151613dac565b613e2f57505f949350505050565b600101613df3565b506001949350505050565b505f92915050565b5f84613e568486615c45565b613e61906020615c45565b1115613e6f57505f19610b6c565b8115613e8657613e7f8385615c45565b9050610b6c565b5f613ea08787613e968789615c45565b9190910135919050565b9050838111613eb3575f19915050610b6c565b85613ebe8287615c45565b613ec9906020615c45565b1115613ed9575f19915050610b6c565b613ee38186615c45565b979650505050505050565b83613efa846020615c45565b1115613f0c57600160808201526140a0565b82815281516001816005811115613f2557613f25615467565b03613f3557602082810152614080565b6002816005811115613f4957613f49615467565b03613f875760208301515115613f6657613f6686868686866144a1565b613f72848701356145a4565b613f7d906020615c45565b6020830152614080565b6003816005811115613f9b57613f9b615467565b03613fb857613fb386868686602001515187876131b7565b614080565b6004816005811115613fcc57613fcc615467565b0361400757613fec8686613fe1876020615c45565b878a013587876131b7565b602082602001818151613fff9190615c45565b905250614080565b600581600581111561401b5761401b615467565b1461402857614028615aef565b6140568686856040015187602061403f9190615c45565b6140499190615c45565b86602001515187876131b7565b614061846020615c45565b825261406f848701356145a4565b61407a906020615c45565b60208301525b602082015185906140919086615c45565b11156110165760016080830152505b5050505050565b5f606081806140be876140b987615cfb565b6145ba565b915091506140cc8686614704565b826040018181516140dd9190615e21565b6001600160801b0390811690915260208401516040850151908216911611905061411957600161410e888385614812565b935093505050614122565b5f879350935050505b935093915050565b5f5f601f83116141445761413f836020615a39565b614146565b5f5b614151906008615d7f565b5f19901b9392505050565b60408051610100810182525f80825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052906141a583615cfb565b60f881901c835260ff60f082901c811660208086019190915260e883901c8216604086015260e083901c909116606085015260c082811c63ffffffff908116608087015260a084811c909116908601526001600160a01b038316908501528451919250101561421c57604083015160601c60e08301525b50919050565b5f5f5f846060015160ff16856020015160ff161161424457846060015161424a565b84602001515b60ff1690506012811161425e576012614260565b805b90505f856020015160ff16826142769190615a39565b61428190600a615f1b565b6142b7898988604001518a5f015160ff16815181106142a2576142a261592e565b60200260200101515f01519190910135919050565b6142c19190615d7f565b90505f866060015160ff16836142d79190615a39565b6142e290600a615f1b565b6143048a8a89604001518b6040015160ff16815181106142a2576142a261592e565b61430e9190615d7f565b90505f61431c601285615a39565b61432790600a615f1b565b60c08901519091505f906001600160a01b031661434e5761434985600a615f1b565b6143bd565b818960c001516001600160a01b03166398d5fdca6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561438f573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906143b39190615f26565b6143bd9190615d7f565b60e08a01519091505f906001600160a01b03166143e4576143df86600a615f1b565b614453565b828a60e001516001600160a01b03166398d5fdca6040518163ffffffff1660e01b8152600401602060405180830381865afa158015614425573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906144499190615f26565b6144539190615d7f565b90505f61446187600a615f1b565b90508061446e8488615d7f565b6144789190615d6c565b9850806144858387615d7f565b61448f9190615d6c565b97505050505050505094509492505050565b6020820151516001606083018190526080830152806001600160401b038111156144cd576144cd614ee1565b60405190808252806020026020018201604052801561450657816020015b6144f3614a6f565b8152602001906001900390816144eb5790505b5060408301525f5b8181101561459b5761455d878787876020015185815181106145325761453261592e565b6020026020010151876040015186815181106145505761455061592e565b6020026020010151613eee565b8260800151801561458c57508260400151818151811061457f5761457f61592e565b6020026020010151608001515b1515608084015260010161450e565b50505050505050565b5f601f196145b383601f615c45565b1692915050565b604080516080810182525f80825260208201819052918101829052606081019190915282515f905b8082101561461957838583815181106145fd576145fd61592e565b60200260200101515f01510315614619578160010191506145e2565b808210156146bb5760405180608001604052808581526020018684815181106146445761464461592e565b6020026020010151602001516001600160801b031681526020018684815181106146705761467061592e565b6020026020010151604001516001600160801b0316815260200186848151811061469c5761469c61592e565b6020026020010151606001516001600160401b031681525092506146fc565b5f5f6146c78642614885565b604080516080810182528981526001600160801b0390931660208401525f908301526001600160401b03166060820152945050505b509250929050565b5f60208251111561480b575f604083015160601c90505f8360348151811061472e5761472e61592e565b602001015160f81c60f81b60f81c90505f846035815181106147525761475261592e565b602001015160f81c60f81b60f81c90505f836001600160a01b03166398d5fdca6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561479f573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906147c39190615f26565b90506147d0826012615f3d565b6147db90600a615f56565b6147e684600a615f56565b6147f0838a615d7f565b6147fa9190615d7f565b6148049190615d6c565b9650505050505b5090919050565b82516060905f848214614825575f614828565b60015b6148359060ff1683615c45565b905060405192506020600182010283016040528083526020830160208701602084028082845e505050838386815181106148715761487161592e565b602002602001018190525050509392505050565b5f5f61492061491a856040805160a0810182525f80825260208201819052918101829052606081018290526080810191909152505f908152606a60209081526040918290208054600190910154835160a0810185526001600160801b038084168252608093841c948201949094526001600160401b038216818601529381901c909216606084015260c09190911c9082015290565b8461492c565b915091505b9250929050565b5f5f83604001516001600160401b03165f148061496d5750836040015184608001516149589190615f64565b6001600160401b0316836001600160401b0316105b1561498357505060608201516080830151614925565b5f84604001518560800151856149999190615f83565b6149a39190615fa2565b905084602001516001600160801b031685606001516001600160801b03161015614a1e5784516149dd906001600160401b03831690615fcf565b85606001516149ec9190615e21565b925084602001516001600160801b0316836001600160801b031610614a15578460200151614a17565b825b9250614a26565b846060015192505b6040850151614a359082615ff1565b8560800151614a449190615f64565b9150509250929050565b6040805160608101909152805f5b8152602001606081526020015f81525090565b6040518060a001604052805f81526020015f8152602001606081526020015f151581526020015f151581525090565b6040805160808101909152805f8152602001606081526020015f8152602001606081525090565b6040805160608101909152805f614a5c565b80356001600160801b0381168114614aed575f5ffd5b919050565b80356001600160401b0381168114614aed575f5ffd5b5f5f5f5f60808587031215614b1b575f5ffd5b84359350614b2b60208601614ad7565b9250614b3960408601614ad7565b9150614b4760608601614af2565b905092959194509250565b6001600160a01b0381168114611a2c575f5ffd5b5f5f60408385031215614b77575f5ffd5b823591506020830135614b8981614b52565b809150509250929050565b5f60208284031215614ba4575f5ffd5b81356117c281614b52565b5f5f83601f840112614bbf575f5ffd5b5081356001600160401b03811115614bd5575f5ffd5b6020830191508360208260051b8501011115614925575f5ffd5b803560048110614aed575f5ffd5b5f5f5f5f5f60808688031215614c11575f5ffd5b853594506020860135614c2381614b52565b935060408601356001600160401b03811115614c3d575f5ffd5b614c4988828901614baf565b9094509250614c5c905060608701614bef565b90509295509295909350565b5f5f60408385031215614c79575f5ffd5b8235614c8481614b52565b946020939093013593505050565b80356001600160e01b031981168114614aed575f5ffd5b5f5f5f60608486031215614cbb575f5ffd5b8335614cc681614b52565b9250614cd460208501614c92565b91506040840135614ce481614b52565b809150509250925092565b5f60208284031215614cff575f5ffd5b5035919050565b6001600160a01b0391909116815260200190565b5f5f83601f840112614d2a575f5ffd5b5081356001600160401b03811115614d40575f5ffd5b602083019150836020828501011115614925575f5ffd5b60028110611a2c575f5ffd5b8015158114611a2c575f5ffd5b5f5f5f5f5f5f5f60c0888a031215614d86575f5ffd5b8735614d9181614b52565b96506020880135955060408801356001600160401b03811115614db2575f5ffd5b614dbe8a828b01614d1a565b9096509450506060880135614dd281614d57565b92506080880135915060a0880135614de981614d63565b8091505092959891949750929550565b5f81518084528060208401602086015e5f602082860101526020601f19601f83011685010191505092915050565b8215158152604060208201525f6126f86040830184614df9565b5f5f5f5f5f60808688031215614e55575f5ffd5b8535614e6081614b52565b94506020860135935060408601356001600160401b03811115614e81575f5ffd5b614e8d88828901614d1a565b9094509250506060860135614ea181614d57565b809150509295509295909350565b5f5f5f60608486031215614ec1575f5ffd5b833592506020840135614ed381614b52565b915061261360408501614c92565b634e487b7160e01b5f52604160045260245ffd5b604051608081016001600160401b0381118282101715614f1757614f17614ee1565b60405290565b60405160a081016001600160401b0381118282101715614f1757614f17614ee1565b604051601f8201601f191681016001600160401b0381118282101715614f6757614f67614ee1565b604052919050565b5f6001600160401b03821115614f8757614f87614ee1565b5060051b60200190565b803560ff81168114614aed575f5ffd5b803560068110614aed575f5ffd5b803560208110614aed575f5ffd5b5f6001600160401b03821115614fd557614fd5614ee1565b50601f01601f191660200190565b5f82601f830112614ff2575f5ffd5b813561500561500082614fbd565b614f3f565b818152846020838601011115615019575f5ffd5b816020850160208301375f918101602001919091529392505050565b5f5f5f5f5f60a08688031215615049575f5ffd5b85359450602086013561505b81614b52565b935061506960408701614c92565b925060608601356001600160401b03811115615083575f5ffd5b8601601f81018813615093575f5ffd5b80356150a161500082614f6f565b8082825260208201915060208360051b85010192508a8311156150c2575f5ffd5b602084015b8381101561516d5780356001600160401b038111156150e4575f5ffd5b85016080818e03601f190112156150f9575f5ffd5b615101614ef5565b61510d60208301614f91565b815261511b60408301614fa1565b602082015261512c60608301614faf565b604082015260808201356001600160401b03811115615149575f5ffd5b6151588f602083860101614fe3565b606083015250845250602092830192016150c7565b509450614c5c9250505060808701614bef565b5f5f5f5f5f60608688031215615194575f5ffd5b853561519f81614b52565b945060208601356001600160401b038111156151b9575f5ffd5b6151c588828901614baf565b90955093505060408601356001600160401b038111156151e3575f5ffd5b6151ef88828901614baf565b969995985093965092949392505050565b5f60208284031215615210575f5ffd5b81356001600160401b03811115615225575f5ffd5b6126f884828501614fe3565b5f5f5f5f5f5f60c08789031215615246575f5ffd5b8635955061525660208801614ad7565b945061526460408801614ad7565b935061527260608801614ad7565b925061528060808801614af2565b915061528e60a08801614af2565b90509295509295509295565b5f5f5f5f608085870312156152ad575f5ffd5b8435935060208501356152bf81614b52565b92506152cd60408601614c92565b9150614b4760608601614bef565b604080825283519082018190525f9060208501906060840190835b8181101561531d5783516001600160a01b03168352602093840193909201916001016152f6565b50506001600160a01b039490941660209390930192909252509092915050565b5f5f5f6040848603121561534f575f5ffd5b83356001600160401b03811115615364575f5ffd5b61537086828701614d1a565b909790965060209590950135949350505050565b5f5f60408385031215615395575f5ffd5b82356153a081614b52565b91506020830135614b8981614b52565b5f5f5f5f5f60a086880312156153c4575f5ffd5b85356153cf81614b52565b9450602086013593506153e460408701614af2565b92506153f260608701614af2565b9150614c5c60808701614ad7565b602081525f6117c26020830184614df9565b9586526001600160801b0394851660208701529284166040860152921660608401526001600160401b0391821660808401521660a082015260c00190565b9182526001600160a01b0316602082015260400190565b634e487b7160e01b5f52602160045260245ffd5b6006811061548b5761548b615467565b9052565b6020811061548b5761548b615467565b5f5f8335601e198436030181126154b4575f5ffd5b83016020810192503590506001600160401b038111156154d2575f5ffd5b803603821315614925575f5ffd5b81835281816020850137505f828201602090810191909152601f909101601f19169091010190565b5f8235607e1983360301811261551c575f5ffd5b90910192915050565b602080825281018290525f6040600584901b8301810190830185835b868110156155d957858403603f1901835261555c8289615508565b60ff61556782614f91565b16855261557660208201614fa1565b615583602087018261547b565b5061559060408201614faf565b61559d604087018261548f565b506155ab606082018261549f565b9150608060608701526155c26080870183836154e0565b955050506020928301929190910190600101615541565b50919695505050505050565b5f602082840312156155f5575f5ffd5b81516117c281614b52565b6004811061548b5761548b615467565b8581526001600160a01b038516602082015260806040820181905281018390525f60a0600585901b8301810190830186835b878110156156da57858403609f1901835261565d828a615508565b60ff61566882614f91565b16855261567760208201614fa1565b615684602087018261547b565b5061569160408201614faf565b61569e604087018261548f565b506156ac606082018261549f565b9150608060608701526156c36080870183836154e0565b955050506020928301929190910190600101615642565b50505080915050611dda6060830184615600565b6002811061548b5761548b615467565b60018060a01b0386168152846020820152608060408201525f6157256080830185876154e0565b9050611dda60608301846156ee565b5f5f60408385031215615745575f5ffd5b825161575081614d63565b60208401519092506001600160401b0381111561576b575f5ffd5b8301601f8101851361577b575f5ffd5b805161578961500082614fbd565b81815286602083850101111561579d575f5ffd5b8160208401602083015e5f602083830101528093505050509250929050565b5f602082016020835280845180835260408501915060408160051b8601019250602086015f5b8281101561585357603f19878603018452815160ff8151168652602081015161580e602088018261547b565b506040810151615821604088018261548f565b50606081015190506080606087015261583d6080870182614df9565b95505060209384019391909101906001016157e2565b50929695505050505050565b5f60a0820187835260018060a01b038716602084015263ffffffff60e01b8616604084015260a0606084015280855180835260c08501915060c08160051b8601019250602087015f5b828110156159195760bf19878603018452815160ff815116865260208101516158d4602088018261547b565b5060408101516158e7604088018261548f565b5060608101519050608060608701526159036080870182614df9565b95505060209384019391909101906001016158a8565b5050505080915050611dda6080830184615600565b634e487b7160e01b5f52603260045260245ffd5b5f60208284031215615952575f5ffd5b81356117c281614d63565b5f5f5f6060848603121561596f575f5ffd5b835161597a81614b52565b602085015190935061598b81614b52565b6040850151909250614ce481614b52565b6001600160a01b03831681526040602082018190525f906126f890830184614df9565b8481526001600160a01b03841660208201526001600160e01b03198316604082015260808101610b6c6060830184615600565b5f60208284031215615a02575f5ffd5b81516117c281614d63565b634e487b7160e01b5f52601160045260245ffd5b5f60018201615a3257615a32615a0d565b5060010190565b81810381811115610b2957610b29615a0d565b818382375f9101908152919050565b9485526001600160a01b039390931660208501526001600160401b0391821660408501521660608301526001600160801b0316608082015260a00190565b80356001600160e01b03198116906004841015615aca576001600160e01b0319600485900360031b81901b82161691505b5092915050565b6040810160198410615ae557615ae5615467565b9281526020015290565b634e487b7160e01b5f52600160045260245ffd5b6001600160801b038281168282160390811115610b2957610b29615a0d565b5f5f85851115615b30575f5ffd5b83861115615b3c575f5ffd5b5050820193919092039150565b80356020831015610b29575f19602084900360031b1b1692915050565b5f60208284031215615b76575f5ffd5b81516001600160401b03811115615b8b575f5ffd5b8201601f81018413615b9b575f5ffd5b8051615ba961500082614f6f565b80828252602082019150602060a08402850101925086831115615bca575f5ffd5b6020840193505b82841015611dda5760a08488031215615be8575f5ffd5b615bf0614f1d565b8451615bfb81614d57565b81526020850151615c0b81614b52565b60208281019190915260408681015190830152606080870151908301526080808701519083015290835260a0909401939190910190615bd1565b80820180821115610b2957610b29615a0d565b80356001600160f81b03198116906001841015615aca576001600160f81b031960019490940360031b84901b1690921692915050565b838152604060208201525f610b6c6040830184866154e0565b5f82518060208501845e5f920191825250919050565b805160208201516001600160e01b0319811691906004821015615cf4576001600160e01b0319600483900360031b81901b82161692505b5050919050565b8051602080830151919081101561421c575f1960209190910360031b1b16919050565b805160208201516001600160f01b0319811691906002821015615cf4576001600160f01b031960029290920360031b82901b161692915050565b634e487b7160e01b5f52601260045260245ffd5b5f82615d7a57615d7a615d58565b500490565b8082028115828204841417610b2957610b29615a0d565b60018060a01b038916815287602082015260e060408201525f615dbd60e08301888a6154e0565b9050615dcc60608301876156ee565b608082019490945260a08101929092526001600160a01b03191660c09091015295945050505050565b5f5f60408385031215615e06575f5ffd5b8251615e1181614d63565b6020939093015192949293505050565b6001600160801b038181168382160190811115610b2957610b29615a0d565b6001815b600184111561412257808504811115615e5f57615e5f615a0d565b6001841615615e6d57908102905b60019390931c928002615e44565b5f82615e8957506001610b29565b81615e9557505f610b29565b8160018114615eab5760028114615eb557615ed1565b6001915050610b29565b60ff841115615ec657615ec6615a0d565b50506001821b610b29565b5060208310610133831016604e8410600b8410161715615ef4575081810a610b29565b615f005f198484615e40565b805f1904821115615f1357615f13615a0d565b029392505050565b5f6117c28383615e7b565b5f60208284031215615f36575f5ffd5b5051919050565b60ff8181168382160190811115610b2957610b29615a0d565b5f6117c260ff841683615e7b565b6001600160401b038181168382160190811115610b2957610b29615a0d565b6001600160401b038281168282160390811115610b2957610b29615a0d565b5f6001600160401b03831680615fba57615fba615d58565b806001600160401b0384160491505092915050565b6001600160801b038181168382160290811690818114615aca57615aca615a0d565b6001600160401b038181168382160290811690818114615aca57615aca615a0d56fe82eaf0fca2207f91f5027fcf68136c84edb7e928c081c42aa5bbc2a771c7d37676e6093c136cd7faa5a6d92b2b633f3b4595abd4a529b7a13917398355fea694a2646970667358221220fac56ea5fa26d4d7fb033acc08c390e5dd71873d16b90f44131f0bd5102297c964736f6c634300081e003382eaf0fca2207f91f5027fcf68136c84edb7e928c081c42aa5bbc2a771c7d376"

function createEIP1193(
  chainId: number | undefined,
  provider: EthereumProvider,
  signer: HardhatEthersSigner
): EIP1193Provider {
  return {
    request: async ({ method, params }) => {
      if (method == "eth_sendTransaction") {
        const { hash } = await signer.sendTransaction((params as any[])[0])
        return hash
      }

      return provider.request({ method, params })
    },
  }
}
