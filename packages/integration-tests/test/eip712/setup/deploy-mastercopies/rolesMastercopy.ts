import assert from "assert"
import hre from "hardhat"
import { HardhatEthersSigner } from "@nomicfoundation/hardhat-ethers/signers"
import { Interface } from "ethers"

import { deployMastercopy, EIP1193Provider } from "@gnosis-guild/zodiac-core"
import { EthereumProvider } from "hardhat/types"

export const address = "0x3F363f5b430F4C4fd47787224C0EFa7Da04De7A6"

export async function deployRolesMastercopy(signer: HardhatEthersSigner) {
  const provider = createEIP1193(
    hre.network.config.chainId,
    hre.network.provider,
    signer
  )

  {
    const { address, noop } = await deployMastercopy({
      factory: "0xce0042b868300000d44a59004da54a005ffdcf9f",
      bytecode: conditionsTransformBytecode,
      constructorArgs: {
        types: [],
        values: [],
      },
      salt: "0x0000000000000000000000000000000000000000000000000000000000000000",
      provider,
    })
    console.log(address)
  }

  {
    const { address: rolesAddress, noop } = await deployMastercopy({
      factory: "0xce0042b868300000d44a59004da54a005ffdcf9f",
      bytecode: rolesBytecode,
      constructorArgs: {
        types: ["address", "address", "address"],
        values: [
          "0x0000000000000000000000000000000000000001",
          "0x0000000000000000000000000000000000000001",
          "0x0000000000000000000000000000000000000001",
        ],
      },
      salt: "0x0000000000000000000000000000000000000000000000000000000000000000",
      provider,
    })
    assert(address == rolesAddress)
  }
}

export const rolesModMastercopy = {
  address: "0x3F363f5b430F4C4fd47787224C0EFa7Da04De7A6",
  iface: Interface.from([
    "function allowFunction(bytes32 roleKey, address targetAddress, bytes4 selector, uint8 options)",
    "function allowTarget(bytes32 roleKey, address targetAddress, uint8 options)",
    "function allowances(bytes32) view returns (uint128 refill, uint128 maxRefill, uint64 period, uint128 balance, uint64 timestamp)",
    "function assignRoles(address module, bytes32[] roleKeys, bool[] memberOf)",
    "function avatar() view returns (address)",
    "function consumed(address, bytes32) view returns (bool)",
    "function defaultRoles(address) view returns (bytes32)",
    "function disableModule(address prevModule, address module)",
    "function enableModule(address module)",
    "function execTransactionFromModule(address to, uint256 value, bytes data, uint8 operation) returns (bool success)",
    "function execTransactionFromModuleReturnData(address to, uint256 value, bytes data, uint8 operation) returns (bool success, bytes returnData)",
    "function execTransactionWithRole(address to, uint256 value, bytes data, uint8 operation, bytes32 roleKey, bool shouldRevert) returns (bool success)",
    "function execTransactionWithRoleReturnData(address to, uint256 value, bytes data, uint8 operation, bytes32 roleKey, bool shouldRevert) returns (bool success, bytes returnData)",
    "function getModulesPaginated(address start, uint256 pageSize) view returns (address[] array, address next)",
    "function invalidate(bytes32 hash)",
    "function isModuleEnabled(address _module) view returns (bool)",
    "function moduleTxHash(bytes data, bytes32 salt) view returns (bytes32)",
    "function owner() view returns (address)",
    "function renounceOwnership()",
    "function revokeFunction(bytes32 roleKey, address targetAddress, bytes4 selector)",
    "function revokeTarget(bytes32 roleKey, address targetAddress)",
    "function scopeFunction(bytes32 roleKey, address targetAddress, bytes4 selector, (uint8 parent, uint8 paramType, uint8 operator, bytes compValue)[] conditions, uint8 options)",
    "function scopeTarget(bytes32 roleKey, address targetAddress)",
    "function setAllowance(bytes32 key, uint128 balance, uint128 maxRefill, uint128 refill, uint64 period, uint64 timestamp)",
    "function setAvatar(address _avatar)",
    "function setDefaultRole(address module, bytes32 roleKey)",
    "function setTarget(address _target)",
    "function setTransactionUnwrapper(address to, bytes4 selector, address adapter)",
    "function setUp(bytes initParams)",
    "function transferOwnership(address newOwner)",
    "function unwrappers(bytes32) view returns (address)",
  ]),
}

const conditionsTransformBytecode =
  "0x61329d610034600b8282823980515f1a607314602857634e487b7160e01b5f525f60045260245ffd5b305f52607381538281f3fe7300000000000000000000000000000000000000003014608060405260043610610034575f3560e01c806317024b0514610038575b5f5ffd5b818015610043575f5ffd5b50610057610052366004612eea565b610073565b6040516001600160a01b03909116815260200160405180910390f35b5f61007d826100ca565b6100868261013a565b61008e612dda565b610098835f6101f4565b156100aa576100a7835f6102c8565b90505b5f6100b584836104c9565b90505f6100c182610573565b95945050505050565b6100d38161068c565b6100dc81610724565b5f5b81518110156101125761010a8282815181106100fc576100fc61302a565b6020026020010151826107e4565b6001016100de565b5061011c8161101a565b61012581611217565b61012e816115df565b6101378161167a565b50565b80515f5b818110156101ef57601083828151811061015a5761015a61302a565b602002602001015160400151601f8111156101775761017761303e565b14801561018b5750610189838261176d565b155b156101e7575f8382815181106101a3576101a361302a565b60200260200101516060015190505f81519050602082019150602081038252818584815181106101d5576101d561302a565b60200260200101516060018190525050505b60010161013e565b505050565b5f808383815181106102085761020861302a565b60200260200101516020015160058111156102255761022561303e565b14610232575060016102c2565b5f61023e836001613066565b90505b83518110156102bd578284828151811061025d5761025d61302a565b60200260200101515f015160ff160361028e5761027a84826101f4565b156102895760019150506102c2565b6102b5565b828482815181106102a1576102a161302a565b60200260200101515f015160ff16116102bd575b600101610241565b505f90505b92915050565b6102d0612dda565b5f6102db84846118a9565b90505f6102e8858561191c565b90505f5f6102f687876119f5565b9250509150838015610306575082155b156103205761031587836102c8565b9450505050506102c2565b83801561032a5750825b610351578686815181106103405761034061302a565b602002602001015160200151610354565b60025b859060058111156103675761036761303e565b9081600581111561037a5761037a61303e565b9052506004855160058111156103925761039261303e565b14801561039d575082155b6103a757806103aa565b60015b6001600160401b038111156103c1576103c1612e00565b6040519080825280602002602001820160405280156103fa57816020015b6103e7612dda565b8152602001906001900390816103df5790505b5060208601525f5b85602001515181101561044b576104228861041d8386613066565b6102c8565b866020015182815181106104385761043861302a565b6020908102919091010152600101610402565b506005855160058111156104615761046161303e565b036104ae575f8787815181106104795761047961302a565b602002602001015160600151905080515f146104a05761049881613079565b60f01c6104a3565b60045b61ffff166040870152505b6104b88787611a94565b151560608601525050505092915050565b60605f6104d583611b91565b6104de85611bb2565b6104e9906002613066565b6104f39190613066565b9050806001600160401b0381111561050d5761050d612e00565b6040519080825280601f01601f191660200182016040528015610537576020820181803683370190505b5091506002610547858483611cf4565b6105519082613066565b905061055e81845f612048565b5061056a8484836120cb565b50505092915050565b5f5f61057e8361228e565b90506105e0818051602091820120604080516001600160f81b03198185015273ce0042b868300000d44a59004da54a005ffdcf9f60601b60218201525f6035820152605580820193909352815180820390930183526075019052805191012090565b9150813b5f8190036106855760405163257b1f8160e11b815273ce0042b868300000d44a59004da54a005ffdcf9f90634af63f02906106259085905f906004016130b3565b6020604051808303815f875af1158015610641573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061066591906130ef565b6001600160a01b0316836001600160a01b03161461068557610685613115565b5050919050565b5f5f5b82518110156106d257808382815181106106ab576106ab61302a565b60200260200101515f015160ff16036106ca576106c782613129565b91505b60010161068f565b508060011415806107025750815f815181106106f0576106f061302a565b60200260200101515f015160ff165f14155b1561072057604051632f48858160e21b815260040160405180910390fd5b5050565b805160015b818110156101ef578281815181106107435761074361302a565b60200260200101515f015160ff168360018361075f9190613141565b8151811061076f5761076f61302a565b60200260200101515f015160ff16111561079c57604051638484738160e01b815260040160405180910390fd5b808382815181106107af576107af61302a565b60200260200101515f015160ff1611156107dc57604051638484738160e01b815260040160405180910390fd5b600101610729565b6040820151602083015160608401515f83601f8111156108065761080661303e565b0361083c576060850151511561083757604051632d6ee65d60e21b8152600481018590526024015b60405180910390fd5b611013565b600183601f8111156108505761085061303e565b148061086d5750600283601f81111561086b5761086b61303e565b145b156108cd575f8260058111156108855761088561303e565b146108a65760405163de10075b60e01b81526004810185905260240161082e565b6060850151511561083757604051632d6ee65d60e21b81526004810185905260240161082e565b600483601f8111156108e1576108e161303e565b0361093e575f5b8260058111156108fa576108fa61303e565b1461091b5760405163de10075b60e01b81526004810185905260240161082e565b80511561083757604051632d6ee65d60e21b81526004810185905260240161082e565b600583601f8111156109525761095261303e565b03610a6757600382600581111561096b5761096b61303e565b1415801561098b575060048260058111156109885761098861303e565b14155b80156109a9575060058260058111156109a6576109a661303e565b14155b156109ca5760405163de10075b60e01b81526004810185905260240161082e565b60058260058111156109de576109de61303e565b0361091b575f6002825110156109f4575f610a01565b6109fd82613079565b60f01c5b90505f82515f1480610a14575082516002145b80610a3d5750610a25826002613154565b61ffff168351148015610a3d575060208261ffff1611155b905080610a6057604051632d6ee65d60e21b81526004810187905260240161082e565b5050611013565b600683601f811115610a7b57610a7b61303e565b1480610a985750600783601f811115610a9657610a9661303e565b145b15610aa45760046108e8565b600883601f811115610ab857610ab861303e565b03610ac45760046108e8565b600d83601f811115610ad857610ad861303e565b03610bac576001826005811115610af157610af161303e565b14158015610b1157506002826005811115610b0e57610b0e61303e565b14155b15610b325760405163de10075b60e01b81526004810185905260240161082e565b8051600314610b5757604051632d6ee65d60e21b81526004810185905260240161082e565b5f81600281518110610b6b57610b6b61302a565b016020015160f81c9050801580610b85575060208160ff16115b15610ba657604051632d6ee65d60e21b81526004810186905260240161082e565b50611013565b600f83601f811115610bc057610bc061303e565b03610bcc5760016108e8565b601083601f811115610be057610be061303e565b03610cb1576001826005811115610bf957610bf961303e565b14158015610c1957506002826005811115610c1657610c1661303e565b14155b8015610c3757506003826005811115610c3457610c3461303e565b14155b8015610c5557506004826005811115610c5257610c5261303e565b14155b15610c765760405163de10075b60e01b81526004810185905260240161082e565b80511580610c90575060208151610c8d919061316e565b15155b1561083757604051632d6ee65d60e21b81526004810185905260240161082e565b601183601f811115610cc557610cc561303e565b1480610ce25750601283601f811115610ce057610ce061303e565b145b80610cfe5750601383601f811115610cfc57610cfc61303e565b145b80610d1a5750601483601f811115610d1857610d1861303e565b145b15610d7a5760015b826005811115610d3457610d3461303e565b14610d555760405163de10075b60e01b81526004810185905260240161082e565b805160201461083757604051632d6ee65d60e21b81526004810185905260240161082e565b601583601f811115610d8e57610d8e61303e565b03610e0c576001826005811115610da757610da761303e565b14158015610dc757506002826005811115610dc457610dc461303e565b14155b15610de85760405163de10075b60e01b81526004810185905260240161082e565b600481511080610c9057506002808251610e029190613141565b610c8d919061316e565b601683601f811115610e2057610e2061303e565b03610e4a57805160201461083757604051632d6ee65d60e21b81526004810185905260240161082e565b601c83601f811115610e5e57610e5e61303e565b03610f3b5760015b826005811115610e7857610e7861303e565b14610e995760405163de10075b60e01b81526004810185905260240161082e565b8051602014158015610ead57508051603614155b15610ece57604051632d6ee65d60e21b81526004810185905260240161082e565b805160360361083757601281603481518110610eec57610eec61302a565b016020015160f81c1180610f1a5750601281603581518110610f1057610f1061302a565b016020015160f81c115b1561083757604051631de9d6ef60e01b81526004810185905260240161082e565b601d83601f811115610f4f57610f4f61303e565b03610f5a575f610e66565b601e83601f811115610f6e57610f6e61303e565b03610f79575f610d22565b601783601f811115610f8d57610f8d61303e565b03610ff7575f826005811115610fa557610fa561303e565b14610fc65760405163de10075b60e01b81526004810185905260240161082e565b602081511080610c90575060348151111561083757604051632d6ee65d60e21b81526004810185905260240161082e565b604051630a7d7b8960e41b81526004810185905260240161082e565b5050505050565b80515f5b818110156101ef57601d83828151811061103a5761103a61302a565b602002602001015160400151601f8111156110575761105761303e565b14806110915750601e8382815181106110725761107261302a565b602002602001015160400151601f81111561108f5761108f61303e565b145b156110f557808382815181106110a9576110a961302a565b60200260200101515f015160ff16146110f0575f6110c784836122c6565b925050811590506110ee57604051631d40413960e11b81526004810183905260240161082e565b505b61120f565b60048382815181106111095761110961302a565b602002602001015160400151601f8111156111265761112661303e565b03611197578083828151811061113e5761113e61302a565b60200260200101515f015160ff16146110f0575f5f61115d85846122c6565b92505091505f82118061116f57505f81115b1561119057604051631d40413960e11b81526004810184905260240161082e565b505061120f565b60178382815181106111ab576111ab61302a565b602002602001015160400151601f8111156111c8576111c861303e565b0361120f57808382815181106111e0576111e061302a565b60200260200101515f015160ff160361120f57604051631d40413960e11b81526004810182905260240161082e565b60010161101e565b5f5b8151811015610720575f8282815181106112355761123561302a565b602002602001015190505f5f61124b85856119f5565b90935091505f9050836020015160058111156112695761126961303e565b0361137957601d8360400151601f8111156112865761128661303e565b14806112a75750601e8360400151601f8111156112a5576112a561303e565b145b806112c7575060178360400151601f8111156112c5576112c561303e565b145b806112e7575060048360400151601f8111156112e5576112e561303e565b145b80156112f257508115155b156113135760405163f3379ddd60e01b81526004810185905260240161082e565b60018360400151601f81111561132b5761132b61303e565b148061134c575060028360400151601f81111561134a5761134a61303e565b145b1561137457815f036113745760405163f3379ddd60e01b81526004810185905260240161082e565b6115d4565b6001836020015160058111156113915761139161303e565b036113fb57600d5b8360400151601f8111156113af576113af61303e565b036113d95760018211156113745760405163f3379ddd60e01b81526004810185905260240161082e565b81156113745760405163f3379ddd60e01b81526004810185905260240161082e565b6002836020015160058111156114135761141361303e565b0361141f57600d611399565b6003836020015160058111156114375761143761303e565b0361145f57805f036113745760405163f3379ddd60e01b81526004810185905260240161082e565b6005836020015160058111156114775761147761303e565b0361149f57815f036113745760405163f3379ddd60e01b81526004810185905260240161082e565b6004836020015160058111156114b7576114b761303e565b146114c4576114c4613115565b805f036114e75760405163f3379ddd60e01b81526004810185905260240161082e565b60068360400151601f8111156114ff576114ff61303e565b1480611520575060078360400151601f81111561151e5761151e61303e565b145b801561152d575081600114155b1561154e5760405163f3379ddd60e01b81526004810185905260240161082e565b60068360400151601f8111156115665761156661303e565b1480611587575060078360400151601f8111156115855761158561303e565b145b806115a7575060088360400151601f8111156115a5576115a561303e565b145b80156115b35750808214155b156115d45760405163f3379ddd60e01b81526004810185905260240161082e565b505050600101611219565b5f5b8151811015610720575f5f6115f684846119f5565b5091509150805f03611609575050611672565b5f805b8281101561166d575f61161f8286613066565b90505f61162c88836101f4565b90508380156116385750805b15611659576040516335431f5360e11b81526004810188905260240161082e565b8061166357600193505b505060010161160c565b505050505b6001016115e1565b5f5b8151811015610720575f8282815181106116985761169861302a565b602002602001015190506001601f8111156116b5576116b561303e565b8160400151601f8111156116cb576116cb61303e565b14806116ec575060028160400151601f8111156116ea576116ea61303e565b145b8061170c575060048160200151600581111561170a5761170a61303e565b145b156117505761171b8383612410565b15801561172f575061172d8383612482565b155b15611750576040516303a3183b60e61b81526004810183905260240161082e565b61175a838361250d565b61176483836125be565b5060010161167c565b5f5f8383815181106117815761178161302a565b6020026020010151602001519050600160058111156117a2576117a261303e565b8160058111156117b4576117b461303e565b036117c35760019150506102c2565b60028160058111156117d7576117d761303e565b14806117f4575060048160058111156117f2576117f261303e565b145b806118105750600581600581111561180e5761180e61303e565b145b1561181e575f9150506102c2565b83515f61182c856001613066565b90505b8181101561189d575f86828151811061184a5761184a61302a565b60200260200101515f01519050858160ff1610156118685750611895565b858160ff161115611879575061189d565b611883878361176d565b611893575f9450505050506102c2565b505b60010161182f565b506001925050506102c2565b5f60018383815181106118be576118be61302a565b602002602001015160400151601f8111156118db576118db61303e565b1480611915575060028383815181106118f6576118f661302a565b602002602001015160400151601f8111156119135761191361303e565b145b9392505050565b5f8060048484815181106119325761193261302a565b602002602001015160200151600581111561194f5761194f61303e565b1490505f61195d85856118a9565b90508115801561196b575080155b1561197a575f925050506102c2565b5f5f61198687876119f5565b92505091506001811161199f575f9450505050506102c2565b5f6119aa88846127ac565b905060015b828110156119e7576119ca896119c58387613066565b6127ac565b82146119df57600196505050505050506102c2565b6001016119af565b505f98975050505050505050565b81515f908190819081611a09866001613066565b90505b81811015611a8b575f878281518110611a2757611a2761302a565b60200260200101515f015160ff169050868103611a7457845f03611a49578195505b611a5285613129565b9450611a5e88836101f4565b15611a6f57611a6c84613129565b93505b611a82565b86811115611a825750611a8b565b50600101611a0c565b50509250925092565b5f5f838381518110611aa857611aa861302a565b602002602001015160200151905060026005811115611ac957611ac961303e565b816005811115611adb57611adb61303e565b1480611af857506004816005811115611af657611af661303e565b145b80611b1457506005816005811115611b1257611b1261303e565b145b15611b22575f9150506102c2565b5f611b2e846001613066565b90505b8451811015611b865783858281518110611b4d57611b4d61302a565b60200260200101515f015160ff16148015611b6f5750611b6d8582611a94565b155b15611b7e575f925050506102c2565b600101611b31565b506001949350505050565b5f6003611b9d836127bf565b611ba7919061318d565b6102c2906002613066565b80515f90611bc160058261318d565b611bcc906002613066565b91505f5b8181101561068557611bfa848281518110611bed57611bed61302a565b6020026020010151612810565b15611cec57611c0a600284613066565b92506010848281518110611c2057611c2061302a565b602002602001015160400151601f811115611c3d57611c3d61303e565b03611c5457611c4d602084613066565b9250611cec565b6005848281518110611c6857611c6861302a565b6020026020010151602001516005811115611c8557611c8561303e565b03611cbf576002848281518110611c9e57611c9e61302a565b60200260200101516060015151611cb59190613141565b611c4d9084613066565b838181518110611cd157611cd161302a565b6020026020010151606001515183611ce99190613066565b92505b600101611bd0565b5f5f829050611d0585518585612048565b611d0f9084613066565b92505f60058651611d20919061318d565b611d2a9085613066565b90505f5b8651811015612033575f5f611d43898461287d565b92509250505f898481518110611d5b57611d5b61302a565b602002602001015190505f611d6f82612810565b905060038b8681518110611d8557611d8561302a565b602002602001015160400151601f811115611da257611da261303e565b60ff16901b60f81b8a8a611db581613129565b9b5081518110611dc757611dc761302a565b60200101906001600160f81b03191690815f1a9053508360f81b8a8a80611ded90613129565b9b5081518110611dff57611dff61302a565b60200101906001600160f81b03191690815f1a9053508260f81b8a8a80611e2590613129565b9b5081518110611e3757611e3761302a565b60200101906001600160f81b03191690815f1a90535080611e58575f611e61565b600886901c60f81b5b8a8a611e6c81613129565b9b5081518110611e7e57611e7e61302a565b60200101906001600160f81b03191690815f1a90535080611e9f575f611ea4565b8560f81b5b8a8a611eaf81613129565b9b5081518110611ec157611ec161302a565b60200101906001600160f81b03191690815f1a90535080611ee5575050505061202b565b60605f8060108560400151601f811115611f0157611f0161303e565b03611f415760608501518051602091820120604051611f24920190815260200190565b6040516020818303038152906040529250602091505f9050611f8a565b600585602001516005811115611f5957611f5961303e565b03611f7e578460600151925060028351611f739190613141565b915060029050611f8a565b505050606082015180515f5b6001600160f81b031960f083901b168d8a611fa481613129565b9b5081518110611fb657611fb661302a565b60200101906001600160f81b03191690815f1a9053508160f81b8d8a80611fdc90613129565b9b5081518110611fee57611fee61302a565b60200101906001600160f81b03191690815f1a905350808360200101898e602001018382825e506120219050828a613066565b9850505050505050505b600101611d2e565b5061203e8282613141565b9695505050505050565b5f61ffff841061205a5761205a613115565b600884901c60f81b8383815181106120745761207461302a565b60200101906001600160f81b03191690815f1a90535060f884901b8361209b846001613066565b815181106120ab576120ab61302a565b60200101906001600160f81b03191690815f1a9053506002949350505050565b5f5f6120d68561294c565b90506120e481518585612048565b6120ee9084613066565b92505f5b8151811015612274575f82828151811061210e5761210e61302a565b60200260200101516060015161ffff16600c8484815181106121325761213261302a565b60200260200101516040015162ffffff16901b8484815181106121575761215761302a565b60200260200101516080015161216d575f612172565b621000005b60158686815181106121865761218661302a565b60200260200101516020015160058111156121a3576121a361303e565b62ffffff16901b17171790506001600160f81b031960e882901b1686866121c981613129565b9750815181106121db576121db61302a565b60200101906001600160f81b03191690815f1a9053506001600160f81b031960f082901b16868661220b81613129565b97508151811061221d5761221d61302a565b60200101906001600160f81b03191690815f1a9053508060f81b86868061224390613129565b9750815181106122555761225561302a565b60200101906001600160f81b03191690815f1a905350506001016120f2565b5060038151612283919061318d565b6100c1906002613066565b60608151600161229e9190613066565b826040516020016122b09291906131a4565b6040516020818303038152906040529050919050565b5f5f5f5f8585815181106122dc576122dc61302a565b60200260200101515f015160ff1690505b5f60058783815181106123025761230261302a565b602002602001015160200151600581111561231f5761231f61303e565b1490505f60018884815181106123375761233761302a565b602002602001015160400151601f8111156123545761235461303e565b148061238e5750600288848151811061236f5761236f61302a565b602002602001015160400151601f81111561238c5761238c61303e565b145b905081156123a25761239f86613129565b95505b80156123b4576123b185613129565b94505b811580156123c0575080155b156123d1576123ce84613129565b93505b825f036123df575050612408565b8783815181106123f1576123f161302a565b60200260200101515f015160ff16925050506122ed565b509250925092565b5f5f5f61241d85856119f5565b925050915080600103612435576001925050506102c2565b5f61244086846127ac565b905060015b828110156124755761245b876119c58387613066565b821461246d575f9450505050506102c2565b600101612445565b5060019695505050505050565b5f5f5f61248f85856119f5565b92505091505f5f90505b81811015612501575f6124b08761041d8487613066565b51905060028160058111156124c7576124c761303e565b141580156124e7575060058160058111156124e4576124e461303e565b14155b156124f8575f9450505050506102c2565b50600101612499565b50600195945050505050565b600d8282815181106125215761252161302a565b602002602001015160400151601f81111561253e5761253e61303e565b14612547575050565b5f5f61255384846119f5565b9250509150805f0361257b5760405163598b82ef60e11b81526004810184905260240161082e565b5f61258685846102c8565b905060018151600581111561259d5761259d61303e565b146110135760405163598b82ef60e11b81526004810185905260240161082e565b60178282815181106125d2576125d261302a565b602002602001015160400151601f8111156125ef576125ef61303e565b146125f8575050565b5f82828151811061260b5761260b61302a565b60200260200101516060015190505f81612624906131f5565b905060f881901c60ff60e883901c1663ffffffff60c084901c81169060a085901c1681158015612658575063ffffffff8116155b1561267957604051632bb338fb60e01b81526004810188905260240161082e565b5f88888151811061268c5761268c61302a565b60200260200101515f015160ff1690505b5f8982815181106126b0576126b061302a565b60200260200101516020015160058111156126cd576126cd61303e565b036126f9578881815181106126e4576126e461302a565b60200260200101515f015160ff16905061269d565b5f6127048a836119f5565b505090505f61271c8b8860ff168461041d9190613066565b90506001815160058111156127335761273361303e565b146127545760405163e0f6621160e01b8152600481018b905260240161082e565b505f6127678b61041d60ff891685613066565b905060018151600581111561277e5761277e61303e565b1461279f5760405163e0f6621160e01b8152600481018b905260240161082e565b5050505050505050505050565b5f6119156127ba84846102c8565b612c02565b60015f5b82602001515181101561280a576127f6836020015182815181106127e9576127e961302a565b60200260200101516127bf565b6128009083613066565b91506001016127c3565b50919050565b5f60108260400151601f8111156128295761282961303e565b10158061284b5750600d8260400151601f8111156128495761284961303e565b145b806102c257506005826020015160058111156128695761286961303e565b1480156102c2575050606001515160021090565b5f80808061288c856001613066565b90505b85518110156128f4575f8682815181106128ab576128ab61302a565b60200260200101515f015160ff1690508581036128dd57835f036128cd578194505b6128d684613129565b93506128eb565b858111156128eb57506128f4565b5060010161288f565b508190505f6129038285613066565b90505b83811115612408576129228661291d600184613141565b612d0a565b156129375761293082613218565b915061293c565b612408565b61294581613218565b9050612906565b60605f612958836127bf565b90505f816001600160401b0381111561297357612973612e00565b6040519080825280602002602001820160405280156129ca57816020015b6040805160a0810182525f808252602080830182905292820181905260608201819052608082015282525f199092019101816129915790505b5090505f826001600160401b038111156129e6576129e6612e00565b604051908082528060200260200182016040528015612a1f57816020015b612a0c612dda565b815260200190600190039081612a045790505b5090505f836001600160401b03811115612a3b57612a3b612e00565b604051908082528060200260200182016040528015612a64578160200160208202803683370190505b50905085825f81518110612a7a57612a7a61302a565b60200260200101819052505f815f81518110612a9857612a9861302a565b60209081029190910101525f6001815b81831015612bf5575f858481518110612ac357612ac361302a565b602002602001015190505f858581518110612ae057612ae061302a565b602002602001015190508480612af590613129565b9550506040518060a00160405280828152602001835f01516005811115612b1e57612b1e61303e565b81526020018360200151518152602001836040015161ffff16815260200183606001511515815250888481518110612b5857612b5861302a565b60209081029190910101525f5b826020015151811015612be05782602001518181518110612b8857612b8861302a565b6020026020010151888681518110612ba257612ba261302a565b602002602001018190525083878681518110612bc057612bc061302a565b602090810291909101015284612bd581613129565b955050600101612b65565b5082612beb81613129565b9350505050612aa8565b5093979650505050505050565b5f8160200151515f03612c2257815160058111156102c2576102c261303e565b5f8260200151516001600160401b03811115612c4057612c40612e00565b604051908082528060200260200182016040528015612c69578160200160208202803683370190505b5090505f5b836020015151811015612cc657612ca184602001518281518110612c9457612c9461302a565b6020026020010151612c02565b828281518110612cb357612cb361302a565b6020908102919091010152600101612c6e565b5082516005811115612cda57612cda61303e565b604051612cec9190839060200161322d565b60405160208183030381529060405280519060200120915050919050565b5f80838381518110612d1e57612d1e61302a565b6020026020010151602001516005811115612d3b57612d3b61303e565b14612d4757505f6102c2565b5f612d53836001613066565b90505b8351811015612dd05782848281518110612d7257612d7261302a565b60200260200101515f015160ff1603612da157612d8f8482612d0a565b612d9c575f9150506102c2565b612dc8565b82848281518110612db457612db461302a565b60200260200101515f015160ff1611612dd0575b600101612d56565b5060019392505050565b6040805160808101909152805f81526060602082018190525f6040830181905291015290565b634e487b7160e01b5f52604160045260245ffd5b604051608081016001600160401b0381118282101715612e3657612e36612e00565b60405290565b604051601f8201601f191681016001600160401b0381118282101715612e6457612e64612e00565b604052919050565b803560208110612e7a575f5ffd5b919050565b5f82601f830112612e8e575f5ffd5b81356001600160401b03811115612ea757612ea7612e00565b612eba601f8201601f1916602001612e3c565b818152846020838601011115612ece575f5ffd5b816020850160208301375f918101602001919091529392505050565b5f60208284031215612efa575f5ffd5b81356001600160401b03811115612f0f575f5ffd5b8201601f81018413612f1f575f5ffd5b80356001600160401b03811115612f3857612f38612e00565b8060051b612f4860208201612e3c565b91825260208184018101929081019087841115612f63575f5ffd5b6020850192505b8383101561301f5782356001600160401b03811115612f87575f5ffd5b85016080818a03601f19011215612f9c575f5ffd5b612fa4612e14565b602082013560ff81168114612fb7575f5ffd5b8152604082013560068110612fca575f5ffd5b6020820152612fdb60608301612e6c565b604082015260808201356001600160401b03811115612ff8575f5ffd5b6130078b602083860101612e7f565b60608301525083525060209283019290910190612f6a565b979650505050505050565b634e487b7160e01b5f52603260045260245ffd5b634e487b7160e01b5f52602160045260245ffd5b634e487b7160e01b5f52601160045260245ffd5b808201808211156102c2576102c2613052565b805160208201516001600160f01b0319811691906002821015610685576001600160f01b031960029290920360031b82901b161692915050565b604081525f83518060408401528060208601606085015e5f606082850101526060601f19601f8301168401019150508260208301529392505050565b5f602082840312156130ff575f5ffd5b81516001600160a01b0381168114611915575f5ffd5b634e487b7160e01b5f52600160045260245ffd5b5f6001820161313a5761313a613052565b5060010190565b818103818111156102c2576102c2613052565b61ffff81811683821601908111156102c2576102c2613052565b5f8261318857634e487b7160e01b5f52601260045260245ffd5b500690565b80820281158282048414176102c2576102c2613052565b606360f81b815260e083901b6001600160e01b03191660018201526880600e6000396000f360b81b60058201525f600e820181905282518060208501600f85015e5f9201600f019182525092915050565b8051602080830151919081101561280a575f1960209190910360031b1b16919050565b5f8161322657613226613052565b505f190190565b8281525f602082018351602085015f5b8281101561325b57815184526020938401939091019060010161323d565b5091969550505050505056fea26469706673582212209d5e77a74c5186bd552f8609d38fce3af67a1aa44bd40e74246b0e31abd8ba6964736f6c634300081e0033"
const rolesBytecode =
  "0x608060405234801561000f575f5ffd5b5060405161641438038061641483398101604081905261002e91610329565b604080516001600160a01b03858116602083015284811682840152831660608083019190915282518083039091018152608090910190915261006f81610078565b505050506103b7565b5f54610100900460ff161580801561009657505f54600160ff909116105b806100af5750303b1580156100af57505f5460ff166001145b6101165760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b606482015260840160405180910390fd5b5f805460ff191660011790558015610137575f805461ff0019166101001790555b5f5f5f8480602001905181019061014e9190610329565b9194509250905061015e83610256565b606580546001600160a01b038085166001600160a01b03199283161790925560668054928416929091169190911790556101966102a7565b816001600160a01b0316836001600160a01b0316336001600160a01b03167f71d740fcd2b4a7ab76df6fe093ae985960dabcc06cf64811bc538bcfb695e61284604051806040016040528060058152602001640332e302e360dc1b815250604051610202929190610373565b60405180910390a45050508015610252575f805461ff0019169055604051600181527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb38474024989060200160405180910390a15b5050565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0905f90a35050565b60015f5260686020525f5160206163f45f395f51905f52546001600160a01b0316156102e65760405163dfd49ebd60e01b815260040160405180910390fd5b60015f81905260686020525f5160206163f45f395f51905f5280546001600160a01b0319169091179055565b6001600160a01b0381168114610326575f5ffd5b50565b5f5f5f6060848603121561033b575f5ffd5b835161034681610312565b602085015190935061035781610312565b604085015190925061036881610312565b809150509250925092565b60018060a01b0383168152604060208201525f82518060408401528060208501606085015e5f606082850101526060601f19601f8301168401019150509392505050565b616030806103c45f395ff3fe608060405234801561000f575f5ffd5b50600436106101f0575f3560e01c8063715018a61161011b578063b3dd25c7116100b4578063e009cfde11610079578063e009cfde1461053f578063e29dfba814610552578063f1637e571461057f578063f2fde38b14610592578063ffa1ad74146105a5575f5ffd5b8063b3dd25c7146104d2578063c6fe8747146104e5578063cc2f8452146104f8578063d4b8399214610519578063d8afba761461052c575f5ffd5b8063715018a6146104345780637508dd981461043c578063776d1a011461044f5780638bb9c5bf146104625780638da5cb5b14610475578063946d364e14610486578063957ed2b314610499578063a4f9edbf146104ac578063a8ec43ee146104bf575f5ffd5b80632d3c25471161018d5780632d3c2547146102da5780632d9ad53d14610307578063468721a71461032a5780635229073f1461033d5780635aef7de6146103505780635e7c9fe814610363578063610b5925146103fb57806366523f7d1461040e57806369ecc3cf14610421575f5ffd5b80624825f7146101f45780630172a43a14610209578063086cfca81461021c5780630920e8d21461022f5780630c6c76b814610242578063208dd1ff146102555780632916a9af146102685780632959513c1461027b5780632b99e506146102b9575b5f5ffd5b610207610202366004614aaf565b6105d6565b005b610207610217366004614b0d565b6106a4565b61020761022a366004614b3b565b610716565b61020761023d366004614ba4565b61076f565b610207610250366004614b0d565b6108ad565b610207610263366004614c0f565b610916565b610207610276366004614c50565b610961565b6102a3610289366004614c96565b606b6020525f90815260409020546001600160a01b031681565b6040516102b09190614cad565b60405180910390f35b6102cc6102c7366004614d17565b610a06565b6040516102b0929190614dce565b6102f96102e8366004614b3b565b606c6020525f908152604090205481565b6040519081526020016102b0565b61031a610315366004614b3b565b610af6565b60405190151581526020016102b0565b61031a610338366004614de8565b610b2f565b6102cc61034b366004614de8565b610b75565b6065546102a3906001600160a01b031681565b6103bc610371366004614c96565b606a6020525f9081526040902080546001909101546001600160801b0380831692600160801b90048116916001600160401b0380821692600160401b83041691600160c01b90041685565b604080516001600160801b03968716815294861660208601526001600160401b039384169085015293166060830152909116608082015260a0016102b0565b610207610409366004614b3b565b610bbf565b61020761041c366004614e56565b610cce565b61020761042f366004614c96565b610d58565b610207610daa565b61020761044a366004614fdc565b610dbd565b61020761045d366004614b3b565b610eac565b610207610470366004614c96565b610f05565b6033546001600160a01b03166102a3565b610207610494366004614c0f565b610f3f565b6102076104a7366004615127565b610f97565b6102076104ba3660046151a7565b61101e565b6102076104cd3660046151d8565b6111f3565b6102076104e0366004615241565b6113b3565b61031a6104f3366004614d17565b611433565b61050b610506366004614c0f565b61151b565b6040516102b0929190615282565b6066546102a3906001600160a01b031681565b6102f961053a3660046152e4565b6116ab565b61020761054d36600461532b565b6117c9565b61031a610560366004614c0f565b606760209081525f928352604080842090915290825290205460ff1681565b61020761058d366004615357565b6118c0565b6102076105a0366004614b3b565b6119b6565b6105c9604051806040016040528060058152602001640332e302e360dc1b81525081565b6040516102b091906153a7565b6105de611a2f565b826001600160801b03165f036105fb576001600160801b036105fd565b825b5f858152606a6020526040908190206001810180546001600160801b03808616600160801b02888216179093556001600160401b0386811667ffffffffffffffff198316179092559251939650600160c01b83041692600160401b90920416907f63d7ec44a20b176da1d60d75259d264ee67b3d8213706afa71a28f69ed8ebece90610694908890849089908990899089906153b9565b60405180910390a1505050505050565b6106ac611a2f565b5f8281526069602090815260408083206001600160a01b038516845260010190915290819020805460ff19169055517f3ccf62aacc3286173cedf5c20ec550071636a2faf0a3b28d93841736a43f822b9061070a90849084906153f7565b60405180910390a15050565b61071e611a2f565b606580546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f52ae88b092de36f87fb43fe794eb1381023b9c1bce563a871154022c63dce342905f90a35050565b610777611a2f565b5f8581526069602090815260408083206001600160a01b03881684526001908101909252909120805460ff191690911790556001600160601b03606085901b6001600160601b03191617821561084d5761084882735d1bedeece0cf01ef46a22ff44b335ad165aa2f96317024b0587876040518363ffffffff1660e01b81526004016108049291906154cc565b602060405180830381865af415801561081f573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610843919061558c565b611a89565b610856565b61085682611ab2565b5f8781526069602090815260408083208584526002019091529081902091909155517f018ad4e6ca381cf52c3d09a06369f896167ec538ccc03b8f7e452f55814af47a9061069490889088908890889088906155b7565b6108b5611a2f565b5f8281526069602090815260408083206001600160a01b038516845260010190915290819020805460ff19166002179055517f277465b84f512b759d745fab70327b693ee21ce592fca91a3f491739a25fa76a9061070a90849084906153f7565b61091e611a2f565b5f8181526069602090815260408083206001600160a01b038616845290915280822091909155515f516020615fdb5f395f51905f529061070a90839085906153f7565b610969611a2f565b60a082901c63ffffffff60401b16606084811b6001600160601b031916919091175f908152606b602090815260409182902080546001600160a01b0319166001600160a01b03868116918217909255835191881682526001600160e01b0319871692820192909252918201527f1330d96b64c7e86736f77e027ca34223dd3d1d08049281281c9d597d8098ed5991015b60405180910390a1505050565b5f60605f5f610a1486611ad5565b915091505f610a27878d8d8d8d8d611cf6565b9050610a3281611de4565b606654604051635229073f60e01b81526001600160a01b0390911690635229073f90610a6a908f908f908f908f908f906004016156a5565b5f604051808303815f875af1158015610a85573d5f5f3e3d5ffd5b505050506040513d5f823e601f3d908101601f19168201604052610aac91908101906156db565b9095509350858015610abc575084155b15610ada5760405163d27b44a960e01b815260040160405180910390fd5b610ae78388848489611e6a565b50505097509795505050505050565b5f60016001600160a01b03831614801590610b2957506001600160a01b038281165f908152606860205260409020541615155b92915050565b5f610b698686868686606c5f610b43611fc8565b6001600160a01b03166001600160a01b031681526020019081526020015f20545f611433565b90505b95945050505050565b5f6060610bb18787878787606c5f610b8b611fc8565b6001600160a01b03166001600160a01b031681526020019081526020015f20545f610a06565b915091509550959350505050565b610bc7611a2f565b6001600160a01b0381161580610be657506001600160a01b0381166001145b15610c0f5780604051635c93ff2f60e11b8152600401610c069190614cad565b60405180910390fd5b6001600160a01b038181165f908152606860205260409020541615610c495780604051632061897360e01b8152600401610c069190614cad565b60686020525f516020615fbb5f395f51905f5280546001600160a01b038381165f81815260408082208054949095166001600160a01b03199485161790945560019052835490911617909155517fecdf3a3effea5783a3c4c2140e677577666428d44ed9d474a0b3a4c9943f844090610cc3908390614cad565b60405180910390a150565b610cd6611a2f565b5f83815260696020526040812060020190610cf18484612023565b81526020019081526020015f205f90557f32a3a599b308fc900a0e6513db2ad40bf0c94367da90048a4b308d8c6b2dd6ea8383836040516109f9939291909283526001600160a01b039190911660208301526001600160e01b031916604082015260600190565b335f908152606760209081526040808320848452825291829020805460ff1916600117905590518281527f89a77869d7b8125ba16e08a92ddc8cc26fb1fa47241971167954489a5e66c2559101610cc3565b610db2611a2f565b610dbb5f612043565b565b610dc5611a2f565b6040516317024b0560e01b81525f90735d1bedeece0cf01ef46a22ff44b335ad165aa2f9906317024b0590610dfe908690600401615763565b602060405180830381865af4158015610e19573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610e3d919061558c565b9050610e498282611a89565b5f87815260696020526040812060020190610e648888612023565b81526020019081526020015f20819055507f4f6c340456f64db31a3d003c1224ba1de058557b1cdf71f21ae48ce4a4f64f528686868686604051610694959493929190615806565b610eb4611a2f565b606680546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f90cc2f570a6eb594b1580ea3e41247d2d73a55281889e86bd4ec2fc29c7e62d6905f90a35050565b5f8181526069602090815260408083203380855292528083209290925590515f516020615fdb5f395f51905f5291610cc3918491906153f7565b610f47611a2f565b6001600160a01b0382165f818152606c6020908152604091829020849055815192835282018390527f60c85b61661a191efceebca036d48b290e04a1f08dd96472b920adbdd50c64e8910161070a565b610f9f611a2f565b5f5b83811015611016575f858583818110610fbc57610fbc6158d5565b905060200201359050838383818110610fd757610fd76158d5565b9050602002016020810190610fec91906158e9565b1561100357610ffe87825f5f5f6118c0565b61100d565b61100d8782610916565b50600101610fa1565b505050505050565b5f54610100900460ff161580801561103c57505f54600160ff909116105b806110555750303b15801561105557505f5460ff166001145b6110b85760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b6064820152608401610c06565b5f805460ff1916600117905580156110d9575f805461ff0019166101001790555b5f5f5f848060200190518101906110f09190615904565b9250925092506110ff83612043565b606580546001600160a01b038085166001600160a01b0319928316179092556066805492841692909116919091179055611137612094565b816001600160a01b0316836001600160a01b0316336001600160a01b03167f71d740fcd2b4a7ab76df6fe093ae985960dabcc06cf64811bc538bcfb695e61284604051806040016040528060058152602001640332e302e360dc1b8152506040516111a3929190615943565b60405180910390a450505080156111ef575f805461ff0019169055604051600181527f7f26b83ff96e1f2b6a682f133852f6798a09c465da95921460cefb38474024989060200161070a565b5050565b6111fb611a2f565b836001600160801b03165f03611218576001600160801b0361121a565b835b9350806001600160401b03165f036112325742611234565b805b90506040518060a00160405280846001600160801b03168152602001856001600160801b03168152602001836001600160401b03168152602001866001600160801b03168152602001826001600160401b0316815250606a5f8881526020019081526020015f205f820151815f015f6101000a8154816001600160801b0302191690836001600160801b031602179055506020820151815f0160106101000a8154816001600160801b0302191690836001600160801b031602179055506040820151816001015f6101000a8154816001600160401b0302191690836001600160401b0316021790555060608201518160010160086101000a8154816001600160801b0302191690836001600160801b0316021790555060808201518160010160186101000a8154816001600160401b0302191690836001600160401b031602179055509050507f63d7ec44a20b176da1d60d75259d264ee67b3d8213706afa71a28f69ed8ebece868686868686604051610694969594939291906153b9565b6113bb611a2f565b6113c481611ab2565b5f858152606960205260408120600201906113df8686612023565b81526020019081526020015f20819055507f9603b65b11492fec54ccc3d9feb93536f804d82e12228187ff730a253fc283ee848484846040516114259493929190615966565b60405180910390a150505050565b5f5f5f61143f85611ad5565b915091505f611452868c8c8c8c8c611cf6565b905061145d81611de4565b60665460405163468721a760e01b81526001600160a01b039091169063468721a790611495908e908e908e908e908e906004016156a5565b6020604051808303815f875af11580156114b1573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906114d59190615999565b93508480156114e2575083155b156115005760405163d27b44a960e01b815260040160405180910390fd5b61150d8387848488611e6a565b505050979650505050505050565b60605f6001600160a01b03841660011480159061153e575061153c84610af6565b155b1561155e5783604051635c93ff2f60e11b8152600401610c069190614cad565b825f0361157e576040516372dbed9760e11b815260040160405180910390fd5b826001600160401b0381111561159657611596614e88565b6040519080825280602002602001820160405280156115bf578160200160208202803683370190505b506001600160a01b038086165f90815260686020526040812054929450911691505b6001600160a01b0382161580159061160357506001600160a01b038216600114155b801561160e57508381105b156116685781838281518110611626576116266158d5565b6001600160a01b039283166020918202929092018101919091529281165f90815260689093526040909220549091169080611660816159c8565b9150506115e1565b6001600160a01b0382166001146116a057826116856001836159e0565b81518110611695576116956158d5565b602002602001015191505b808352509250929050565b604080517f47e79534a245952e8b16893a336b85a3d9ea9fa8c573f3d803afb92a79469218602082015246918101919091523060608201525f9081906080016040516020818303038152906040528051906020012090505f601960f81b600160f81b837f2939aeeda3ca260200c9f7b436b19e13207547ccc65cfedc857751c5ea6d91d45f1b89896040516117419291906159f3565b6040805191829003822060208301939093528101919091526060810188905260800160408051808303601f190181529082905280516020918201206001600160f81b0319958616918301919091529290931660218401526022830152604282015260620160408051601f198184030181529190528051602090910120925050505b9392505050565b6117d1611a2f565b6001600160a01b03811615806117f057506001600160a01b0381166001145b156118105780604051635c93ff2f60e11b8152600401610c069190614cad565b6001600160a01b038281165f9081526068602052604090205481169082161461184e5780604051638b4189ff60e01b8152600401610c069190614cad565b6001600160a01b038181165f81815260686020526040808220805487861684528284208054919096166001600160a01b0319918216179095559290915281549092169055517faab4fa2b463f581b2b32cb3b7e3b704b9ce37cc209b5fb4d77e593ace40542769061070a908390614cad565b6118c8611a2f565b816001600160401b03165f036118e5576001600160401b036118e7565b815b9150806001600160801b03165f03611906576001600160801b03611908565b805b5f8581526069602090815260408083206001600160a01b038a16845290915290206001600160c01b031960c086901b1667ffffffffffffffff60801b608086901b16176001600160801b038316179055905061196385610af6565b6119705761197085610bbf565b7fc219bba489e694cb40935d0de27d36ecbe6f1e1b68a2b10c4cbf425a13b864ff84868585856040516119a7959493929190615a02565b60405180910390a15050505050565b6119be611a2f565b6001600160a01b038116611a235760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608401610c06565b611a2c81612043565b50565b6033546001600160a01b03163314610dbb5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65726044820152606401610c06565b5f816001600160a01b031660a0846003811115611aa857611aa861540e565b901b179392505050565b5f60a0826003811115611ac757611ac761540e565b600160a81b911b1792915050565b335f9081526068602052604081205481906001600160a01b0316611be4575f5f611afd6120ff565b6001600160a01b038082165f9081526068602052604090205492945090925016611b3c5733604051634a0bfec160e01b8152600401610c069190614cad565b6001600160a01b0381165f90815260676020908152604080832085845290915290205460ff1615611b8357604051639e1dc0c560e01b815260048101839052602401610c06565b6001600160a01b0381165f908152606760209081526040808320858452825291829020805460ff1916600117905590518381527f8c8e19e7e8e193118a05465d7676e82215052d3cb150628fbf598105dc2bb6ab910160405180910390a150505b5f839003611c0557604051631fb1d3e560e31b815260040160405180910390fd5b611c0d611fc8565b5f8481526069602090815260408083206001600160a01b0385168452909152812054919350819003611c5257604051631fb1d3e560e31b815260040160405180910390fd5b60c081901c421015611c7757604051631f4cbe2760e11b815260040160405180910390fd5b608081901c6001600160401b0316421115611ca45760405162bc3e2b60e21b815260040160405180910390fd5b801960801b5f03611cb957505f199050915091565b6001600160801b038116836001821115611ce957611cd86001836159e0565b6001600160801b0319841617611ceb565b5f5b935093505050915091565b6060611d006149da565b5f6040518060600160405280896001600160a01b03168152602001888152602001856001811115611d3357611d3361540e565b905290505f606b81611d4e8b611d498a8c615a40565b612023565b815260208101919091526040015f20546001600160a01b0316905080611d8657611d7f8a888886602001518661225a565b9250611d96565b611d93818b898986612400565b92505b5f83516018811115611daa57611daa61540e565b14611dd15782516040808501519051631a1537eb60e31b8152610c06929190600401615a78565b50506020015190505b9695505050505050565b80515f5b81811015611e65575f838281518110611e0357611e036158d5565b6020026020010151905080602001516001600160801b031681604001516001600160801b03161115611e3757611e37615a96565b611e5c815f0151826060015183604001518460200151611e579190615aaa565b61257a565b50600101611de8565b505050565b81515f5b81811015611f20575f848281518110611e8957611e896158d5565b602002602001015190508315611f01578051604082015160208301517f90355d540c2980efb4c360996dfc5405ee87e812e4f3db843857547cbdb5af65929190611ed4908290615aaa565b604080519384526001600160801b03928316602085015291169082015260600160405180910390a1611f17565b611f17815f01518260600151836020015161257a565b50600101611e6e565b50818015611f2f57505f198414155b15611016575f8581526069602090815260408083206001600160a01b038a16845290915290208490558315611faa577fe9f3098d0a491e82485da5966eeb7d30e88f44596b8251c34539c8dceffc35cf858760c087901c608088901c88604051611f9d959493929190615a02565b60405180910390a1611016565b5f516020615fdb5f395f51905f5285876040516106949291906153f7565b335f908152606860205260408120546001600160a01b031615611fea57503390565b5f611ff36120ff565b6001600160a01b038082165f908152606860205260409020549193501615905061201c57919050565b5f91505090565b60a01c63ffffffff60401b1660609190911b6001600160601b0319161790565b603380546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0905f90a35050565b60015f5260686020525f516020615fbb5f395f51905f52546001600160a01b0316156120d35760405163dfd49ebd60e01b815260040160405180910390fd5b60015f81905260686020525f516020615fbb5f395f51905f5280546001600160a01b0319169091179055565b5f808036606581101561211757505f93849350915050565b5f5f5f61212485856125a6565b919450925090505f6121376061866159e0565b90505f6121468683818a615ac9565b61214f91615af0565b90508460ff165f036121d55782600481108061216a57508281115b1561218057505f998a9950975050505050505050565b845f61219761219184838c8e615ac9565b866116ab565b90506121b582828c8c87908a926121b093929190615ac9565b61261c565b6121c0575f806121c3565b80825b9b509b50505050505050505050509091565b5f6121eb6121e584838a8c615ac9565b846116ab565b604080515f81526020810180835283905260ff8916918101919091526060810187905260808101869052909150819060019060a0016020604051602081039080840390855afa158015612240573d5f5f3e3d5ffd5b505050602060405103519950995050505050505050509091565b6122626149da565b5f868152606960205260409020841580159061227e5750600485105b1561229c57604051632342609160e11b815260040160405180910390fd5b82516001600160a01b03165f90815260018201602052604081205460ff16908160028111156122cd576122cd61540e565b036122f85750506040805160608101825260028152602081018590525f918101919091529050610b6c565b5f600182600281111561230d5761230d61540e565b146123415760a061231e888a615a40565b6001600160e01b031916901c855f015160601b6001600160601b0319161761235d565b84516001600160601b031960609190911b166001600160601b03175b5f8181526002850160205260408120549192508190036123e55760408051606081019091528060018560028111156123975761239761540e565b146123a35760036123a6565b60025b60188111156123b7576123b761540e565b8152602081018990526040016123cd8a8c615a40565b6001600160e01b03191690529450610b6c9350505050565b6123f2818a8a8a8a612700565b9a9950505050505050505050565b6124086149da565b81516020830151604080850151905163c7a7b63560e01b81526001600160a01b038a169363c7a7b6359361244793919290918a918a91906004016156a5565b5f60405180830381865afa92505050801561248357506040513d5f823e601f3d908101601f191682016040526124809190810190615b0d565b60015b6124a0576040516315e649e960e01b815260040160405180910390fd5b5f5b815181101561256f575f8282815181106124be576124be6158d5565b602002602001015190505f816060015190505f8260800151826124e19190615bec565b905061253c8a6124f383858c8e615ac9565b8960200151604051806060016040528089602001516001600160a01b0316815260200189604001518152602001895f015160018111156125355761253561540e565b905261225a565b95505f865160188111156125525761255261540e565b14612561575050505050610b6c565b5050508060010190506124a2565b505095945050505050565b825f52606a602052600160405f20016001600160401b038154168260401b8460c01b1717815550505050565b5f808084846125b66001826159e0565b6125c1928290615ac9565b6125ca91615bff565b60f81c925084846125dc6041826159e0565b6125e7928290615ac9565b6125f091615af0565b915084846125ff6021826159e0565b61260a928290615ac9565b61261391615af0565b90509250925092565b5f843b80820361262f575f9150506126f8565b5f866001600160a01b0316631626ba7e60e01b87878760405160240161265793929190615c35565b60408051601f198184030181529181526020820180516001600160e01b03166001600160e01b03199094169390931790925290516126959190615c4e565b5f60405180830381855afa9150503d805f81146126cd576040519150601f19603f3d011682016040523d82523d5f602084013e6126d2565b606091505b509150630b135d3f60e11b90506126e882615c64565b6001600160e01b03191614925050505b949350505050565b6127086149da565b5f5f5f612714896127fe565b9250925092505f61272e866020015187604001518561282c565b90505f8160188111156127435761274361540e565b146127815760405180606001604052808260188111156127655761276561540e565b81526020018881526020015f5f1b815250945050505050610b6c565b8315612799576040805160608101909152805f612765565b5f5f6127ac6127a7856128e0565b61293b565b915091506127b86149fa565b5f825160058111156127cc576127cc61540e565b146127df576127dc8c8c84612972565b90505b6127ed8c8c85848e8e6129c1565b9d9c50505050505050505050505050565b600160a81b811615155f8060ff60a085901c1660038111156128225761282261540e565b9294929392915050565b5f5f8411801561284e5750600182600381111561284b5761284b61540e565b14155b801561286c575060038260038111156128695761286961540e565b14155b15612879575060046117c2565b600183600181111561288d5761288d61540e565b1480156128ac575060028260038111156128a9576128a961540e565b14155b80156128ca575060038260038111156128c7576128c761540e565b14155b156128d7575060016117c2565b505f9392505050565b60605f19823b01806001600160401b038111156128ff576128ff614e88565b6040519080825280601f01601f191660200182016040528015612929576020820181803683370190505b50915080600160208401853c50919050565b612943614a31565b61294b614a58565b602083015160f01c61295e846002612d48565b925061296a8482613001565b915050915091565b61297a6149fa565b60058251600581111561298f5761298f61540e565b1461299c5761299c615a96565b6129b38484846040015185602001515186866131c6565b602081019290925250919050565b6129c96149da565b845160a0850151156129fa575050604080516060810182526014815260208101849052845191810191909152611dda565b601081601f811115612a0e57612a0e61540e565b1015612bb9575f81601f811115612a2757612a2761540e565b03612a53576040805160608101909152805f5b81526020018581526020015f5f1b815250915050611dda565b600581601f811115612a6757612a6761540e565b03612a8257612a7a88888888888861336d565b915050611dda565b600181601f811115612a9657612a9661540e565b03612aa957612a7a8888888888886134b8565b600281601f811115612abd57612abd61540e565b03612ad057612a7a88888888888861355b565b600d81601f811115612ae457612ae461540e565b03612af757612a7a888888888888613619565b600481601f811115612b0b57612b0b61540e565b03612b3c576040805160608101909152808815612b29576017612b2b565b5f5b6018811115612a3a57612a3a61540e565b600681601f811115612b5057612b5061540e565b03612b6357612a7a8888888888886136c8565b600781601f811115612b7757612b7761540e565b03612b8a57612a7a88888888888861377a565b600881601f811115612b9e57612b9e61540e565b14612bab57612bab615a96565b612a7a8888888888886137fe565b601281601f811115612bcd57612bcd61540e565b11612be9576040518060600160405280612b2b8a8a8a8a6138d1565b601481601f811115612bfd57612bfd61540e565b11612c19576040518060600160405280612b2b8a8a8a8a6139ef565b601c81601f811115612c2d57612c2d61540e565b03612c4d57612a7a612c40898988613a75565b6020880151601187613a9b565b601d81601f811115612c6157612c6161540e565b03612c7b57612a7a83602001518760200151601387613a9b565b601e81601f811115612c8f57612c8f61540e565b03612ca657612a7a60018760200151601287613a9b565b601581601f811115612cba57612cba61540e565b03612cda576040518060600160405280612b2b8a8a8a602001518a613aff565b601781601f811115612cee57612cee61540e565b03612d0e576040518060600160405280612b2b8a8a8a602001518a613c10565b601681601f811115612d2257612d2261540e565b14612d2f57612d2f615a96565b612a7a888888888888613cc0565b509695505050505050565b612d50614a31565b60209183019182015160229092019160f01c5f816001600160401b03811115612d7b57612d7b614e88565b604051908082528060200260200182016040528015612db457816020015b612da1614a31565b815260200190600190039081612d995790505b50905060015f5b83811015612fdb575f865160d81c90505f848381518110612dde57612dde6158d5565b60200260200101519050602382901c601f16601f811115612e0157612e0161540e565b8190601f811115612e1457612e1461540e565b9081601f811115612e2757612e2761540e565b90525060ff601083901c81166040830152601883901c1661ffff83168015612eb05760208b8201015160f01c5f816001600160401b03811115612e6c57612e6c614e88565b6040519080825280601f01601f191660200182016040528015612e96576020820181803683370190505b509050828d01602201816020018382825e50506020850152505b8115612f6457816001600160401b03811115612ece57612ece614e88565b604051908082528060200260200182016040528015612f0757816020015b612ef4614a31565b815260200190600190039081612eec5790505b5060608401525f5b82811015612f5e57878781518110612f2957612f296158d5565b602002602001015184606001518281518110612f4757612f476158d5565b602090810291909101015260019687019601612f0f565b50612fc8565b600f8351601f811115612f7957612f7961540e565b03612fc85760108352606554604051612f959190602001614cad565b60408051601f198184030181528282528051602091820120908301520160408051601f1981840301815291905260208401525b5050506005969096019550600101612dbb565b50815f81518110612fee57612fee6158d5565b6020026020010151935050505092915050565b613009614a58565b60209183019182015160229092019160f01c5f816001600160401b0381111561303457613034614e88565b60405190808252806020026020018201604052801561306d57816020015b61305a614a58565b8152602001906001900390816130525790505b50905060015f5b83811015612fdb575f865160e81c90505f848381518110613097576130976158d5565b60200260200101519050601582901c60071660058111156130ba576130ba61540e565b819060058111156130cd576130cd61540e565b908160058111156130e0576130e061540e565b9052506001601483901c1615156060820152610fff8216604082015260ff600c83901c1680156131b457806001600160401b0381111561312257613122614e88565b60405190808252806020026020018201604052801561315b57816020015b613148614a58565b8152602001906001900390816131405790505b5060208301525f5b818110156131b25786868151811061317d5761317d6158d5565b60200260200101518360200151828151811061319b5761319b6158d5565b602090810291909101015260019586019501613163565b505b50505060039590950194600101613074565b5f836001600160401b038111156131df576131df614e88565b60405190808252806020026020018201604052801561321857816020015b6132056149fa565b8152602001906001900390816131fd5790505b5090505f6004845160058111156132315761323161540e565b1490505f5f5b8681101561335d575f866020015184801561325757508760200151518310155b6132615782613263565b5f5b81518110613273576132736158d5565b602002602001015190505f858381518110613290576132906158d5565b602002602001015190505f826060015190505f6132b08e8e8e8986613dca565b90505f1981036132cf575050600160a088015250611016945050505050565b6132dc8e8e838787613e6e565b8260a00151156132fb575050600160a088015250611016945050505050565b8161330757602061330d565b82602001515b6133179087615bec565b955081613325576020613327565b5f5b60ff1683602001516133399190615bec565b8960200181815161334a9190615bec565b9052505060019093019250613237915050565b5050506040820152505050505050565b6133756149da565b5f856020015151602061338891906159e0565b905060208110156133dd575f8187602001516133a390615ca2565b8751911c91505f9083906133ba908b90818e615ac9565b6133c391615af0565b901c90508082146133da5750506018825250611dda565b50505b604080870151908601515181146134105782600a5b908160188111156134055761340561540e565b815250505050611dda565b602083018590525f5b8760600151518110156134ab576134808a8a8a606001518481518110613441576134416158d5565b6020026020010151858510613456578a613475565b8a60400151858151811061346c5761346c6158d5565b60200260200101515b88602001518a6129c1565b93505f845160188111156134965761349661540e565b146134a357505050611dda565b600101613419565b5050509695505050505050565b6134c06149da565b602081018390525f5b856060015151811015612d3d576135328888886060015184815181106134f1576134f16158d5565b602002602001015188608001516135085788613527565b8860400151858151811061351e5761351e6158d5565b60200260200101515b8660200151886129c1565b91505f825160188111156135485761354861540e565b146135535750611dda565b6001016134c9565b6135636149da565b5f5b8560600151518110156135f3576135ca88888860600151848151811061358d5761358d6158d5565b602002602001015188608001516135a457886135c3565b886040015185815181106135ba576135ba6158d5565b60200260200101515b88886129c1565b91505f825160188111156135e0576135e061540e565b036135eb5750611dda565b600101613565565b5050604080516060810182526005815260208101939093525f9083015250949350505050565b6136216149da565b5f856020015161363090615cc5565b60f01c90505f866020015160028151811061364d5761364d6158d5565b016020015160f81c905061365f6149fa565b8261ffff168760600151613674576020613676565b5f5b88516136859160ff1690615bec565b61368f9190615bec565b815260ff82166020820152606088015180516123f2918c918c91905f906136b8576136b86158d5565b6020026020010151848a8a6129c1565b6136d06149da565b6040840151515f5b8181101561375257613728898989606001515f815181106136fb576136fb6158d5565b602002602001015189604001518581518110613719576137196158d5565b602002602001015189896129c1565b92505f8351601881111561373e5761373e61540e565b0361374a575050611dda565b6001016136d8565b505060408051606081018252600c815260208101949094525f90840152509095945050505050565b6137826149da565b602081018390525f5b846040015151811015612d3d576137d1888888606001515f815181106137b3576137b36158d5565b60200260200101518860400151858151811061351e5761351e6158d5565b91505f825160188111156137e7576137e761540e565b146137f65750600b8152611dda565b60010161378b565b6138066149da565b606085015151604085015151818110156138225782600a6133f2565b602083018590525f61383483836159e0565b90505f5b838110156138c3576138978b8b8b60600151848151811061385b5761385b6158d5565b60200260200101518b6040015185876138749190615bec565b81518110613884576138846158d5565b602002602001015189602001518b6129c1565b94505f855160188111156138ad576138ad61540e565b146138bb5750505050611dda565b600101613838565b505050509695505050505050565b815160208301515f919082906138e690615ca2565b90505f601083601f8111156138fd576138fd61540e565b146139125761390d888887613a75565b61394c565b8451602086015189919089906139289083615bec565b9261393593929190615ac9565b6040516139439291906159f3565b60405180910390205b9050601083601f8111156139625761396261540e565b14801561396f5750818114155b1561398057600793505050506126f8565b601183601f8111156139945761399461540e565b1480156139a15750818111155b156139b257600893505050506126f8565b601283601f8111156139c6576139c661540e565b1480156139d35750818110155b156139e457600993505050506126f8565b5f93505050506126f8565b815160208301515f91908290613a0490615ca2565b90505f613a12888887613a75565b9050601383601f811115613a2857613a2861540e565b148015613a355750818113155b15613a4657600893505050506126f8565b601483601f811115613a5a57613a5a61540e565b1480156139d357508181126139e457600993505050506126f8565b8051602080830151918501359110156117c25760208083015190036008021c9392505050565b613aa36149da565b5f5f613ab0848888614033565b91509150604051806060016040528083613aca5786613acc565b5f5b6018811115613add57613add61540e565b815260200182815260200187613af290615ca2565b9052979650505050505050565b5f80613b0a84615cc5565b60f01c61ffff1690505f6002808651613b2391906159e0565b613b2d9190615d13565b90505f8460200151602014613b43576020613b45565b5f5b8551613b549160ff1690615bec565b905086613b6182826159e0565b613b6b8486615bec565b1115613b7e57600e9450505050506126f8565b365f613b8c8a85818e615ac9565b915091505f5b85811015613bff576022818b018101518783018c01909101518883018501355f613bc4613bbf868c6159e0565b6140b6565b9050808483161681841614613be757600f9b5050505050505050505050506126f8565b50505050602081613bf89190615bec565b9050613b92565b505f9b9a5050505050505050505050565b5f5f613c1b846140e8565b90505f5f613c2b888885886141ae565b90925090505f82613c3e61271084615d26565b613c489190615d13565b90505f846080015163ffffffff16118015613c6c5750836080015163ffffffff1681105b15613c7e5760159450505050506126f8565b5f8460a0015163ffffffff16118015613ca057508360a0015163ffffffff1681115b15613cb25760169450505050506126f8565b505f98975050505050505050565b613cc86149da565b5f8560200151613cd790615ca2565b60601c90505f8660200151613ceb90615ca2565b5f1c60a01b90505f5f836001600160a01b031663b0acb980875f015188602001518e8e8b604001518e5f01518f602001518b6040518963ffffffff1660e01b8152600401613d40989796959493929190615d3d565b6040805180830381865afa158015613d5a573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190613d7e9190615d9c565b91509150604051806060016040528083613d99576010613d9b565b5f5b6018811115613dac57613dac61540e565b81526020810198909852604090970152509398975050505050505050565b5f84613dd68486615bec565b613de1906020615bec565b1115613def57505f19610b6c565b8115613e0657613dff8385615bec565b9050610b6c565b5f613e208787613e168789615bec565b9190910135919050565b9050838111613e33575f19915050610b6c565b85613e3e8287615bec565b613e49906020615bec565b1115613e59575f19915050610b6c565b613e638186615bec565b979650505050505050565b83613e7a846020615bec565b1115613e8c57600160a082015261402c565b82815260608083015115159082015281516001816005811115613eb157613eb161540e565b03613ec15760208281015261400c565b6002816005811115613ed557613ed561540e565b03613f135760208301515115613ef257613ef2868686868661442d565b613efe84870135614530565b613f09906020615bec565b602083015261400c565b6003816005811115613f2757613f2761540e565b03613f4457613f3f86868686602001515187876131c6565b61400c565b6004816005811115613f5857613f5861540e565b03613f9357613f788686613f6d876020615bec565b878a013587876131c6565b602082602001818151613f8b9190615bec565b90525061400c565b6005816005811115613fa757613fa761540e565b14613fb457613fb4615a96565b613fe286868560400151876020613fcb9190615bec565b613fd59190615bec565b86602001515187876131c6565b613fed846020615bec565b8252613ffb84870135614530565b614006906020615bec565b60208301525b6020820151859061401d9086615bec565b111561101657600160a0830152505b5050505050565b5f6060818061404a8761404587615ca2565b614546565b915091506140588686614690565b826040018181516140699190615dc8565b6001600160801b039081169091526020840151604085015190821691161190506140a557600161409a88838561479e565b9350935050506140ae565b5f879350935050505b935093915050565b5f5f601f83116140d0576140cb8360206159e0565b6140d2565b5f5b6140dd906008615d26565b5f19901b9392505050565b60408051610100810182525f80825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e081018290529061413183615ca2565b60f881901c835260ff60f082901c811660208086019190915260e883901c8216604086015260e083901c909116606085015260c082811c63ffffffff908116608087015260a084811c909116908601526001600160a01b03831690850152845191925010156141a857604083015160601c60e08301525b50919050565b5f5f5f846060015160ff16856020015160ff16116141d05784606001516141d6565b84602001515b60ff169050601281116141ea5760126141ec565b805b90505f856020015160ff168261420291906159e0565b61420d90600a615ec2565b614243898988604001518a5f015160ff168151811061422e5761422e6158d5565b60200260200101515f01519190910135919050565b61424d9190615d26565b90505f866060015160ff168361426391906159e0565b61426e90600a615ec2565b6142908a8a89604001518b6040015160ff168151811061422e5761422e6158d5565b61429a9190615d26565b90505f6142a86012856159e0565b6142b390600a615ec2565b60c08901519091505f906001600160a01b03166142da576142d585600a615ec2565b614349565b818960c001516001600160a01b03166398d5fdca6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561431b573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061433f9190615ecd565b6143499190615d26565b60e08a01519091505f906001600160a01b03166143705761436b86600a615ec2565b6143df565b828a60e001516001600160a01b03166398d5fdca6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156143b1573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906143d59190615ecd565b6143df9190615d26565b90505f6143ed87600a615ec2565b9050806143fa8488615d26565b6144049190615d13565b9850806144118387615d26565b61441b9190615d13565b97505050505050505094509492505050565b60208201515160016080830181905260a0830152806001600160401b0381111561445957614459614e88565b60405190808252806020026020018201604052801561449257816020015b61447f6149fa565b8152602001906001900390816144775790505b5060408301525f5b81811015614527576144e9878787876020015185815181106144be576144be6158d5565b6020026020010151876040015186815181106144dc576144dc6158d5565b6020026020010151613e6e565b8260a00151801561451857508260400151818151811061450b5761450b6158d5565b602002602001015160a001515b151560a084015260010161449a565b50505050505050565b5f601f1961453f83601f615bec565b1692915050565b604080516080810182525f80825260208201819052918101829052606081019190915282515f905b808210156145a55783858381518110614589576145896158d5565b60200260200101515f015103156145a55781600101915061456e565b808210156146475760405180608001604052808581526020018684815181106145d0576145d06158d5565b6020026020010151602001516001600160801b031681526020018684815181106145fc576145fc6158d5565b6020026020010151604001516001600160801b03168152602001868481518110614628576146286158d5565b6020026020010151606001516001600160401b03168152509250614688565b5f5f6146538642614811565b604080516080810182528981526001600160801b0390931660208401525f908301526001600160401b03166060820152945050505b509250929050565b5f602082511115614797575f604083015160601c90505f836034815181106146ba576146ba6158d5565b602001015160f81c60f81b60f81c90505f846035815181106146de576146de6158d5565b602001015160f81c60f81b60f81c90505f836001600160a01b03166398d5fdca6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561472b573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061474f9190615ecd565b905061475c826012615ee4565b61476790600a615efd565b61477284600a615efd565b61477c838a615d26565b6147869190615d26565b6147909190615d13565b9650505050505b5090919050565b82516060905f8482146147b1575f6147b4565b60015b6147c19060ff1683615bec565b905060405192506020600182010283016040528083526020830160208701602084028082845e505050838386815181106147fd576147fd6158d5565b602002602001018190525050509392505050565b5f5f6148ac6148a6856040805160a0810182525f80825260208201819052918101829052606081018290526080810191909152505f908152606a60209081526040918290208054600190910154835160a0810185526001600160801b038084168252608093841c948201949094526001600160401b038216818601529381901c909216606084015260c09190911c9082015290565b846148b8565b915091505b9250929050565b5f5f83604001516001600160401b03165f14806148f95750836040015184608001516148e49190615f0b565b6001600160401b0316836001600160401b0316105b1561490f575050606082015160808301516148b1565b5f84604001518560800151856149259190615f2a565b61492f9190615f49565b905084602001516001600160801b031685606001516001600160801b031610156149aa578451614969906001600160401b03831690615f76565b85606001516149789190615dc8565b925084602001516001600160801b0316836001600160801b0316106149a15784602001516149a3565b825b92506149b2565b846060015192505b60408501516149c19082615f98565b85608001516149d09190615f0b565b9150509250929050565b6040805160608101909152805f8152602001606081526020015f81525090565b6040518060c001604052805f81526020015f8152602001606081526020015f151581526020015f151581526020015f151581525090565b6040805160808101909152805f8152602001606081526020015f8152602001606081525090565b6040805160808101909152805f81526060602082018190525f6040830181905291015290565b80356001600160801b0381168114614a94575f5ffd5b919050565b80356001600160401b0381168114614a94575f5ffd5b5f5f5f5f60808587031215614ac2575f5ffd5b84359350614ad260208601614a7e565b9250614ae060408601614a7e565b9150614aee60608601614a99565b905092959194509250565b6001600160a01b0381168114611a2c575f5ffd5b5f5f60408385031215614b1e575f5ffd5b823591506020830135614b3081614af9565b809150509250929050565b5f60208284031215614b4b575f5ffd5b81356117c281614af9565b5f5f83601f840112614b66575f5ffd5b5081356001600160401b03811115614b7c575f5ffd5b6020830191508360208260051b85010111156148b1575f5ffd5b803560048110614a94575f5ffd5b5f5f5f5f5f60808688031215614bb8575f5ffd5b853594506020860135614bca81614af9565b935060408601356001600160401b03811115614be4575f5ffd5b614bf088828901614b56565b9094509250614c03905060608701614b96565b90509295509295909350565b5f5f60408385031215614c20575f5ffd5b8235614c2b81614af9565b946020939093013593505050565b80356001600160e01b031981168114614a94575f5ffd5b5f5f5f60608486031215614c62575f5ffd5b8335614c6d81614af9565b9250614c7b60208501614c39565b91506040840135614c8b81614af9565b809150509250925092565b5f60208284031215614ca6575f5ffd5b5035919050565b6001600160a01b0391909116815260200190565b5f5f83601f840112614cd1575f5ffd5b5081356001600160401b03811115614ce7575f5ffd5b6020830191508360208285010111156148b1575f5ffd5b60028110611a2c575f5ffd5b8015158114611a2c575f5ffd5b5f5f5f5f5f5f5f60c0888a031215614d2d575f5ffd5b8735614d3881614af9565b96506020880135955060408801356001600160401b03811115614d59575f5ffd5b614d658a828b01614cc1565b9096509450506060880135614d7981614cfe565b92506080880135915060a0880135614d9081614d0a565b8091505092959891949750929550565b5f81518084528060208401602086015e5f602082860101526020601f19601f83011685010191505092915050565b8215158152604060208201525f6126f86040830184614da0565b5f5f5f5f5f60808688031215614dfc575f5ffd5b8535614e0781614af9565b94506020860135935060408601356001600160401b03811115614e28575f5ffd5b614e3488828901614cc1565b9094509250506060860135614e4881614cfe565b809150509295509295909350565b5f5f5f60608486031215614e68575f5ffd5b833592506020840135614e7a81614af9565b915061261360408501614c39565b634e487b7160e01b5f52604160045260245ffd5b604051608081016001600160401b0381118282101715614ebe57614ebe614e88565b60405290565b60405160a081016001600160401b0381118282101715614ebe57614ebe614e88565b604051601f8201601f191681016001600160401b0381118282101715614f0e57614f0e614e88565b604052919050565b5f6001600160401b03821115614f2e57614f2e614e88565b5060051b60200190565b803560ff81168114614a94575f5ffd5b803560068110614a94575f5ffd5b803560208110614a94575f5ffd5b5f6001600160401b03821115614f7c57614f7c614e88565b50601f01601f191660200190565b5f82601f830112614f99575f5ffd5b8135614fac614fa782614f64565b614ee6565b818152846020838601011115614fc0575f5ffd5b816020850160208301375f918101602001919091529392505050565b5f5f5f5f5f60a08688031215614ff0575f5ffd5b85359450602086013561500281614af9565b935061501060408701614c39565b925060608601356001600160401b0381111561502a575f5ffd5b8601601f8101881361503a575f5ffd5b8035615048614fa782614f16565b8082825260208201915060208360051b85010192508a831115615069575f5ffd5b602084015b838110156151145780356001600160401b0381111561508b575f5ffd5b85016080818e03601f190112156150a0575f5ffd5b6150a8614e9c565b6150b460208301614f38565b81526150c260408301614f48565b60208201526150d360608301614f56565b604082015260808201356001600160401b038111156150f0575f5ffd5b6150ff8f602083860101614f8a565b6060830152508452506020928301920161506e565b509450614c039250505060808701614b96565b5f5f5f5f5f6060868803121561513b575f5ffd5b853561514681614af9565b945060208601356001600160401b03811115615160575f5ffd5b61516c88828901614b56565b90955093505060408601356001600160401b0381111561518a575f5ffd5b61519688828901614b56565b969995985093965092949392505050565b5f602082840312156151b7575f5ffd5b81356001600160401b038111156151cc575f5ffd5b6126f884828501614f8a565b5f5f5f5f5f5f60c087890312156151ed575f5ffd5b863595506151fd60208801614a7e565b945061520b60408801614a7e565b935061521960608801614a7e565b925061522760808801614a99565b915061523560a08801614a99565b90509295509295509295565b5f5f5f5f60808587031215615254575f5ffd5b84359350602085013561526681614af9565b925061527460408601614c39565b9150614aee60608601614b96565b604080825283519082018190525f9060208501906060840190835b818110156152c45783516001600160a01b031683526020938401939092019160010161529d565b50506001600160a01b039490941660209390930192909252509092915050565b5f5f5f604084860312156152f6575f5ffd5b83356001600160401b0381111561530b575f5ffd5b61531786828701614cc1565b909790965060209590950135949350505050565b5f5f6040838503121561533c575f5ffd5b823561534781614af9565b91506020830135614b3081614af9565b5f5f5f5f5f60a0868803121561536b575f5ffd5b853561537681614af9565b94506020860135935061538b60408701614a99565b925061539960608701614a99565b9150614c0360808701614a7e565b602081525f6117c26020830184614da0565b9586526001600160801b0394851660208701529284166040860152921660608401526001600160401b0391821660808401521660a082015260c00190565b9182526001600160a01b0316602082015260400190565b634e487b7160e01b5f52602160045260245ffd5b600681106154325761543261540e565b9052565b602081106154325761543261540e565b5f5f8335601e1984360301811261545b575f5ffd5b83016020810192503590506001600160401b03811115615479575f5ffd5b8036038213156148b1575f5ffd5b81835281816020850137505f828201602090810191909152601f909101601f19169091010190565b5f8235607e198336030181126154c3575f5ffd5b90910192915050565b602080825281018290525f6040600584901b8301810190830185835b8681101561558057858403603f1901835261550382896154af565b60ff61550e82614f38565b16855261551d60208201614f48565b61552a6020870182615422565b5061553760408201614f56565b6155446040870182615436565b506155526060820182615446565b915060806060870152615569608087018383615487565b9550505060209283019291909101906001016154e8565b50919695505050505050565b5f6020828403121561559c575f5ffd5b81516117c281614af9565b600481106154325761543261540e565b8581526001600160a01b038516602082015260806040820181905281018390525f60a0600585901b8301810190830186835b8781101561568157858403609f19018352615604828a6154af565b60ff61560f82614f38565b16855261561e60208201614f48565b61562b6020870182615422565b5061563860408201614f56565b6156456040870182615436565b506156536060820182615446565b91506080606087015261566a608087018383615487565b9550505060209283019291909101906001016155e9565b50505080915050611dda60608301846155a7565b600281106154325761543261540e565b60018060a01b0386168152846020820152608060408201525f6156cc608083018587615487565b9050611dda6060830184615695565b5f5f604083850312156156ec575f5ffd5b82516156f781614d0a565b60208401519092506001600160401b03811115615712575f5ffd5b8301601f81018513615722575f5ffd5b8051615730614fa782614f64565b818152866020838501011115615744575f5ffd5b8160208401602083015e5f602083830101528093505050509250929050565b5f602082016020835280845180835260408501915060408160051b8601019250602086015f5b828110156157fa57603f19878603018452815160ff815116865260208101516157b56020880182615422565b5060408101516157c86040880182615436565b5060608101519050608060608701526157e46080870182614da0565b9550506020938401939190910190600101615789565b50929695505050505050565b5f60a0820187835260018060a01b038716602084015263ffffffff60e01b8616604084015260a0606084015280855180835260c08501915060c08160051b8601019250602087015f5b828110156158c05760bf19878603018452815160ff8151168652602081015161587b6020880182615422565b50604081015161588e6040880182615436565b5060608101519050608060608701526158aa6080870182614da0565b955050602093840193919091019060010161584f565b5050505080915050611dda60808301846155a7565b634e487b7160e01b5f52603260045260245ffd5b5f602082840312156158f9575f5ffd5b81356117c281614d0a565b5f5f5f60608486031215615916575f5ffd5b835161592181614af9565b602085015190935061593281614af9565b6040850151909250614c8b81614af9565b6001600160a01b03831681526040602082018190525f906126f890830184614da0565b8481526001600160a01b03841660208201526001600160e01b03198316604082015260808101610b6c60608301846155a7565b5f602082840312156159a9575f5ffd5b81516117c281614d0a565b634e487b7160e01b5f52601160045260245ffd5b5f600182016159d9576159d96159b4565b5060010190565b81810381811115610b2957610b296159b4565b818382375f9101908152919050565b9485526001600160a01b039390931660208501526001600160401b0391821660408501521660608301526001600160801b0316608082015260a00190565b80356001600160e01b03198116906004841015615a71576001600160e01b0319600485900360031b81901b82161691505b5092915050565b6040810160198410615a8c57615a8c61540e565b9281526020015290565b634e487b7160e01b5f52600160045260245ffd5b6001600160801b038281168282160390811115610b2957610b296159b4565b5f5f85851115615ad7575f5ffd5b83861115615ae3575f5ffd5b5050820193919092039150565b80356020831015610b29575f19602084900360031b1b1692915050565b5f60208284031215615b1d575f5ffd5b81516001600160401b03811115615b32575f5ffd5b8201601f81018413615b42575f5ffd5b8051615b50614fa782614f16565b80828252602082019150602060a08402850101925086831115615b71575f5ffd5b6020840193505b82841015611dda5760a08488031215615b8f575f5ffd5b615b97614ec4565b8451615ba281614cfe565b81526020850151615bb281614af9565b60208281019190915260408681015190830152606080870151908301526080808701519083015290835260a0909401939190910190615b78565b80820180821115610b2957610b296159b4565b80356001600160f81b03198116906001841015615a71576001600160f81b031960019490940360031b84901b1690921692915050565b838152604060208201525f610b6c604083018486615487565b5f82518060208501845e5f920191825250919050565b805160208201516001600160e01b0319811691906004821015615c9b576001600160e01b0319600483900360031b81901b82161692505b5050919050565b805160208083015191908110156141a8575f1960209190910360031b1b16919050565b805160208201516001600160f01b0319811691906002821015615c9b576001600160f01b031960029290920360031b82901b161692915050565b634e487b7160e01b5f52601260045260245ffd5b5f82615d2157615d21615cff565b500490565b8082028115828204841417610b2957610b296159b4565b60018060a01b038916815287602082015260e060408201525f615d6460e08301888a615487565b9050615d736060830187615695565b608082019490945260a08101929092526001600160a01b03191660c09091015295945050505050565b5f5f60408385031215615dad575f5ffd5b8251615db881614d0a565b6020939093015192949293505050565b6001600160801b038181168382160190811115610b2957610b296159b4565b6001815b60018411156140ae57808504811115615e0657615e066159b4565b6001841615615e1457908102905b60019390931c928002615deb565b5f82615e3057506001610b29565b81615e3c57505f610b29565b8160018114615e525760028114615e5c57615e78565b6001915050610b29565b60ff841115615e6d57615e6d6159b4565b50506001821b610b29565b5060208310610133831016604e8410600b8410161715615e9b575081810a610b29565b615ea75f198484615de7565b805f1904821115615eba57615eba6159b4565b029392505050565b5f6117c28383615e22565b5f60208284031215615edd575f5ffd5b5051919050565b60ff8181168382160190811115610b2957610b296159b4565b5f6117c260ff841683615e22565b6001600160401b038181168382160190811115610b2957610b296159b4565b6001600160401b038281168282160390811115610b2957610b296159b4565b5f6001600160401b03831680615f6157615f61615cff565b806001600160401b0384160491505092915050565b6001600160801b038181168382160290811690818114615a7157615a716159b4565b6001600160401b038181168382160290811690818114615a7157615a716159b456fe82eaf0fca2207f91f5027fcf68136c84edb7e928c081c42aa5bbc2a771c7d37676e6093c136cd7faa5a6d92b2b633f3b4595abd4a529b7a13917398355fea694a2646970667358221220f3a34adc69267b23eeb2fee94083914640c4ace8cda64933ce438c14a5aa254064736f6c634300081e003382eaf0fca2207f91f5027fcf68136c84edb7e928c081c42aa5bbc2a771c7d376"

function createEIP1193(
  chainId: number | undefined,
  provider: EthereumProvider,
  signer: HardhatEthersSigner
): EIP1193Provider {
  return {
    request: async ({ method, params }) => {
      if (method == "eth_sendTransaction") {
        const { hash } = await signer.sendTransaction((params as any[])[0])
        return hash
      }

      return provider.request({ method, params })
    },
  }
}
